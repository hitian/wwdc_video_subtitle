1
00:00:07,516 --> 00:00:18,500
[ Music ]

2
00:00:24,516 --> 00:00:28,576
[ Applause ]

3
00:00:29,076 --> 00:00:29,896
&gt;&gt; Hello everyone.

4
00:00:29,896 --> 00:00:32,216
Welcome. My name is

5
00:00:32,216 --> 00:00:36,496
I work on the Siri and Search at

6
00:00:36,496 --> 00:00:38,776
by my colleague John

7
00:00:38,776 --> 00:00:40,386
to show you what's

8
00:00:40,386 --> 00:00:42,116
and how you can make

9
00:00:42,806 --> 00:00:46,826
As you know, Spotlight has been

10
00:00:46,826 --> 00:00:50,396
tool in recent releases of iOS.

11
00:00:50,396 --> 00:00:52,836
In iOS 8 we introduced

12
00:00:52,836 --> 00:00:56,296
through internet sources, like

13
00:00:56,406 --> 00:01:00,336
And then in iOS 9 we

14
00:00:56,406 --> 00:01:00,336
And then in iOS 9 we

15
00:01:00,336 --> 00:01:03,326
scope and introduced

16
00:01:03,856 --> 00:01:06,206
currency conversions,

17
00:01:06,206 --> 00:01:07,826
web, and much, much more.

18
00:01:07,826 --> 00:01:11,386
Perhaps most importantly,

19
00:01:11,386 --> 00:01:14,936
and powerful ways in which we

20
00:01:14,936 --> 00:01:16,166
searchable through Spotlight.

21
00:01:16,546 --> 00:01:20,436
So in iOS 10, today we

22
00:01:20,596 --> 00:01:24,086
of these Search APIs that will

23
00:01:24,086 --> 00:01:25,156
of your app's content.

24
00:01:25,806 --> 00:01:30,126
We've also made Spotlight easier

25
00:01:30,126 --> 00:01:34,816
So let me start by showing

26
00:01:34,816 --> 00:01:36,486
that we've done to Spotlight.

27
00:01:37,816 --> 00:01:40,606
Spotlight is now present

28
00:01:40,876 --> 00:01:44,396
which makes it a lot

29
00:01:44,466 --> 00:01:45,876
Let's look at an example here.

30
00:01:45,876 --> 00:01:48,286
User receives a message

31
00:01:48,286 --> 00:01:51,076
Very typical thing that happens.

32
00:01:51,456 --> 00:01:53,476
And they want to run

33
00:01:54,046 --> 00:01:57,856
Instead of having to quit

34
00:01:57,986 --> 00:02:01,176
pull down Spotlight, they can

35
00:01:57,986 --> 00:02:01,176
pull down Spotlight, they can

36
00:02:01,176 --> 00:02:06,796
of messages, run their

37
00:02:08,196 --> 00:02:09,536
It's super convenient.

38
00:02:11,456 --> 00:02:16,776
We've also introduced Spotlight

39
00:02:16,776 --> 00:02:18,976
to quickly preview

40
00:02:19,746 --> 00:02:21,566
That's see what this looks like.

41
00:02:22,916 --> 00:02:25,596
Suppose you're having an

42
00:02:25,596 --> 00:02:27,176
on where Steph Curry was born.

43
00:02:27,176 --> 00:02:30,156
You can go to the Lock screen,

44
00:02:31,226 --> 00:02:35,976
run your search,

45
00:02:36,206 --> 00:02:39,136
see the result, and now you can

46
00:02:44,646 --> 00:02:46,016
and find the one you

47
00:02:46,016 --> 00:02:47,626
which is Wikipedia in this case.

48
00:02:48,566 --> 00:02:49,746
Really, really convenient.

49
00:02:49,746 --> 00:02:52,196
And, of course, when you're in

50
00:02:52,196 --> 00:02:56,046
that you present are public

51
00:02:58,576 --> 00:03:00,536
Now, another neat

52
00:02:58,576 --> 00:03:00,536
Now, another neat

53
00:03:00,536 --> 00:03:03,856
to Spotlight is query

54
00:03:03,856 --> 00:03:06,676
in the quick type

55
00:03:06,676 --> 00:03:07,816
when you type in the query.

56
00:03:07,816 --> 00:03:09,096
Let's look at an example.

57
00:03:09,716 --> 00:03:11,886
Here the user searches

58
00:03:11,886 --> 00:03:15,416
based on past queries,

59
00:03:15,416 --> 00:03:18,296
for banjo are banjo

60
00:03:18,516 --> 00:03:20,826
So if the result that they

61
00:03:20,826 --> 00:03:23,876
on the screen, they can pick one

62
00:03:23,876 --> 00:03:26,976
This will make a lot

63
00:03:27,116 --> 00:03:28,166
to execute in Spotlight.

64
00:03:28,166 --> 00:03:30,276
Now, we've done many

65
00:03:30,276 --> 00:03:34,516
We've improved spell correction

66
00:03:34,566 --> 00:03:37,056
We've improved support

67
00:03:37,056 --> 00:03:39,866
and Chinese scripts on device.

68
00:03:39,866 --> 00:03:42,546
And we've made relevant,

69
00:03:42,546 --> 00:03:44,336
And all these changes,

70
00:03:44,336 --> 00:03:47,736
apply to content that's

71
00:03:49,276 --> 00:03:52,316
So now let's turn our

72
00:03:53,416 --> 00:03:55,316
Now, as many of you

73
00:03:55,316 --> 00:03:58,566
we introduced three

74
00:03:59,096 --> 00:04:00,806
There's CoreSpotlight,

75
00:03:59,096 --> 00:04:00,806
There's CoreSpotlight,

76
00:04:00,806 --> 00:04:04,746
to insert user specific or

77
00:04:04,746 --> 00:04:06,616
on Spotlight's device index.

78
00:04:07,836 --> 00:04:09,866
We also introduced

79
00:04:09,866 --> 00:04:13,136
a searchable version of this,

80
00:04:13,136 --> 00:04:17,236
to index everything that the

81
00:04:17,286 --> 00:04:20,255
so that they can search for

82
00:04:20,255 --> 00:04:24,496
And finally, we introduced

83
00:04:24,786 --> 00:04:28,456
which is an index on the

84
00:04:28,656 --> 00:04:32,046
that we have discovered

85
00:04:32,226 --> 00:04:34,226
And we designed these

86
00:04:34,226 --> 00:04:36,496
so whether the results

87
00:04:36,676 --> 00:04:39,076
or the server, they

88
00:04:39,576 --> 00:04:43,466
to provide a seamless experience

89
00:04:44,636 --> 00:04:48,806
I'm happy to announce

90
00:04:48,806 --> 00:04:50,626
in the App Store have

91
00:04:50,786 --> 00:04:51,976
It's really incredible.

92
00:04:52,516 --> 00:04:57,666
[ Applause ]

93
00:04:58,166 --> 00:05:01,446
I think something really

94
00:04:58,166 --> 00:05:01,446
I think something really

95
00:05:01,446 --> 00:05:04,226
who Search APIs have improved

96
00:05:04,226 --> 00:05:05,426
that our customers are having

97
00:05:05,646 --> 00:05:07,716
with your app and

98
00:05:07,716 --> 00:05:09,646
I have some of my

99
00:05:09,646 --> 00:05:10,606
that I'd like to show you.

100
00:05:12,116 --> 00:05:14,306
This is actually

101
00:05:14,306 --> 00:05:17,396
I'm planning a trip to

102
00:05:17,396 --> 00:05:21,086
and I've been planning this trip

103
00:05:21,716 --> 00:05:23,446
Now, various pieces

104
00:05:23,446 --> 00:05:26,046
like hotel reservations and

105
00:05:26,046 --> 00:05:29,506
on my device, and typically

106
00:05:29,506 --> 00:05:31,566
to the app or the website,

107
00:05:31,566 --> 00:05:34,906
or dig through the

108
00:05:34,906 --> 00:05:39,506
But with Search APIs, this is

109
00:05:39,506 --> 00:05:43,386
The apps that I've used to

110
00:05:43,386 --> 00:05:45,566
have added salient

111
00:05:45,726 --> 00:05:47,716
to Spotlight's index

112
00:05:48,136 --> 00:05:53,226
So I can see my flight ticket, I

113
00:05:53,226 --> 00:05:54,086
through Hotel Tonight,

114
00:05:54,086 --> 00:05:56,946
and a couple dinner reservations

115
00:05:56,946 --> 00:06:00,506
I can find more information

116
00:05:56,946 --> 00:06:00,506
I can find more information

117
00:06:00,506 --> 00:06:01,936
like what is my check-in time

118
00:06:04,366 --> 00:06:05,976
or address of one of

119
00:06:11,056 --> 00:06:12,266
And you'll also notice

120
00:06:12,946 --> 00:06:15,536
that I have some results

121
00:06:15,536 --> 00:06:16,936
I've been using the

122
00:06:17,416 --> 00:06:20,136
to explore the things I

123
00:06:20,136 --> 00:06:22,776
Now, Pinterest uses

124
00:06:23,256 --> 00:06:26,246
to index everything that I have

125
00:06:26,246 --> 00:06:29,346
and I can tap on one

126
00:06:29,346 --> 00:06:30,976
And continue my exploration.

127
00:06:36,246 --> 00:06:39,496
So this is a really

128
00:06:39,496 --> 00:06:43,326
for doing travel search and

129
00:06:43,326 --> 00:06:44,496
that I know exists on my device.

130
00:06:44,496 --> 00:06:48,426
And what we've seen is, in

131
00:06:48,426 --> 00:06:52,476
that your users want to get back

132
00:06:53,776 --> 00:06:56,726
Another example I want to

133
00:06:56,726 --> 00:07:00,406
Contacts is one of the most

134
00:06:56,726 --> 00:07:00,406
Contacts is one of the most

135
00:07:00,596 --> 00:07:01,316
in Spotlight.

136
00:07:01,666 --> 00:07:03,496
Here I'm searching

137
00:07:03,496 --> 00:07:07,586
I see his contacts, which

138
00:07:07,916 --> 00:07:12,196
but I also see his Skype profile

139
00:07:12,196 --> 00:07:15,036
that I'm having with him

140
00:07:15,036 --> 00:07:17,946
and I can easily get back

141
00:07:21,156 --> 00:07:25,176
And this is so powerful because

142
00:07:25,176 --> 00:07:29,386
of centralized view of people

143
00:07:29,386 --> 00:07:31,976
to have conversations with them

144
00:07:38,056 --> 00:07:41,566
Now, what we have seen is

145
00:07:41,566 --> 00:07:43,526
to Spotlight for all the things

146
00:07:43,526 --> 00:07:45,256
that Spotlight supports

147
00:07:46,016 --> 00:07:49,616
and if you have content in these

148
00:07:49,616 --> 00:07:51,506
to broaden that search

149
00:07:51,806 --> 00:07:54,746
as well as drive

150
00:07:57,496 --> 00:07:59,686
Now, finally, let's

151
00:07:59,736 --> 00:08:01,176
of Universal Links index.

152
00:07:59,736 --> 00:08:01,176
of Universal Links index.

153
00:08:01,586 --> 00:08:06,386
wikiHow is a high quality how-to

154
00:08:06,386 --> 00:08:08,976
of thousands of articles

155
00:08:09,476 --> 00:08:12,066
Here I'm searching for a

156
00:08:12,066 --> 00:08:14,806
how to perform CPR, and

157
00:08:14,806 --> 00:08:20,896
of results from web, YouTube, as

158
00:08:22,296 --> 00:08:24,336
Now, wikiHow uses

159
00:08:24,336 --> 00:08:25,966
and they have a popular app.

160
00:08:26,376 --> 00:08:29,236
So we have indexed their

161
00:08:29,436 --> 00:08:33,895
and we present them for

162
00:08:34,046 --> 00:08:36,576
It's pretty comprehensive

163
00:08:36,576 --> 00:08:39,856
of these results, I go

164
00:08:39,856 --> 00:08:40,885
illustrated article.

165
00:08:42,196 --> 00:08:48,226
The index of wikiHow has really

166
00:08:48,576 --> 00:08:52,036
to Spotlight, which is what

167
00:08:53,066 --> 00:08:56,206
With that, let's start

168
00:08:56,206 --> 00:08:58,826
in Search APIs in iOS 10.

169
00:08:59,616 --> 00:09:04,656
The first feature we are adding

170
00:08:59,616 --> 00:09:04,656
The first feature we are adding

171
00:09:04,656 --> 00:09:04,966
in App.

172
00:09:04,966 --> 00:09:08,796
And for a lot of queries

173
00:09:08,796 --> 00:09:12,026
at a larger result set, or

174
00:09:12,026 --> 00:09:15,226
to add the right result to

175
00:09:15,806 --> 00:09:21,876
So for now apps have an option

176
00:09:21,876 --> 00:09:26,066
Out on the top right corner

177
00:09:26,066 --> 00:09:29,116
of their section,

178
00:09:29,116 --> 00:09:36,736
And tapping on this takes

179
00:09:37,136 --> 00:09:38,066
with the search query.

180
00:09:38,246 --> 00:09:41,606
So you can continue the search

181
00:09:41,606 --> 00:09:45,066
It's super cool.

182
00:09:46,476 --> 00:09:49,736
The second feature we are

183
00:09:49,736 --> 00:09:50,106
Search API.

184
00:09:50,136 --> 00:09:54,186
It's a slightly overloaded name,

185
00:09:54,186 --> 00:09:57,236
that you're adding

186
00:09:57,296 --> 00:10:00,756
to Spotlight's search

187
00:09:57,296 --> 00:10:00,756
to Spotlight's search

188
00:10:01,286 --> 00:10:03,706
Wouldn't it be awesome if

189
00:10:03,956 --> 00:10:05,466
to power search inside

190
00:10:05,466 --> 00:10:07,056
I think it would be.

191
00:10:07,056 --> 00:10:09,966
And this is exactly what

192
00:10:09,966 --> 00:10:13,056
you to do.

193
00:10:13,206 --> 00:10:14,986
The third feature we

194
00:10:14,986 --> 00:10:18,226
to estimate popularity of

195
00:10:18,226 --> 00:10:20,796
privacy, the technology that

196
00:10:21,366 --> 00:10:24,646
We will discuss this more later

197
00:10:24,726 --> 00:10:29,636
And finally, by popular

198
00:10:29,636 --> 00:10:31,196
to our web markup preview tool

199
00:10:31,196 --> 00:10:36,236
that lets you visually inspect

200
00:10:36,236 --> 00:10:38,136
you put them in a

201
00:10:38,706 --> 00:10:43,956
And in addition to these we

202
00:10:43,956 --> 00:10:45,706
to Search APIs based

203
00:10:45,706 --> 00:10:50,676
And now I will invite John to

204
00:10:50,676 --> 00:10:51,976
and do deeper dives

205
00:10:52,516 --> 00:10:55,696
[ Applause ]

206
00:10:56,196 --> 00:10:59,526
&gt;&gt; Let's start talking about

207
00:11:00,446 --> 00:11:03,876
In the next half hour I'm

208
00:11:03,876 --> 00:11:06,736
that you have to do for your

209
00:11:06,736 --> 00:11:09,416
with Spotlight, some

210
00:11:10,076 --> 00:11:12,886
to give users a great

211
00:11:12,886 --> 00:11:14,826
that we've added to

212
00:11:14,826 --> 00:11:16,536
to accomplish what you need.

213
00:11:18,356 --> 00:11:21,266
So roughly in the order that

214
00:11:21,776 --> 00:11:24,036
I'm going to talk about

215
00:11:24,656 --> 00:11:26,816
into the index available

216
00:11:27,246 --> 00:11:28,476
and keeping it up to date.

217
00:11:29,916 --> 00:11:31,396
Presentation and

218
00:11:32,906 --> 00:11:36,096
launching into your app,

219
00:11:36,716 --> 00:11:39,756
or for search continuation,

220
00:11:39,756 --> 00:11:43,706
about the new Search API

221
00:11:44,626 --> 00:11:48,086
to give you an overview ranking.

222
00:11:48,446 --> 00:11:49,646
So we have three technologies

223
00:11:49,856 --> 00:11:51,466
that together cover

224
00:11:52,336 --> 00:11:54,846
CoreSpotlight, for all that

225
00:11:56,146 --> 00:11:58,546
NSUserActivity for app history.

226
00:11:59,666 --> 00:12:01,836
And Universal Links

227
00:11:59,666 --> 00:12:01,836
And Universal Links

228
00:12:02,026 --> 00:12:03,726
for public online content.

229
00:12:04,446 --> 00:12:07,996
Of course, you can use

230
00:12:07,996 --> 00:12:12,036
As an example, consider

231
00:12:13,226 --> 00:12:16,306
It provides an interface to

232
00:12:16,856 --> 00:12:21,346
There are hosts on the website,

233
00:12:22,356 --> 00:12:23,976
The app may also have

234
00:12:24,316 --> 00:12:25,986
and for that you would

235
00:12:27,786 --> 00:12:30,466
Your users will want

236
00:12:30,466 --> 00:12:31,066
that they've looked at,

237
00:12:31,706 --> 00:12:34,226
so for the best experience

238
00:12:34,736 --> 00:12:36,856
through NSUserActivity as well.

239
00:12:39,006 --> 00:12:39,206
All right.

240
00:12:40,086 --> 00:12:41,806
For those of you who

241
00:12:42,466 --> 00:12:44,986
instead of conducting Search

242
00:12:44,986 --> 00:12:47,976
about indexing content, and

243
00:12:49,836 --> 00:12:52,976
CoreSpotlight is an API

244
00:12:53,396 --> 00:12:55,616
It's on device and

245
00:12:55,616 --> 00:12:58,016
So you can index the

246
00:12:59,166 --> 00:13:01,546
Your app is in charge and

247
00:12:59,166 --> 00:13:01,546
Your app is in charge and

248
00:13:01,546 --> 00:13:02,296
to add to the index.

249
00:13:03,336 --> 00:13:07,466
You can index all that your app

250
00:13:07,466 --> 00:13:12,126
and bookmarks, messages and

251
00:13:12,206 --> 00:13:15,286
music, videos, game

252
00:13:15,286 --> 00:13:17,516
in your app, and much more.

253
00:13:17,866 --> 00:13:21,136
So there are two

254
00:13:22,606 --> 00:13:25,096
First you need to add

255
00:13:26,486 --> 00:13:29,696
To do this you create a

256
00:13:30,386 --> 00:13:36,996
This contains the metadata and

257
00:13:37,886 --> 00:13:42,126
Then you set at least

258
00:13:42,126 --> 00:13:43,536
In this case we're

259
00:13:46,476 --> 00:13:49,486
You create a searchable

260
00:13:50,536 --> 00:13:54,596
You use the uniqueIdentifier,

261
00:13:55,396 --> 00:13:58,276
to identify this item

262
00:13:58,506 --> 00:14:00,926
and which is also used when we

263
00:13:58,506 --> 00:14:00,926
and which is also used when we

264
00:14:02,186 --> 00:14:06,936
And the domainIdentifier,

265
00:14:06,936 --> 00:14:09,236
and shared property

266
00:14:09,616 --> 00:14:10,946
which can later use

267
00:14:11,636 --> 00:14:15,546
And then you ask CoreSpotlight

268
00:14:16,616 --> 00:14:18,786
When your callback is called,

269
00:14:19,546 --> 00:14:21,536
the item is then safely

270
00:14:22,546 --> 00:14:25,606
or an error will be passed

271
00:14:27,886 --> 00:14:31,336
For deleting content

272
00:14:32,106 --> 00:14:34,896
You can delete a specific

273
00:14:35,146 --> 00:14:37,576
For example, if the

274
00:14:41,436 --> 00:14:45,306
You can also delete groups of

275
00:14:45,306 --> 00:14:46,126
that I mentioned earlier.

276
00:14:46,706 --> 00:14:49,276
This is great if the user

277
00:14:49,666 --> 00:14:53,946
ends a subscription, or

278
00:14:54,146 --> 00:14:57,886
Finally, you can delete all

279
00:14:58,326 --> 00:15:00,426
This is useful if

280
00:14:58,326 --> 00:15:00,426
This is useful if

281
00:15:00,426 --> 00:15:02,956
like an incompatible

282
00:15:02,956 --> 00:15:04,906
to clear the index and

283
00:15:05,856 --> 00:15:08,146
And this is also

284
00:15:08,146 --> 00:15:09,476
if your app gets uninstalled.

285
00:15:13,816 --> 00:15:15,696
Now let's go over

286
00:15:15,816 --> 00:15:17,336
and some more advanced

287
00:15:17,966 --> 00:15:20,086
We'll cover registering

288
00:15:20,696 --> 00:15:24,166
using CoreSpotlight client state

289
00:15:25,406 --> 00:15:26,726
some performance considerations

290
00:15:27,466 --> 00:15:29,606
and creating a CoreSpotlight

291
00:15:32,706 --> 00:15:34,326
You want to register

292
00:15:34,566 --> 00:15:36,626
because this lets

293
00:15:37,126 --> 00:15:39,326
when your app is first

294
00:15:39,806 --> 00:15:41,056
perhaps after restoring

295
00:15:41,956 --> 00:15:44,456
when the user installs

296
00:15:44,456 --> 00:15:45,346
for disaster recovery.

297
00:15:46,686 --> 00:15:49,406
It also lets Spotlight

298
00:15:49,406 --> 00:15:50,966
that you reindex

299
00:15:51,666 --> 00:15:55,176
This is commonly because

300
00:15:55,176 --> 00:15:58,296
and Spotlight wants to check

301
00:16:00,706 --> 00:16:02,816
So to be an index

302
00:16:02,816 --> 00:16:04,706
to implement the

303
00:16:04,706 --> 00:16:05,566
protocol.

304
00:16:06,286 --> 00:16:07,516
This has two required methods.

305
00:16:08,996 --> 00:16:12,236
ReindexAllSearchableItems,

306
00:16:12,236 --> 00:16:14,806
to add everything to the index.

307
00:16:14,976 --> 00:16:17,366
If you track indexing

308
00:16:17,366 --> 00:16:20,366
in your own database, you want

309
00:16:21,296 --> 00:16:22,406
when this call is received,

310
00:16:22,996 --> 00:16:24,396
unless you're using

311
00:16:24,396 --> 00:16:25,446
as we'll discuss in a moment.

312
00:16:27,216 --> 00:16:30,856
The second call is reindex

313
00:16:31,416 --> 00:16:34,696
When this is called,

314
00:16:34,746 --> 00:16:38,486
that Spotlight is requesting

315
00:16:38,486 --> 00:16:39,786
or delete them as appropriate.

316
00:16:40,606 --> 00:16:44,736
For both methods you call the

317
00:16:44,736 --> 00:16:47,606
when you're completely done

318
00:16:47,606 --> 00:16:49,206
for any work you

319
00:16:49,846 --> 00:16:54,446
This ensures that we know that

320
00:16:54,636 --> 00:16:56,236
and that we don't have to

321
00:16:57,226 --> 00:16:59,436
If you don't call this,

322
00:16:59,766 --> 00:17:02,556
and if you call it early,

323
00:16:59,766 --> 00:17:02,556
and if you call it early,

324
00:17:03,406 --> 00:17:05,056
you might not get a

325
00:17:06,746 --> 00:17:10,296
For some applications we found

326
00:17:10,296 --> 00:17:14,526
to use client state than to try

327
00:17:14,626 --> 00:17:15,945
with your own database

328
00:17:18,896 --> 00:17:22,915
The client state provides

329
00:17:22,915 --> 00:17:25,776
of keeping your content

330
00:17:27,136 --> 00:17:30,756
Because it's asynchronous you

331
00:17:30,756 --> 00:17:35,896
consistency model, but you

332
00:17:35,896 --> 00:17:39,086
with your own database

333
00:17:39,776 --> 00:17:43,336
The client state is an

334
00:17:43,336 --> 00:17:46,146
in the Spotlight index that

335
00:17:46,146 --> 00:17:48,246
and then fetch back when

336
00:17:49,636 --> 00:17:53,686
Typically, the easiest way to

337
00:17:53,686 --> 00:17:56,646
in your own database, for

338
00:17:57,986 --> 00:18:00,616
that you then as a client

339
00:17:57,986 --> 00:18:00,616
that you then as a client

340
00:18:01,386 --> 00:18:04,296
After relaunch you would

341
00:18:04,876 --> 00:18:06,716
and if it doesn't match

342
00:18:07,046 --> 00:18:08,756
you would index any

343
00:18:09,456 --> 00:18:10,686
with a sequence number higher

344
00:18:10,686 --> 00:18:12,086
than the one you fetched

345
00:18:13,586 --> 00:18:17,466
Another approach is to use

346
00:18:18,296 --> 00:18:20,456
of knowing where to start

347
00:18:21,086 --> 00:18:24,916
This can be really, really

348
00:18:24,916 --> 00:18:28,476
up to date, asynchronously,

349
00:18:28,606 --> 00:18:29,936
that you don't use

350
00:18:33,376 --> 00:18:35,376
So to work with client

351
00:18:35,376 --> 00:18:36,976
to create a named

352
00:18:37,676 --> 00:18:40,936
The name lets us know what

353
00:18:41,716 --> 00:18:43,836
You can only get the client

354
00:18:43,946 --> 00:18:46,746
but you may have more than one

355
00:18:47,546 --> 00:18:49,106
and then you would

356
00:18:49,226 --> 00:18:50,436
for each of those databases.

357
00:18:51,606 --> 00:18:53,906
With the index you

358
00:18:54,976 --> 00:18:56,436
You'd add searchable

359
00:18:57,606 --> 00:19:00,826
The completionHandler is not

360
00:18:57,606 --> 00:19:00,826
The completionHandler is not

361
00:19:00,976 --> 00:19:04,036
because you'll get a completion

362
00:19:04,916 --> 00:19:11,416
You compute your picked state

363
00:19:13,056 --> 00:19:14,716
when you finish the batch.

364
00:19:16,176 --> 00:19:19,086
And here you do need

365
00:19:19,706 --> 00:19:20,956
to the completionHandler.

366
00:19:23,356 --> 00:19:25,936
When your app next launches,

367
00:19:26,356 --> 00:19:30,226
and you figure out what

368
00:19:30,226 --> 00:19:32,826
to bring Spotlight in

369
00:19:34,286 --> 00:19:36,106
Because the client state

370
00:19:36,206 --> 00:19:38,676
into the index, it

371
00:19:39,236 --> 00:19:41,336
You can replay exactly

372
00:19:42,096 --> 00:19:43,476
to bring them both into sync.

373
00:19:44,626 --> 00:19:45,776
So when your app next starts,

374
00:19:46,116 --> 00:19:48,026
you create an index

375
00:19:49,116 --> 00:19:50,156
you fetch the client state.

376
00:19:50,796 --> 00:19:52,186
And this is an asynchronous

377
00:19:52,186 --> 00:19:55,776
So in the callback you

378
00:19:57,146 --> 00:19:59,906
and check whether the state you

379
00:20:00,656 --> 00:20:03,836
If not, you call the method

380
00:20:04,536 --> 00:20:06,986
Now let's talk about some

381
00:20:07,566 --> 00:20:11,316
Spotlight is really, really fast

382
00:20:11,316 --> 00:20:15,316
on your side to make sure

383
00:20:16,256 --> 00:20:18,866
You want to optimize any

384
00:20:20,016 --> 00:20:23,296
and pay careful attention

385
00:20:24,716 --> 00:20:26,996
Do notice that each call to

386
00:20:27,996 --> 00:20:31,676
so pass batches of items instead

387
00:20:32,896 --> 00:20:35,266
And just making batches as small

388
00:20:35,266 --> 00:20:38,316
as ten items will still

389
00:20:38,476 --> 00:20:39,346
by an order of magnitude.

390
00:20:41,676 --> 00:20:44,596
Since your app will be

391
00:20:44,666 --> 00:20:46,976
user is using it, make sure that

392
00:20:49,276 --> 00:20:51,846
And finally, to avoid

393
00:20:52,006 --> 00:20:53,826
on a background thread.

394
00:20:55,476 --> 00:20:55,996
All right.

395
00:20:55,996 --> 00:20:57,966
Let us talk about

396
00:20:58,776 --> 00:21:01,406
The extension can index

397
00:20:58,776 --> 00:21:01,406
The extension can index

398
00:21:03,156 --> 00:21:09,496
This lets you catch up after

399
00:21:09,946 --> 00:21:12,106
or when your icons expire.

400
00:21:12,286 --> 00:21:15,266
Spotlight can reach out to your

401
00:21:15,266 --> 00:21:17,756
out to your application,

402
00:21:17,756 --> 00:21:19,366
because your application

403
00:21:21,016 --> 00:21:23,146
The interface to the

404
00:21:23,146 --> 00:21:24,246
as for the index delegate.

405
00:21:25,056 --> 00:21:26,206
So if you can factor your code

406
00:21:26,476 --> 00:21:31,466
so that the index delegate

407
00:21:31,916 --> 00:21:33,336
to implement the

408
00:21:35,376 --> 00:21:36,816
To make content available

409
00:21:36,816 --> 00:21:39,226
to your extension you

410
00:21:39,796 --> 00:21:41,346
To find out more about this,

411
00:21:41,586 --> 00:21:42,846
take a look at last

412
00:21:43,246 --> 00:21:44,816
on App Extension Best Practices.

413
00:21:45,946 --> 00:21:48,296
Next let's look at

414
00:21:48,736 --> 00:21:50,916
As I mentioned, you can

415
00:21:51,476 --> 00:21:54,856
to keep stale content from

416
00:21:55,146 --> 00:21:59,346
CoreSpotlight will call your

417
00:22:00,196 --> 00:22:01,886
and you can update

418
00:22:01,886 --> 00:22:03,966
or update the data for

419
00:22:05,436 --> 00:22:07,316
If you need to get new

420
00:22:08,526 --> 00:22:09,816
you can use background fetch.

421
00:22:10,516 --> 00:22:12,956
This will allow your app to

422
00:22:14,116 --> 00:22:17,706
letting you take care of adding

423
00:22:18,966 --> 00:22:24,006
Finally, if you have more of

424
00:22:24,266 --> 00:22:28,196
or infrequent updates, you can

425
00:22:29,496 --> 00:22:32,536
to let your server tell you

426
00:22:34,046 --> 00:22:35,746
To find out more about

427
00:22:35,746 --> 00:22:39,346
and silent remote notification

428
00:22:39,346 --> 00:22:43,086
with Multitasking

429
00:22:43,686 --> 00:22:46,726
That's it for indexing

430
00:22:47,596 --> 00:22:50,246
Next let's talk about app

431
00:22:52,546 --> 00:22:55,936
NSUserActivity was introduced

432
00:22:56,746 --> 00:22:58,506
It lets you create

433
00:22:58,506 --> 00:23:01,346
of your application's current

434
00:22:58,506 --> 00:23:01,346
of your application's current

435
00:23:01,346 --> 00:23:04,046
to another device,

436
00:23:04,046 --> 00:23:05,706
in the Spotlight

437
00:23:06,056 --> 00:23:13,156
You submit the activities as

438
00:23:13,776 --> 00:23:15,866
for content that the

439
00:23:15,866 --> 00:23:18,986
and want to get back to.

440
00:23:19,336 --> 00:23:20,956
So the question you

441
00:23:21,056 --> 00:23:25,346
about when the user activity

442
00:23:25,346 --> 00:23:26,756
the user want to

443
00:23:27,556 --> 00:23:29,906
If the same item might be

444
00:23:30,646 --> 00:23:32,286
then the answer is

445
00:23:33,906 --> 00:23:38,426
The 2014 session on Adopting

446
00:23:38,426 --> 00:23:40,516
on how to use NSUserActivity.

447
00:23:42,446 --> 00:23:45,476
To make NSUserActivity available

448
00:23:45,476 --> 00:23:47,026
as searchable and add index

449
00:23:47,026 --> 00:23:49,676
of the metadata using

450
00:23:52,096 --> 00:23:53,426
You mark it as searchable

451
00:23:54,036 --> 00:23:56,216
by setting the eligibleForSearch

452
00:23:56,876 --> 00:24:02,216
You can also mark NSUserActivity

453
00:23:56,876 --> 00:24:02,216
You can also mark NSUserActivity

454
00:24:02,316 --> 00:24:04,136
to make it a candidate

455
00:24:04,476 --> 00:24:06,036
as Vipul will get

456
00:24:07,286 --> 00:24:09,906
This done, it will show up as

457
00:24:10,056 --> 00:24:12,816
and your application can

458
00:24:13,336 --> 00:24:14,766
when the user selects

459
00:24:22,326 --> 00:24:25,006
Your users just have to

460
00:24:26,776 --> 00:24:28,926
from what they saw to be

461
00:24:28,926 --> 00:24:30,256
to the content in

462
00:24:33,676 --> 00:24:34,246
All right.

463
00:24:35,286 --> 00:24:38,716
So, as I said, you can use

464
00:24:38,976 --> 00:24:40,196
for the very same content.

465
00:24:42,656 --> 00:24:43,576
The difference is

466
00:24:43,576 --> 00:24:46,806
that NSUserActivity reflects

467
00:24:46,806 --> 00:24:47,646
in your application.

468
00:24:48,296 --> 00:24:50,856
CoreSpotlight is about

469
00:24:50,856 --> 00:24:55,196
So if you use both, you

470
00:24:55,556 --> 00:24:59,066
to the CSSearchableItem for the

471
00:24:59,216 --> 00:25:00,936
and avoid duplication

472
00:24:59,216 --> 00:25:00,936
and avoid duplication

473
00:25:02,136 --> 00:25:05,096
This is done by setting the

474
00:25:05,096 --> 00:25:08,876
in the AttributeSet to

475
00:25:08,876 --> 00:25:12,646
of the CSSearchableItem that

476
00:25:12,926 --> 00:25:15,476
This also ties the lifetime

477
00:25:16,186 --> 00:25:18,526
to the CSSearchableItem,

478
00:25:18,526 --> 00:25:20,526
against leaving data

479
00:25:20,916 --> 00:25:23,436
after the user has

480
00:25:25,816 --> 00:25:30,616
However, not all data is

481
00:25:31,726 --> 00:25:34,166
For example, for the recipe

482
00:25:34,166 --> 00:25:37,076
about earlier, you may want

483
00:25:38,136 --> 00:25:43,456
to a possible CSSearchableItem,

484
00:25:43,506 --> 00:25:45,816
something that the user might

485
00:25:46,736 --> 00:25:49,986
If you were to use the

486
00:25:49,986 --> 00:25:53,506
CoreSpotlight would immediately

487
00:25:53,866 --> 00:25:57,496
as you try to add it because the

488
00:25:58,356 --> 00:26:01,036
To solve this, we're

489
00:25:58,356 --> 00:26:01,036
To solve this, we're

490
00:26:01,436 --> 00:26:04,276
weakRelatedUniqueIdentifier

491
00:26:04,926 --> 00:26:05,906
to the CSSearchableItem.

492
00:26:06,996 --> 00:26:11,206
It can exist before the

493
00:26:11,206 --> 00:26:12,746
when the CSSearchableItem

494
00:26:13,666 --> 00:26:16,296
As for the

495
00:26:16,666 --> 00:26:19,126
you simply have to set the

496
00:26:19,366 --> 00:26:20,416
for the NSUserActivity.

497
00:26:23,276 --> 00:26:28,316
Now, the downside is that when

498
00:26:29,226 --> 00:26:31,026
the NSUserActivity remains.

499
00:26:31,856 --> 00:26:34,216
So if you have concerns

500
00:26:34,216 --> 00:26:37,116
of the searchable item

501
00:26:37,506 --> 00:26:41,376
you do need to delete

502
00:26:42,276 --> 00:26:46,166
Fortunately, in iOS 10

503
00:26:47,726 --> 00:26:50,196
We're adding domainIdentifiers

504
00:26:51,666 --> 00:26:54,196
It's part of the

505
00:26:54,926 --> 00:26:58,106
and it allows you to

506
00:26:58,426 --> 00:26:59,676
by the domainIdentifier,

507
00:27:00,126 --> 00:27:02,626
just like you can

508
00:27:03,376 --> 00:27:05,046
If you use both

509
00:27:05,126 --> 00:27:07,276
and NSUserActivities,

510
00:27:07,326 --> 00:27:09,316
to use the same

511
00:27:10,136 --> 00:27:14,666
So that's indexing with

512
00:27:15,356 --> 00:27:18,636
Next let's talk about

513
00:27:19,746 --> 00:27:23,336
The content driving your

514
00:27:23,896 --> 00:27:26,206
not locally inside the app.

515
00:27:26,376 --> 00:27:28,696
If this content is public,

516
00:27:28,786 --> 00:27:29,556
to make a searchable

517
00:27:29,556 --> 00:27:31,746
for Spotlight via the

518
00:27:32,706 --> 00:27:35,476
This is perfect for content

519
00:27:35,476 --> 00:27:37,956
and available in your

520
00:27:37,956 --> 00:27:40,746
when your content is too

521
00:27:41,806 --> 00:27:43,576
Because your content has

522
00:27:44,356 --> 00:27:49,916
results can be displayed to

523
00:27:50,756 --> 00:27:53,626
which lets you reach new

524
00:27:54,876 --> 00:27:58,316
Finally, these results can

525
00:27:58,316 --> 00:28:00,586
and Safari, which makes

526
00:27:58,316 --> 00:28:00,586
and Safari, which makes

527
00:28:00,586 --> 00:28:04,456
to even more users.

528
00:28:04,566 --> 00:28:07,306
So to implement indexing

529
00:28:07,306 --> 00:28:09,936
with Universal Links you

530
00:28:10,906 --> 00:28:13,016
Allow Applebot to call your

531
00:28:13,016 --> 00:28:16,706
and let Apple Note

532
00:28:17,026 --> 00:28:18,726
Specify the call URL

533
00:28:18,796 --> 00:28:22,826
when submitting the

534
00:28:23,006 --> 00:28:25,896
For deep links we strongly

535
00:28:26,316 --> 00:28:28,676
For this you need to

536
00:28:28,736 --> 00:28:31,476
for the website and the app.

537
00:28:31,476 --> 00:28:33,326
Implement the

538
00:28:33,326 --> 00:28:36,166
in your app delegate to ensure

539
00:28:36,166 --> 00:28:38,476
when the user selects

540
00:28:39,636 --> 00:28:42,206
Markup your content with

541
00:28:42,556 --> 00:28:44,866
to provide a rich display for

542
00:28:46,086 --> 00:28:48,396
And use the Search

543
00:28:49,676 --> 00:28:52,756
to test deep links, markup,

544
00:28:55,116 --> 00:28:58,516
Take a look at the Introducing

545
00:28:59,026 --> 00:29:04,476
and the Developer documentation

546
00:28:59,026 --> 00:29:04,476
and the Developer documentation

547
00:29:04,706 --> 00:29:07,866
So these are the schemas

548
00:29:07,926 --> 00:29:09,606
and we plan some

549
00:29:11,296 --> 00:29:13,516
Pay attention to interaction

550
00:29:13,956 --> 00:29:18,856
These are very useful for

551
00:29:18,856 --> 00:29:24,076
Apple provides a test tool at

552
00:29:24,496 --> 00:29:25,966
that you should consult

553
00:29:25,966 --> 00:29:28,986
if you implement the

554
00:29:29,946 --> 00:29:32,686
It now displays a visual

555
00:29:32,986 --> 00:29:35,846
including supported

556
00:29:36,776 --> 00:29:39,576
The information from the

557
00:29:39,576 --> 00:29:40,976
visualize pieces of information

558
00:29:40,976 --> 00:29:43,486
that the Applebot web

559
00:29:43,486 --> 00:29:45,956
including the title,

560
00:29:45,956 --> 00:29:50,816
Now you've seen how to index

561
00:29:50,816 --> 00:29:52,586
and there's a good

562
00:29:52,586 --> 00:29:56,736
to use them all together

563
00:30:01,056 --> 00:30:02,726
So the most important

564
00:30:02,726 --> 00:30:04,346
when using multiple APIs is

565
00:30:04,376 --> 00:30:07,236
to link items representing

566
00:30:07,236 --> 00:30:08,156
across the APIs.

567
00:30:09,166 --> 00:30:12,046
By setting NSUserActivity's

568
00:30:12,266 --> 00:30:14,396
to CoreSpotlight's

569
00:30:15,056 --> 00:30:19,946
CoreSpotlight's content URL, and

570
00:30:21,056 --> 00:30:24,426
to the URL of the webpage, you

571
00:30:24,476 --> 00:30:26,296
in the index represent

572
00:30:27,516 --> 00:30:29,236
which allows search

573
00:30:30,336 --> 00:30:35,446
It also provides strength

574
00:30:35,626 --> 00:30:36,636
All right.

575
00:30:36,636 --> 00:30:39,016
Now we've covered three ways of

576
00:30:40,306 --> 00:30:45,246
CoreSpotlight for content,

577
00:30:45,696 --> 00:30:47,776
and Universal Links

578
00:30:48,166 --> 00:30:52,876
for public content

579
00:30:53,066 --> 00:30:54,606
Next let's talk about how

580
00:30:54,606 --> 00:30:56,336
to present this information

581
00:30:59,596 --> 00:31:02,196
To get a great presentation

582
00:30:59,596 --> 00:31:02,196
To get a great presentation

583
00:31:02,196 --> 00:31:03,196
to set a good thumbnail.

584
00:31:03,946 --> 00:31:06,206
By default Spotlight

585
00:31:07,246 --> 00:31:09,526
which makes it hard to

586
00:31:10,696 --> 00:31:12,266
This doesn't matter much

587
00:31:12,266 --> 00:31:15,396
to get a single result,

588
00:31:15,686 --> 00:31:16,606
it makes a big difference.

589
00:31:18,156 --> 00:31:19,626
Just as important

590
00:31:19,696 --> 00:31:21,256
and perhaps more, is the title.

591
00:31:21,656 --> 00:31:23,776
A good title is not

592
00:31:24,036 --> 00:31:26,126
it's also what users most

593
00:31:26,866 --> 00:31:31,276
After the thumbnail and

594
00:31:31,276 --> 00:31:33,666
to set other fields that are

595
00:31:34,026 --> 00:31:37,356
A description is great when

596
00:31:37,476 --> 00:31:40,216
rating description, date

597
00:31:40,306 --> 00:31:43,666
that are time bound, such as

598
00:31:43,696 --> 00:31:47,716
reminders, events, and so forth.

599
00:31:48,866 --> 00:31:53,736
For documents, general

600
00:31:53,736 --> 00:31:55,556
and page count, are

601
00:31:57,156 --> 00:31:59,786
If you set the right content

602
00:32:00,076 --> 00:32:02,936
Spotlight can also do a

603
00:32:03,316 --> 00:32:04,446
Let's look at some examples.

604
00:32:05,916 --> 00:32:10,866
The Hotel Tonight app makes

605
00:32:11,196 --> 00:32:14,326
showing an easily identifiable

606
00:32:14,486 --> 00:32:15,656
and informative description.

607
00:32:20,076 --> 00:32:24,566
You can get the same with web

608
00:32:24,736 --> 00:32:28,926
og:title and og:description.

609
00:32:29,336 --> 00:32:32,496
Open Table uses the title

610
00:32:32,596 --> 00:32:33,926
with rating description

611
00:32:34,216 --> 00:32:36,486
to let the user get

612
00:32:36,936 --> 00:32:40,086
to choose the right result

613
00:32:41,016 --> 00:32:43,326
In making the same attributes

614
00:32:44,016 --> 00:32:47,166
you ensure that the user will

615
00:32:47,806 --> 00:32:49,766
whether they're getting the

616
00:32:49,976 --> 00:32:51,976
or from the local device index.

617
00:32:58,046 --> 00:33:01,106
A great user experience is not

618
00:32:58,046 --> 00:33:01,106
A great user experience is not

619
00:33:01,366 --> 00:33:04,086
but also about what data you

620
00:33:05,126 --> 00:33:07,226
Setting attributes that

621
00:33:08,166 --> 00:33:11,126
and remember makes your

622
00:33:12,816 --> 00:33:17,406
Conversely, setting misleading

623
00:33:17,406 --> 00:33:19,136
or stuffing content and keywords

624
00:33:19,206 --> 00:33:21,326
with dictionary words will

625
00:33:21,326 --> 00:33:23,666
up frequently, but

626
00:33:23,876 --> 00:33:24,866
which will annoy the user

627
00:33:25,326 --> 00:33:27,516
and have a strong negative

628
00:33:29,776 --> 00:33:33,996
Another aspect of a great user

629
00:33:34,076 --> 00:33:36,026
to the salient part

630
00:33:36,256 --> 00:33:37,646
in as few steps as possible.

631
00:33:38,496 --> 00:33:42,906
Enabling quick actions,

632
00:33:42,906 --> 00:33:45,456
has significant value

633
00:33:46,466 --> 00:33:50,466
Finally, when a user

634
00:33:50,746 --> 00:33:54,086
you want to launch directly

635
00:33:54,236 --> 00:33:55,666
and without interstitials

636
00:33:56,206 --> 00:33:57,926
or multistep builds

637
00:33:58,726 --> 00:33:59,976
Let's look at some examples.

638
00:34:02,396 --> 00:34:05,256
Redfin's app provides

639
00:34:05,606 --> 00:34:07,916
and by setting the latitude

640
00:34:08,016 --> 00:34:11,446
and enabling navigation, the app

641
00:34:11,446 --> 00:34:13,646
to Maps to go look

642
00:34:13,896 --> 00:34:18,406
Similarly, here is a great

643
00:34:19,556 --> 00:34:22,545
You can get the same by setting

644
00:34:22,735 --> 00:34:25,636
and support phone call

645
00:34:26,366 --> 00:34:29,876
On seeing the result, a user

646
00:34:29,876 --> 00:34:31,556
with the location

647
00:34:31,716 --> 00:34:33,295
and reserve a table.

648
00:34:34,346 --> 00:34:37,226
For web markup you can

649
00:34:37,926 --> 00:34:41,025
by using the postal address

650
00:34:42,226 --> 00:34:45,036
Next let's talk about

651
00:34:49,045 --> 00:34:52,466
For both CoreSpotlight and app

652
00:34:52,466 --> 00:34:53,356
to restore the state.

653
00:34:54,726 --> 00:34:56,216
Your app delegate

654
00:34:56,216 --> 00:34:57,446
with continueUserActivity.

655
00:34:58,006 --> 00:35:00,126
You examine the NSUserActivity's

656
00:34:58,006 --> 00:35:00,126
You examine the NSUserActivity's

657
00:35:00,266 --> 00:35:02,486
and the user info

658
00:35:03,456 --> 00:35:05,376
If you're being launched

659
00:35:05,376 --> 00:35:06,766
CSSearchableItem in Spotlight,

660
00:35:07,296 --> 00:35:10,136
the activity type will be

661
00:35:10,676 --> 00:35:13,926
and you retrieve the identifier

662
00:35:14,256 --> 00:35:16,516
by using CSSearchable

663
00:35:17,326 --> 00:35:21,106
The 2014 session Introducing

664
00:35:21,106 --> 00:35:22,996
on how to launch

665
00:35:22,996 --> 00:35:23,676
and activity type.

666
00:35:24,806 --> 00:35:28,426
For Universal Links, once

667
00:35:29,216 --> 00:35:30,936
So your app delegate

668
00:35:31,026 --> 00:35:32,176
with continueUserActivity.

669
00:35:33,086 --> 00:35:36,416
As usual, you examine the

670
00:35:36,916 --> 00:35:40,306
which will be

671
00:35:41,596 --> 00:35:44,106
You parse the URL

672
00:35:44,446 --> 00:35:46,486
to the part indicated

673
00:35:47,486 --> 00:35:48,116
That's launching.

674
00:35:49,216 --> 00:35:50,996
Now let's look at a new feature.

675
00:35:53,876 --> 00:35:58,996
In iOS 10 we've added a

676
00:35:58,996 --> 00:36:03,426
to continue search

677
00:35:58,996 --> 00:36:03,426
to continue search

678
00:36:03,676 --> 00:36:05,576
Conduct human results

679
00:36:06,466 --> 00:36:09,766
to display will show an

680
00:36:09,766 --> 00:36:11,626
for Spotlight Search

681
00:36:11,626 --> 00:36:14,216
so the user can go

682
00:36:14,216 --> 00:36:16,636
If you already support

683
00:36:18,376 --> 00:36:21,496
It lets you leverage your

684
00:36:22,126 --> 00:36:25,596
and has been widely adopted

685
00:36:26,176 --> 00:36:29,116
It's another great way of

686
00:36:29,376 --> 00:36:30,356
with your application.

687
00:36:30,616 --> 00:36:33,246
The user is taken

688
00:36:33,746 --> 00:36:36,386
into the search experience

689
00:36:46,336 --> 00:36:46,626
Now

690
00:36:47,516 --> 00:36:51,946
[ Applause ]

691
00:36:52,446 --> 00:36:52,816
Thank you.

692
00:36:54,416 --> 00:36:57,496
To support this in your

693
00:36:57,496 --> 00:37:01,846
to add a key to your

694
00:36:57,496 --> 00:37:01,846
to add a key to your

695
00:37:01,846 --> 00:37:02,756
that you support the feature.

696
00:37:06,796 --> 00:37:09,056
Your app delegate will get

697
00:37:09,796 --> 00:37:11,706
CSQueryContinuationActionType,

698
00:37:12,346 --> 00:37:15,816
and the new query string will

699
00:37:15,886 --> 00:37:17,446
and a CSSearchQueryString key.

700
00:37:17,506 --> 00:37:20,716
At this point you can

701
00:37:21,076 --> 00:37:22,226
with the same query string,

702
00:37:22,686 --> 00:37:24,386
letting the user continue

703
00:37:25,416 --> 00:37:28,196
To avoid confusion, it's

704
00:37:28,196 --> 00:37:30,426
that your search results

705
00:37:30,426 --> 00:37:31,056
with Spotlight.

706
00:37:31,666 --> 00:37:34,716
Since Spotlight is based on

707
00:37:34,716 --> 00:37:35,946
that you use similar

708
00:37:36,246 --> 00:37:40,066
And if you can't support prefix

709
00:37:40,326 --> 00:37:44,736
to a completion interface.

710
00:37:44,736 --> 00:37:47,106
Another way of ensuring

711
00:37:47,106 --> 00:37:48,696
to use CoreSpotlight's

712
00:37:49,526 --> 00:37:55,496
which is the approach taken by

713
00:37:57,236 --> 00:38:00,146
CoreSpotlight Search API

714
00:37:57,236 --> 00:38:00,146
CoreSpotlight Search API

715
00:38:00,146 --> 00:38:03,776
to implement search

716
00:38:03,776 --> 00:38:06,496
It uses the data that you

717
00:38:06,496 --> 00:38:07,316
for Spotlight Search.

718
00:38:09,116 --> 00:38:14,846
It writes consistency

719
00:38:14,896 --> 00:38:17,026
and is already used by many

720
00:38:17,026 --> 00:38:18,706
including Mail, Messages

721
00:38:19,506 --> 00:38:22,436
It avoids overhead

722
00:38:22,436 --> 00:38:24,176
to maintain an additional

723
00:38:24,876 --> 00:38:28,686
as it's the same index

724
00:38:29,236 --> 00:38:32,026
The index provides full

725
00:38:33,556 --> 00:38:35,686
If all your content

726
00:38:35,746 --> 00:38:38,106
CoreSpotlight can be a

727
00:38:38,906 --> 00:38:42,366
If you have a mixture of

728
00:38:42,736 --> 00:38:44,496
you can combine queries

729
00:38:45,016 --> 00:38:47,406
getting responsiveness from

730
00:38:47,406 --> 00:38:50,036
and completeness from

731
00:38:50,896 --> 00:38:53,626
Mail uses CoreSpotlight

732
00:38:54,396 --> 00:38:56,026
but also to create

733
00:38:56,246 --> 00:38:57,596
and to make complex queries.

734
00:38:58,366 --> 00:39:00,356
This is a great way to

735
00:38:58,366 --> 00:39:00,356
This is a great way to

736
00:39:00,356 --> 00:39:02,606
of CoreSpotlight Search

737
00:39:02,606 --> 00:39:03,276
interface simple.

738
00:39:05,576 --> 00:39:08,626
A CoreSpotlight Search

739
00:39:08,626 --> 00:39:11,646
that you've given Spotlight,

740
00:39:12,036 --> 00:39:13,036
from other applications.

741
00:39:13,816 --> 00:39:15,526
The query engine is

742
00:39:15,866 --> 00:39:18,346
so you get excellent

743
00:39:18,646 --> 00:39:21,096
The query syntax allows

744
00:39:21,506 --> 00:39:23,936
as well as range searches,

745
00:39:24,076 --> 00:39:26,206
and a set of powerful

746
00:39:26,686 --> 00:39:28,076
For those of you

747
00:39:28,076 --> 00:39:29,936
with the metadata

748
00:39:30,346 --> 00:39:31,856
this syntax will

749
00:39:33,786 --> 00:39:36,386
Here's an overview of the most

750
00:39:36,386 --> 00:39:39,486
As you can see, CoreSpotlight

751
00:39:39,486 --> 00:39:40,996
of search comparators, as well

752
00:39:40,996 --> 00:39:44,306
as the Boolean operators

753
00:39:46,496 --> 00:39:50,336
In addition, CoreSpotlight lets

754
00:39:50,436 --> 00:39:51,176
to suit your needs.

755
00:39:51,866 --> 00:39:55,086
If you want case insensitive

756
00:39:56,056 --> 00:39:59,676
If you want to ignore

757
00:40:00,426 --> 00:40:02,086
if they are not important

758
00:40:02,086 --> 00:40:04,156
in the current language,

759
00:40:04,886 --> 00:40:08,476
And if you want to match on

760
00:40:08,476 --> 00:40:10,706
of anchoring your searches at

761
00:40:10,906 --> 00:40:12,256
you specify the w flag.

762
00:40:13,106 --> 00:40:15,646
This, by the way, is

763
00:40:16,146 --> 00:40:19,026
And if you want multiple words

764
00:40:20,606 --> 00:40:24,266
then you pass the t flag and the

765
00:40:25,336 --> 00:40:26,706
So let's look at an example.

766
00:40:27,946 --> 00:40:29,266
We're implementing

767
00:40:29,866 --> 00:40:31,436
that takes the user

768
00:40:32,286 --> 00:40:34,356
We make sure to cancel any

769
00:40:34,506 --> 00:40:37,416
so that we don't have multiple

770
00:40:37,576 --> 00:40:38,986
as this will slow

771
00:40:40,536 --> 00:40:44,226
Because we're dealing with

772
00:40:44,226 --> 00:40:45,426
to escape the query string.

773
00:40:47,616 --> 00:40:50,806
We use the double star syntax to

774
00:40:51,286 --> 00:40:52,676
on either content or metadata.

775
00:40:53,686 --> 00:40:55,626
The escape user input is

776
00:40:56,456 --> 00:40:59,236
and we had the cdw

777
00:40:59,346 --> 00:41:01,986
which creates a case

778
00:40:59,346 --> 00:41:01,986
which creates a case

779
00:41:01,986 --> 00:41:05,466
diacritics insensitive, word

780
00:41:06,766 --> 00:41:08,836
With a query string we

781
00:41:09,716 --> 00:41:12,256
We request the display

782
00:41:13,176 --> 00:41:15,766
and this will be available

783
00:41:15,766 --> 00:41:16,946
of the searchable

784
00:41:17,536 --> 00:41:22,526
We set the foundItemsHandler,

785
00:41:22,526 --> 00:41:25,456
of searchable items if there

786
00:41:25,836 --> 00:41:30,396
And a completionHandler

787
00:41:30,396 --> 00:41:33,306
either with an error or when the

788
00:41:36,256 --> 00:41:38,516
In our completionHandler

789
00:41:38,516 --> 00:41:40,556
to display finish any

790
00:41:42,306 --> 00:41:44,316
And all that remains

791
00:41:44,966 --> 00:41:47,376
CoreSpotlight will call

792
00:41:47,556 --> 00:41:48,796
and then call the

793
00:41:49,226 --> 00:41:52,226
So let's put this into practice.

794
00:41:53,046 --> 00:41:54,056
We've built an application.

795
00:41:55,136 --> 00:41:56,976
There is a simple

796
00:42:04,046 --> 00:42:05,576
It already supports

797
00:42:05,816 --> 00:42:07,186
and it already supports Search.

798
00:42:08,806 --> 00:42:11,726
So the first thing we're

799
00:42:13,156 --> 00:42:14,306
for Continue Search in App.

800
00:42:15,156 --> 00:42:16,276
This is very simple.

801
00:42:17,476 --> 00:42:18,706
We go to the app's info.plist

802
00:42:19,476 --> 00:42:21,976
and we enable

803
00:42:29,076 --> 00:42:31,286
That done, we go

804
00:42:32,736 --> 00:42:40,306
and in our user activity

805
00:42:40,566 --> 00:42:45,986
support for Continue

806
00:42:45,986 --> 00:42:50,296
As you can see, the

807
00:42:50,836 --> 00:42:54,766
CSQueryContinuationActionType

808
00:42:56,396 --> 00:42:59,436
by inspecting the user info

809
00:42:59,506 --> 00:43:02,666
We can then activate

810
00:42:59,506 --> 00:43:02,666
We can then activate

811
00:43:03,296 --> 00:43:06,106
with the search query.

812
00:43:06,206 --> 00:43:06,976
So let's see what

813
00:43:19,046 --> 00:43:19,326
All right.

814
00:43:19,516 --> 00:43:22,946
Here we have our picture

815
00:43:22,946 --> 00:43:31,276
down Spotlight and search for

816
00:43:31,276 --> 00:43:32,356
to be popular in this gallery.

817
00:43:34,386 --> 00:43:39,496
So we get two results and a

818
00:43:40,416 --> 00:43:43,216
So click search in app and

819
00:43:45,516 --> 00:43:51,206
[ Applause ]

820
00:43:51,706 --> 00:43:54,686
Now you might observe that I

821
00:43:54,686 --> 00:43:56,396
but only one result in my app,

822
00:43:56,966 --> 00:44:02,896
and this is because I'm not

823
00:43:56,966 --> 00:44:02,896
and this is because I'm not

824
00:44:03,276 --> 00:44:05,176
The search is a simple

825
00:44:06,186 --> 00:44:06,936
So let's fix that.

826
00:44:14,046 --> 00:44:20,426
In our view controller

827
00:44:23,446 --> 00:44:27,456
I'm going to remove the

828
00:44:27,786 --> 00:44:33,236
that we already had and start

829
00:44:33,236 --> 00:44:35,856
First we want to add a variable.

830
00:44:43,046 --> 00:44:45,876
A query object that will keep

831
00:44:47,956 --> 00:44:51,596
We want to cancel the

832
00:44:53,426 --> 00:45:02,766
escape the query

833
00:44:53,426 --> 00:45:02,766
escape the query

834
00:45:12,096 --> 00:45:18,126
create a query object and, of

835
00:45:18,846 --> 00:45:19,136
Oops.

836
00:45:22,716 --> 00:45:22,986
All right.

837
00:45:22,986 --> 00:45:26,626
So now we have a query string,

838
00:45:26,836 --> 00:45:27,946
to set the foundItemsHandler.

839
00:45:34,246 --> 00:45:42,366
The foundItemsHandler creates

840
00:45:42,456 --> 00:45:43,616
to our list of results.

841
00:45:44,326 --> 00:45:46,906
Now, since the query's

842
00:45:47,666 --> 00:45:52,386
I need to implement an adapter

843
00:45:52,386 --> 00:45:54,726
and creating something that

844
00:45:55,846 --> 00:46:01,226
So let's look at what

845
00:45:55,846 --> 00:46:01,226
So let's look at what

846
00:46:01,486 --> 00:46:03,706
So I have what I call

847
00:46:04,656 --> 00:46:07,546
What this does is

848
00:46:07,826 --> 00:46:11,506
that our query made

849
00:46:11,506 --> 00:46:12,586
that whenever possible.

850
00:46:13,676 --> 00:46:17,326
When that's not enough,

851
00:46:17,326 --> 00:46:21,946
and gets the picture

852
00:46:22,996 --> 00:46:25,806
stores that away for further

853
00:46:25,876 --> 00:46:27,836
and that lets it return

854
00:46:28,066 --> 00:46:31,606
that are not available

855
00:46:31,696 --> 00:46:34,966
By doing this lazily we ensure

856
00:46:35,186 --> 00:46:36,936
without having to go

857
00:46:37,796 --> 00:46:39,356
which is great for performance.

858
00:46:39,836 --> 00:46:42,476
Let's implement our

859
00:46:43,076 --> 00:46:46,876
In the completionHandler

860
00:46:48,166 --> 00:46:54,666
jump over to the main queue to

861
00:46:54,716 --> 00:46:56,746
and then we call our

862
00:46:58,276 --> 00:46:59,976
With that, all that remains

863
00:47:06,046 --> 00:47:06,976
And let's see what

864
00:47:20,386 --> 00:47:20,756
All right.

865
00:47:23,746 --> 00:47:26,046
Now since this is using

866
00:47:26,106 --> 00:47:29,756
and I've made the query very

867
00:47:29,756 --> 00:47:32,826
to type any word that I see

868
00:47:34,436 --> 00:47:36,206
and I find anything

869
00:47:36,206 --> 00:47:37,856
in the metadata or

870
00:47:38,496 --> 00:47:39,516
All right.

871
00:47:39,726 --> 00:47:41,646
That is how easy it is

872
00:47:41,846 --> 00:47:43,236
to implement search

873
00:47:44,266 --> 00:47:47,046
And with that, I'd like

874
00:47:47,106 --> 00:47:47,976
to talk about ranking.

875
00:47:48,516 --> 00:47:55,556
[ Applause ]

876
00:47:56,056 --> 00:47:56,556
&gt;&gt; Thanks, John.

877
00:47:56,556 --> 00:47:59,586
That was a fantastic

878
00:47:59,586 --> 00:48:02,816
As you are thinking about

879
00:47:59,586 --> 00:48:02,816
As you are thinking about

880
00:48:02,816 --> 00:48:07,296
in your app, it helps to know

881
00:48:07,296 --> 00:48:11,616
and how you can positively

882
00:48:11,616 --> 00:48:13,186
at ranking in Spotlight.

883
00:48:13,186 --> 00:48:17,446
Now, Spotlight's goal's

884
00:48:17,446 --> 00:48:20,526
to present the best results

885
00:48:20,526 --> 00:48:23,556
and this order is determined

886
00:48:24,026 --> 00:48:26,956
The two most important

887
00:48:27,226 --> 00:48:28,336
and content popularity.

888
00:48:28,676 --> 00:48:30,266
Let's talk about

889
00:48:31,146 --> 00:48:35,056
Engagement ratio really is a

890
00:48:35,056 --> 00:48:38,176
from your apps are being

891
00:48:38,206 --> 00:48:39,146
when they are presented,

892
00:48:39,716 --> 00:48:42,896
and Spotlight maintains

893
00:48:43,166 --> 00:48:44,366
of these engagement ratios.

894
00:48:44,366 --> 00:48:47,136
One is maintained on the

895
00:48:48,036 --> 00:48:52,036
On the device the engagement

896
00:48:52,266 --> 00:48:55,296
users' personalized

897
00:48:56,266 --> 00:48:59,816
The server will maintain an

898
00:48:59,816 --> 00:49:02,206
which is based on every query

899
00:48:59,816 --> 00:49:02,206
which is based on every query

900
00:49:02,436 --> 00:49:04,646
for which your results have

901
00:49:04,646 --> 00:49:08,986
and using this Spotlight can

902
00:49:09,236 --> 00:49:10,876
for a particular query.

903
00:49:10,876 --> 00:49:13,496
And then finally there's a

904
00:49:13,496 --> 00:49:19,056
based on all interaction of all

905
00:49:19,056 --> 00:49:21,156
with your app, and this is used

906
00:49:21,446 --> 00:49:24,586
when there's no query level

907
00:49:25,466 --> 00:49:27,206
A couple important

908
00:49:27,206 --> 00:49:30,306
One, you don't get

909
00:49:30,556 --> 00:49:34,326
for a particular query have

910
00:49:34,326 --> 00:49:37,096
and they're sort of under

911
00:49:37,886 --> 00:49:42,706
The best practice here really

912
00:49:42,706 --> 00:49:47,296
descriptions that really

913
00:49:47,296 --> 00:49:49,776
that you're indexing

914
00:49:49,776 --> 00:49:50,856
to the same content.

915
00:49:54,136 --> 00:49:57,706
The second important thing

916
00:49:57,706 --> 00:50:00,926
In general, items

917
00:49:57,706 --> 00:50:00,926
In general, items

918
00:50:01,356 --> 00:50:02,336
tend to be ranked higher.

919
00:50:02,336 --> 00:50:05,586
And Spotlight can

920
00:50:05,586 --> 00:50:07,076
of items in three ways.

921
00:50:07,596 --> 00:50:10,926
If you use Universal Links, they

922
00:50:10,926 --> 00:50:13,286
at the structure

923
00:50:13,286 --> 00:50:14,966
out a reputation for your link.

924
00:50:15,236 --> 00:50:16,736
You don't have to

925
00:50:16,736 --> 00:50:19,406
All you have to do is

926
00:50:19,976 --> 00:50:22,876
If an item has an

927
00:50:23,286 --> 00:50:26,656
Spotlight can track how often

928
00:50:26,656 --> 00:50:29,166
on the device and then

929
00:50:30,166 --> 00:50:32,196
Now, if you use both

930
00:50:32,536 --> 00:50:35,676
and public NSUserActivities,

931
00:50:35,676 --> 00:50:40,096
for public indexing, iOS 10

932
00:50:40,096 --> 00:50:43,746
entire iOS population has

933
00:50:43,746 --> 00:50:45,366
and this is used in ranking.

934
00:50:45,646 --> 00:50:47,496
And this is done for

935
00:50:47,496 --> 00:50:48,616
of differential privacy.

936
00:50:48,616 --> 00:50:50,566
Let me show you how that works.

937
00:50:50,566 --> 00:50:55,726
So in this example Yelp has

938
00:50:55,726 --> 00:50:57,716
that are eligible

939
00:50:57,716 --> 00:50:58,786
as well as Universal Links.

940
00:50:59,136 --> 00:51:01,376
When a user encounters

941
00:50:59,136 --> 00:51:01,376
When a user encounters

942
00:51:01,376 --> 00:51:06,106
iOS computer hash adds some

943
00:51:06,106 --> 00:51:08,606
and then sends this

944
00:51:09,016 --> 00:51:11,806
And by itself this

945
00:51:11,806 --> 00:51:13,536
It doesn't contain

946
00:51:14,136 --> 00:51:17,466
But once thousands of users

947
00:51:17,656 --> 00:51:20,256
Apple servers are

948
00:51:20,746 --> 00:51:25,896
that have been viewed thousands

949
00:51:26,216 --> 00:51:29,406
which users reported

950
00:51:29,976 --> 00:51:32,426
So this really provides a

951
00:51:32,426 --> 00:51:36,146
like aggregate behavior of

952
00:51:36,146 --> 00:51:38,766
about individual

953
00:51:39,556 --> 00:51:41,996
Once popular deep links

954
00:51:42,266 --> 00:51:44,666
they start getting ranked

955
00:51:45,236 --> 00:51:48,126
So this is very cool.

956
00:51:48,336 --> 00:51:51,756
So let's have a quick look at

957
00:51:53,056 --> 00:51:55,476
John showed many best practices

958
00:51:55,476 --> 00:51:58,726
for indexing your app's

959
00:51:58,726 --> 00:52:01,586
You should follow these because

960
00:51:58,726 --> 00:52:01,586
You should follow these because

961
00:52:01,586 --> 00:52:05,576
search experience for your app's

962
00:52:05,576 --> 00:52:08,196
to Spotlight to search

963
00:52:08,546 --> 00:52:10,466
which will then impact

964
00:52:11,436 --> 00:52:15,646
If you have app content,

965
00:52:15,646 --> 00:52:19,566
by using Universal Links and

966
00:52:20,186 --> 00:52:21,676
to users that don't yet have it.

967
00:52:22,476 --> 00:52:25,266
So you know content

968
00:52:25,266 --> 00:52:28,546
so link both Universal Links

969
00:52:28,546 --> 00:52:31,106
and CoreSpotlight items

970
00:52:31,436 --> 00:52:35,916
We introduced

971
00:52:35,916 --> 00:52:37,746
year to help you do

972
00:52:37,746 --> 00:52:42,776
And also, I'll repeat this

973
00:52:42,776 --> 00:52:44,556
that the title, description

974
00:52:44,556 --> 00:52:48,666
of items you're indexing

975
00:52:48,876 --> 00:52:50,416
that that item would go to.

976
00:52:51,076 --> 00:52:52,506
Pay attention to

977
00:52:52,506 --> 00:52:56,546
We know that well-presented

978
00:52:56,546 --> 00:52:57,396
engagement rates.

979
00:52:57,746 --> 00:53:01,316
And finally, when appropriate,

980
00:52:57,746 --> 00:53:01,316
And finally, when appropriate,

981
00:53:01,316 --> 00:53:02,576
as it allows the user

982
00:53:02,576 --> 00:53:05,646
to complete a search

983
00:53:08,126 --> 00:53:10,156
So in conclusion, key takeaways,

984
00:53:10,646 --> 00:53:13,706
I think Spotlight is the new

985
00:53:13,706 --> 00:53:16,826
and in iOS 10 we made it more

986
00:53:17,276 --> 00:53:21,876
And users are increasingly

987
00:53:22,036 --> 00:53:23,756
to be searchable via Spotlight.

988
00:53:23,756 --> 00:53:28,326
So if you haven't adopted

989
00:53:28,326 --> 00:53:32,586
that you consider doing so for

990
00:53:32,586 --> 00:53:35,326
And if you've already

991
00:53:35,586 --> 00:53:38,606
then we would recommend

992
00:53:38,686 --> 00:53:42,816
that have been introduced today.

993
00:53:43,316 --> 00:53:45,206
Some related sessions,

994
00:53:45,206 --> 00:53:48,956
on Proactive Suggestions

995
00:53:48,956 --> 00:53:52,526
of you should go to

996
00:53:52,526 --> 00:53:54,856
in search applies

997
00:53:55,026 --> 00:53:56,206
to Proactive Suggestions.

998
00:53:56,576 --> 00:53:59,646
We also had a fantastic session

999
00:53:59,646 --> 00:54:01,336
You can find this on

1000
00:53:59,646 --> 00:54:01,336
You can find this on

1001
00:54:01,336 --> 00:54:04,596
And we recommend the session

1002
00:54:04,596 --> 00:54:06,696
that covers differential

1003
00:54:07,116 --> 00:54:09,666
And like all other talks,

1004
00:54:09,666 --> 00:54:12,826
at the first URL, and we

1005
00:54:12,826 --> 00:54:16,236
documentation on

1006
00:54:16,236 --> 00:54:17,436
And that's all I have.

1007
00:54:18,086 --> 00:54:19,626
Enjoy the rest of the WWDC.

1008
00:54:20,516 --> 00:54:30,130
[ Applause ]
