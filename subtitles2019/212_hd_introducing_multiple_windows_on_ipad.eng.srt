1
00:00:00,506 --> 0:00:05,516
[ Music ]

2
00:00:06,516 --> 0:00:13,356
[ Applause and Cheering ]

3
00:00:13,856 --> 0:00:14,116
&gt;&gt; Thank you.

4
00:00:14,906 --> 0:00:15,426
Good afternoon.

5
00:00:15,426 --> 0:00:17,516
My name is Ken Ferry from iOS

6
00:00:17,516 --> 0:00:19,556
System UI, or Springboard if you

7
00:00:19,556 --> 0:00:19,966
know that name.

8
00:00:20,536 --> 0:00:23,056
And today, myself, and Steve

9
00:00:23,056 --> 0:00:24,866
Holt, and James Savage are going

10
00:00:24,866 --> 0:00:26,076
to talk to you about multiple

11
00:00:26,076 --> 0:00:27,196
windows on iPad.

12
00:00:28,626 --> 0:00:29,536
So what are we talking about?

13
00:00:30,106 --> 0:00:32,665
Well, on iOS 12 and before, if

14
00:00:32,665 --> 0:00:33,936
you swipe up in the switcher,

15
00:00:34,066 --> 0:00:35,916
you got this nice little grid,

16
00:00:35,916 --> 0:00:37,406
you can tap on things, gets you

17
00:00:37,406 --> 0:00:38,496
to applications, it's great.

18
00:00:39,556 --> 0:00:42,216
On iOS 13, it looks pretty much

19
00:00:42,216 --> 0:00:43,516
the same, but those are no

20
00:00:43,516 --> 0:00:44,696
longer applications.

21
00:00:44,996 --> 0:00:47,836
Those are Windows, or as you'll

22
00:00:47,836 --> 0:00:48,926
see it's called the in API

23
00:00:48,926 --> 0:00:49,376
scenes.

24
00:00:50,586 --> 0:00:51,896
So that's what we're going to

25
00:00:51,896 --> 0:00:52,516
talk about today.

26
00:00:53,006 --> 0:00:53,766
We're going to talk about what

27
00:00:53,766 --> 0:00:54,916
does this mean for your app.

28
00:00:55,296 --> 0:00:56,486
And it's an introductory talk so

29
00:00:56,486 --> 0:00:57,586
we're going to do it really from

30
00:00:57,586 --> 0:00:58,236
top to bottom.

31
00:00:58,376 --> 0:00:59,716
We're going to start out with

32
00:00:59,716 --> 0:01:00,646
design issues.

33
00:00:59,716 --> 0:01:00,646
design issues.

34
00:01:01,226 --> 0:01:02,966
So, just what are you going to

35
00:01:02,966 --> 0:01:04,196
want to be thinking about doing

36
00:01:04,196 --> 0:01:05,756
at all in your app for multiple

37
00:01:05,756 --> 0:01:06,176
windows?

38
00:01:07,006 --> 0:01:08,426
We'll go on from there to the

39
00:01:08,426 --> 0:01:10,166
how of multiple windows,

40
00:01:10,516 --> 0:01:11,996
starting out with application

41
00:01:11,996 --> 0:01:13,516
lifecycle, which is the biggest

42
00:01:13,516 --> 0:01:15,286
change to the application

43
00:01:15,286 --> 0:01:15,946
programming model.

44
00:01:16,096 --> 0:01:16,856
That's like foreground,

45
00:01:16,856 --> 0:01:17,606
background and active.

46
00:01:18,626 --> 0:01:19,606
Go on from there to drag and

47
00:01:19,606 --> 0:01:21,156
drop, which is how you mostly

48
00:01:21,156 --> 0:01:21,886
make windows.

49
00:01:22,396 --> 0:01:24,516
And then, James will walk you

50
00:01:24,516 --> 0:01:27,406
through next steps of further

51
00:01:27,406 --> 0:01:29,156
adoption that you might want or

52
00:01:29,156 --> 0:01:30,936
need to do in your app in order

53
00:01:30,936 --> 0:01:32,686
to be a good multiple window

54
00:01:32,816 --> 0:01:33,036
app.

55
00:01:33,276 --> 0:01:35,646
So let's get started.

56
00:01:35,646 --> 0:01:37,296
We're going to talk about these

57
00:01:37,296 --> 0:01:38,416
design issues.

58
00:01:38,856 --> 0:01:41,086
And, first, we just want to talk

59
00:01:41,086 --> 0:01:43,256
about what these windows or

60
00:01:43,386 --> 0:01:44,696
again scenes are.

61
00:01:45,946 --> 0:01:46,926
It is -- there's really kind of

62
00:01:46,926 --> 0:01:48,046
two questions we want to try to

63
00:01:48,046 --> 0:01:50,446
answer here, is first, does it

64
00:01:50,446 --> 0:01:52,086
make sense for my application to

65
00:01:52,086 --> 0:01:54,046
support windows at all, multiple

66
00:01:54,046 --> 0:01:54,486
windows?

67
00:01:54,976 --> 0:01:57,906
And then, if it does, what would

68
00:01:57,906 --> 0:01:58,806
those windows be?

69
00:01:59,036 --> 0:02:01,476
Like how do they act, what are

70
00:01:59,036 --> 0:02:01,476
Like how do they act, what are

71
00:02:01,476 --> 0:02:02,516
they, you know, how does the

72
00:02:02,516 --> 0:02:03,186
user think of them?

73
00:02:04,276 --> 0:02:05,746
We'll answer those questions by

74
00:02:05,746 --> 0:02:07,496
looking at examples from Apple's

75
00:02:07,496 --> 0:02:09,985
own apps and generalizing to how

76
00:02:09,985 --> 0:02:10,886
it might apply to yours.

77
00:02:10,886 --> 0:02:11,956
So that's what you're going to

78
00:02:11,956 --> 0:02:12,516
be thinking about.

79
00:02:13,656 --> 0:02:16,216
So we'll start out with Safari.

80
00:02:16,216 --> 0:02:18,116
Safari is a poster child for

81
00:02:18,116 --> 0:02:20,096
this kind of multitasking, that

82
00:02:20,096 --> 0:02:21,546
it was kind of already there.

83
00:02:21,546 --> 0:02:23,676
This is actually a screenshot

84
00:02:23,676 --> 0:02:26,216
from iOS 12 where Safari already

85
00:02:26,216 --> 0:02:27,806
supported the split-screen view.

86
00:02:28,716 --> 0:02:30,306
In iOS 13, it looks like this,

87
00:02:30,306 --> 0:02:32,496
or iPadOS, it looks like this,

88
00:02:33,136 --> 0:02:34,486
which is not really that

89
00:02:34,556 --> 0:02:34,966
different.

90
00:02:34,966 --> 0:02:36,666
That's because it was just so

91
00:02:36,666 --> 0:02:37,826
important that we did it in

92
00:02:37,826 --> 0:02:39,476
Safari even before we could --

93
00:02:39,556 --> 0:02:40,876
we brought it to a whole rest of

94
00:02:40,876 --> 0:02:41,676
the operating system.

95
00:02:42,176 --> 0:02:46,146
For generalization purposes,

96
00:02:46,586 --> 0:02:48,006
though, what is it that we want

97
00:02:48,006 --> 0:02:50,786
to be thinking about here?

98
00:02:50,986 --> 0:02:52,276
The first thing to be realizing

99
00:02:52,276 --> 0:02:53,736
is that every -- there's only

100
00:02:53,736 --> 0:02:55,916
one kind of window in Safari.

101
00:02:56,036 --> 0:02:58,046
They're all the same as each

102
00:02:58,046 --> 0:02:58,306
other.

103
00:02:58,306 --> 0:02:59,266
They're just kind of clones of

104
00:02:59,266 --> 0:02:59,906
the interface.

105
00:03:00,086 --> 0:03:01,576
And each one can do everything

106
00:03:01,576 --> 0:03:02,376
in the application.

107
00:03:03,116 --> 0:03:05,266
That's important because for --

108
00:03:05,266 --> 0:03:07,556
on the iPad, the user should be

109
00:03:07,556 --> 0:03:09,406
able to do everything from just

110
00:03:09,406 --> 0:03:10,886
one window if they want to.

111
00:03:11,516 --> 0:03:12,316
They should be able to create

112
00:03:12,316 --> 0:03:14,276
more windows f they think that's

113
00:03:14,276 --> 0:03:15,006
useful.

114
00:03:15,486 --> 0:03:17,426
But if your application requires

115
00:03:17,426 --> 0:03:18,626
multiple windows to you -- to

116
00:03:18,626 --> 0:03:20,486
work, then something has gone

117
00:03:20,486 --> 0:03:20,806
wrong.

118
00:03:21,506 --> 0:03:22,816
So, it's not important that it

119
00:03:22,816 --> 0:03:24,286
always be quite like this where

120
00:03:24,286 --> 0:03:25,496
they're all just clones of each

121
00:03:25,496 --> 0:03:27,336
other, but it is important that

122
00:03:27,336 --> 0:03:29,036
the first window that the user

123
00:03:29,036 --> 0:03:30,596
create be able to do everything.

124
00:03:31,136 --> 0:03:34,336
Now, that said, in this case,

125
00:03:35,016 --> 0:03:36,026
they are all the same.

126
00:03:36,026 --> 0:03:36,976
And you'll actually see that in

127
00:03:36,976 --> 0:03:38,046
most of Apple's apps, that's

128
00:03:38,046 --> 0:03:38,676
what we've done.

129
00:03:39,066 --> 0:03:40,906
So, and that's -- so that's not

130
00:03:40,906 --> 0:03:41,486
a bad thing.

131
00:03:41,486 --> 0:03:42,546
That's the easiest thing for you

132
00:03:42,546 --> 0:03:43,826
to do and it very well might be

133
00:03:43,826 --> 0:03:44,316
the right thing.

134
00:03:44,476 --> 0:03:45,546
We'll look at the examples.

135
00:03:45,936 --> 0:03:47,456
Though before I go on, I just

136
00:03:47,456 --> 0:03:48,616
want to note that like because

137
00:03:48,616 --> 0:03:51,126
we did adopt, you know, the

138
00:03:51,126 --> 0:03:52,346
system-wide support for this, it

139
00:03:52,346 --> 0:03:53,416
did get better in Safari.

140
00:03:53,786 --> 0:03:55,086
Now, you can like tear off one

141
00:03:55,086 --> 0:03:56,806
of these things and throw it off

142
00:03:56,806 --> 0:03:58,306
to the side and concentrate on

143
00:03:58,306 --> 0:03:59,016
something else for a little

144
00:03:59,016 --> 0:03:59,406
while.

145
00:03:59,556 --> 0:04:00,466
You know, it's fancy.

146
00:03:59,556 --> 0:04:00,466
You know, it's fancy.

147
00:04:01,756 --> 0:04:07,696
Going on, document-based apps.

148
00:04:09,406 --> 0:04:11,036
Here, we're looking at pages.

149
00:04:11,376 --> 0:04:13,546
And in any document-based app

150
00:04:13,546 --> 0:04:15,076
really, the user would have the

151
00:04:15,076 --> 0:04:17,486
expectation that they're able to

152
00:04:17,696 --> 0:04:19,466
view documents in different

153
00:04:19,466 --> 0:04:20,505
windows at the same time.

154
00:04:20,716 --> 0:04:21,856
So you're definitely going to

155
00:04:21,856 --> 0:04:23,336
want to support that.

156
00:04:23,336 --> 0:04:24,266
But there's something you might

157
00:04:24,446 --> 0:04:25,576
or might not be a little bit

158
00:04:25,576 --> 0:04:26,376
surprised by here.

159
00:04:26,376 --> 0:04:27,516
If you look at the top left,

160
00:04:28,206 --> 0:04:29,586
there's a button there that says

161
00:04:29,586 --> 0:04:30,676
documents on both of those

162
00:04:30,676 --> 0:04:31,136
windows.

163
00:04:31,966 --> 0:04:32,906
Each of these windows is

164
00:04:32,906 --> 0:04:34,086
actually a full browser.

165
00:04:34,326 --> 0:04:35,506
You can go back from the

166
00:04:35,506 --> 0:04:36,506
document you're looking at and

167
00:04:36,506 --> 0:04:37,316
look at a different one.

168
00:04:37,696 --> 0:04:38,836
So it's actually the same case

169
00:04:38,836 --> 0:04:39,456
as Safari.

170
00:04:39,796 --> 0:04:41,146
There's only one kind of window

171
00:04:41,146 --> 0:04:41,706
and pages.

172
00:04:42,626 --> 0:04:45,886
That's not necessarily going to

173
00:04:45,886 --> 0:04:47,216
be the case in every document,

174
00:04:47,216 --> 0:04:48,276
not even necessarily in every

175
00:04:48,276 --> 0:04:49,446
document-based app I think.

176
00:04:49,836 --> 0:04:52,496
But in here, it does make sense.

177
00:04:52,496 --> 0:04:53,616
And we'll look at cases where it

178
00:04:53,616 --> 0:04:57,276
doesn't going on.

179
00:04:57,486 --> 0:05:00,706
Maps also is -- there's only one

180
00:04:57,486 --> 0:05:00,706
Maps also is -- there's only one

181
00:05:00,706 --> 0:05:01,326
kind of window.

182
00:05:01,606 --> 0:05:02,566
But the reason I still want to

183
00:05:02,606 --> 0:05:03,726
-- we still want to talk about

184
00:05:03,726 --> 0:05:05,186
it is because it illustrates

185
00:05:05,346 --> 0:05:07,176
something to that other point of

186
00:05:07,176 --> 0:05:08,726
should my application even

187
00:05:08,726 --> 0:05:09,816
support multiple windows.

188
00:05:10,166 --> 0:05:12,686
That's because at first, this

189
00:05:12,686 --> 0:05:14,346
didn't necessarily seem like

190
00:05:14,396 --> 0:05:15,906
that attractive of a case

191
00:05:16,166 --> 0:05:17,246
because it seems like you just,

192
00:05:17,246 --> 0:05:18,646
you know, you open maps, you go

193
00:05:18,646 --> 0:05:19,726
somewhere and then you close it.

194
00:05:20,086 --> 0:05:21,076
And that's how it works.

195
00:05:21,076 --> 0:05:23,636
That's actually not the case.

196
00:05:23,716 --> 0:05:26,276
If you're planning an evening

197
00:05:26,276 --> 0:05:27,556
here, you might be going to

198
00:05:27,556 --> 0:05:28,676
dinner and then after dinner,

199
00:05:28,676 --> 0:05:29,586
you're going to a show.

200
00:05:30,216 --> 0:05:32,516
It's really useful to be able to

201
00:05:32,516 --> 0:05:34,476
do each of those two legs in a

202
00:05:34,476 --> 0:05:35,256
different window.

203
00:05:35,586 --> 0:05:36,966
So you can think about them or

204
00:05:36,966 --> 0:05:38,976
change them without losing all

205
00:05:38,976 --> 0:05:40,096
your state in between.

206
00:05:41,506 --> 0:05:43,806
And that seems specific to maps,

207
00:05:43,846 --> 0:05:45,386
but the reason to bring that up

208
00:05:45,386 --> 0:05:47,126
is that we've pretty much always

209
00:05:47,126 --> 0:05:47,656
found that.

210
00:05:48,026 --> 0:05:49,916
So, for all the cases where we

211
00:05:50,166 --> 0:05:51,826
weren't sure if multiple windows

212
00:05:51,826 --> 0:05:53,546
would be useful or not, we

213
00:05:53,546 --> 0:05:54,586
pretty much came around to that

214
00:05:54,586 --> 0:05:54,986
it is.

215
00:05:55,276 --> 0:05:56,916
So, I'll go through more

216
00:05:56,916 --> 0:05:59,216
examples of cases where it is,

217
00:05:59,216 --> 0:06:00,576
but be thinking about that when

218
00:05:59,216 --> 0:06:00,576
but be thinking about that when

219
00:06:00,576 --> 0:06:01,686
you're when you're doing yours.

220
00:06:03,076 --> 0:06:06,096
Oh, and, you know, because it is

221
00:06:06,536 --> 0:06:07,826
using the system multi-window,

222
00:06:08,246 --> 0:06:09,596
that does mean that once you

223
00:06:09,596 --> 0:06:10,666
want to focus on one of them,

224
00:06:10,666 --> 0:06:11,596
say where I'm going to dinner,

225
00:06:11,596 --> 0:06:12,696
you know, I can rearrange my

226
00:06:12,696 --> 0:06:15,196
spaces and pull out notes and do

227
00:06:15,196 --> 0:06:16,426
things that you otherwise

228
00:06:16,426 --> 0:06:18,496
wouldn't be able to do if it was

229
00:06:18,496 --> 0:06:19,756
just inside of one application.

230
00:06:21,286 --> 0:06:23,536
So, Mail is the first case where

231
00:06:23,536 --> 0:06:24,586
there are different kinds of

232
00:06:24,586 --> 0:06:26,546
windows that we've looked at.

233
00:06:27,266 --> 0:06:28,276
Craig showed this in the

234
00:06:28,276 --> 0:06:29,716
keynote, but when you reply to a

235
00:06:29,716 --> 0:06:31,376
message, that brings up this

236
00:06:31,376 --> 0:06:32,456
modal interface same as it

237
00:06:32,456 --> 0:06:34,276
always has, but you can tear it

238
00:06:34,276 --> 0:06:34,596
off.

239
00:06:35,426 --> 0:06:36,966
And then you might even want to

240
00:06:36,966 --> 0:06:39,386
use your slide over stack as

241
00:06:39,386 --> 0:06:41,396
almost like a to-do list of

242
00:06:41,526 --> 0:06:44,336
actions that you are pended and

243
00:06:44,336 --> 0:06:45,116
still need to perform.

244
00:06:46,256 --> 0:06:48,926
So in this case, if you look at

245
00:06:48,926 --> 0:06:49,816
the window again, look at the

246
00:06:49,816 --> 0:06:50,126
top.

247
00:06:50,216 --> 0:06:51,546
There's a Send button, that's

248
00:06:51,546 --> 0:06:52,746
the blue arrow, and there's a

249
00:06:52,746 --> 0:06:53,506
Cancel button.

250
00:06:53,506 --> 0:06:55,386
But there's no way to get back

251
00:06:55,386 --> 0:06:57,816
from here to see the rest of

252
00:06:58,006 --> 0:06:59,306
your mailboxes or anything like

253
00:06:59,306 --> 0:06:59,546
that.

254
00:06:59,806 --> 0:07:01,126
These windows are dedicated.

255
00:06:59,806 --> 0:07:01,126
These windows are dedicated.

256
00:07:01,656 --> 0:07:04,116
And then, when you and -- so

257
00:07:04,776 --> 0:07:07,276
when you hit one of those

258
00:07:07,276 --> 0:07:09,196
buttons, it will close the

259
00:07:09,196 --> 0:07:09,516
window.

260
00:07:09,786 --> 0:07:12,006
So I think Craig showed sending

261
00:07:12,006 --> 0:07:12,956
in the keynote, so I'm just

262
00:07:12,956 --> 0:07:13,886
going to show dismissing.

263
00:07:14,266 --> 0:07:15,986
If you first click to get out of

264
00:07:15,986 --> 0:07:17,836
the slide overview to just view

265
00:07:17,836 --> 0:07:18,926
one of them and then click

266
00:07:18,926 --> 0:07:20,006
Cancel, it looks like that.

267
00:07:20,296 --> 0:07:22,206
And all those animations are

268
00:07:22,206 --> 0:07:23,896
available in your app too.

269
00:07:24,066 --> 0:07:25,826
They're talked about in some of

270
00:07:25,826 --> 0:07:27,266
the later talks.

271
00:07:29,996 --> 0:07:32,756
Messages also has different

272
00:07:32,756 --> 0:07:34,346
kinds of windows, but it's not

273
00:07:34,346 --> 0:07:35,716
just like a to-do list.

274
00:07:35,716 --> 0:07:37,436
It's not just like a transaction

275
00:07:37,436 --> 0:07:38,776
or an action like in the other

276
00:07:38,776 --> 0:07:39,116
case.

277
00:07:39,686 --> 0:07:41,416
Here, when you pull off a thread

278
00:07:41,636 --> 0:07:43,296
into its own window, that's just

279
00:07:43,296 --> 0:07:44,866
a dedicated window that pertain

280
00:07:44,866 --> 0:07:46,246
-- that is only for that one

281
00:07:46,246 --> 0:07:46,566
thread.

282
00:07:46,566 --> 0:07:47,806
And you can see it as a Done

283
00:07:47,806 --> 0:07:48,766
button at the top from when

284
00:07:48,766 --> 0:07:49,886
you're finished with it.

285
00:07:50,856 --> 0:07:52,836
That's more of an organizational

286
00:07:52,836 --> 0:07:55,226
tool, but it's a very handy

287
00:07:55,226 --> 0:07:57,856
organizational tool.

288
00:07:57,856 --> 0:07:59,506
And then going back for a minute

289
00:07:59,506 --> 0:08:00,476
to that question of should my

290
00:07:59,506 --> 0:08:00,476
to that question of should my

291
00:08:00,476 --> 0:08:01,566
applications support multiple

292
00:08:01,566 --> 0:08:04,956
windows, here in Messages, using

293
00:08:04,956 --> 0:08:06,366
this, I found it incredibly

294
00:08:06,366 --> 0:08:08,876
useful to be able to look at one

295
00:08:08,876 --> 0:08:10,456
conversation and scroll up and

296
00:08:10,456 --> 0:08:11,506
find some information and

297
00:08:11,506 --> 0:08:13,426
reference it while I talk to

298
00:08:13,426 --> 0:08:14,476
someone in the other window.

299
00:08:14,646 --> 0:08:15,806
And I can tell them, and if they

300
00:08:15,806 --> 0:08:16,966
have more questions, I don't

301
00:08:16,966 --> 0:08:18,626
have to somehow go back and

302
00:08:18,626 --> 0:08:18,976
forth.

303
00:08:18,976 --> 0:08:20,006
I've still got it there.

304
00:08:20,406 --> 0:08:22,406
So, in general, I think the

305
00:08:22,406 --> 0:08:24,286
generalizable principle there is

306
00:08:24,286 --> 0:08:25,226
being able to refer to

307
00:08:25,226 --> 0:08:26,966
something, being able to see one

308
00:08:26,966 --> 0:08:27,976
thing while you're acting in a

309
00:08:27,976 --> 0:08:29,106
different window.

310
00:08:31,356 --> 0:08:33,716
The last example of an Apple app

311
00:08:33,716 --> 0:08:35,316
I want to talk about today is

312
00:08:35,426 --> 0:08:35,905
Calendar.

313
00:08:37,155 --> 0:08:38,446
What's interesting here is that

314
00:08:38,446 --> 0:08:40,176
Calendar supported drag and drop

315
00:08:40,176 --> 0:08:41,696
for events already.

316
00:08:41,696 --> 0:08:44,996
But by adopting multi-window,

317
00:08:44,996 --> 0:08:46,876
now, if you view say two

318
00:08:46,876 --> 0:08:48,486
different weeks at the same time

319
00:08:48,486 --> 0:08:50,116
in Calendar, you can drag and

320
00:08:50,116 --> 0:08:51,846
drop from one of those weeks to

321
00:08:51,846 --> 0:08:52,276
the other.

322
00:08:53,066 --> 0:08:55,486
And that didn't require any

323
00:08:55,486 --> 0:08:56,686
additional changes in Calendar

324
00:08:56,686 --> 0:08:57,356
to support that.

325
00:08:57,596 --> 0:08:58,836
That's just the drag and drop

326
00:08:58,836 --> 0:08:59,456
they already had.

327
00:09:00,106 --> 0:09:01,586
So if your app supports drag and

328
00:09:01,586 --> 0:09:04,136
drop by supporting multiple

329
00:09:04,136 --> 0:09:05,596
windows, also you can kind of

330
00:09:05,596 --> 0:09:07,526
magnify the power of both of

331
00:09:07,526 --> 0:09:08,736
those features working together.

332
00:09:09,206 --> 0:09:12,086
So, yeah. And so like I said,

333
00:09:12,206 --> 0:09:13,966
pretty much what we found when

334
00:09:13,966 --> 0:09:16,046
we looked at this is that any

335
00:09:16,046 --> 0:09:17,846
app of sort of reasonable

336
00:09:18,396 --> 0:09:20,476
robustness pretty much benefits

337
00:09:20,476 --> 0:09:20,756
from it.

338
00:09:20,756 --> 0:09:22,536
So, you know, I can't completely

339
00:09:22,536 --> 0:09:23,446
answer the question for your

340
00:09:23,446 --> 0:09:23,626
apps.

341
00:09:23,626 --> 0:09:24,406
You'll have to think about it.

342
00:09:24,406 --> 0:09:25,196
But hopefully some of these

343
00:09:25,196 --> 0:09:28,486
examples will help you think of

344
00:09:28,486 --> 0:09:29,516
those cases where it would be

345
00:09:29,516 --> 0:09:30,586
useful for your users.

346
00:09:31,036 --> 0:09:34,126
Last thing I wanted to note here

347
00:09:34,126 --> 0:09:35,126
before we go on to the next

348
00:09:35,126 --> 0:09:36,966
topic is, you know, we talked

349
00:09:36,966 --> 0:09:38,626
about iPad apps on the Mac this

350
00:09:38,626 --> 0:09:38,836
year.

351
00:09:39,166 --> 0:09:41,856
And Mac apps have windows and

352
00:09:42,026 --> 0:09:43,216
without all this API, you

353
00:09:43,216 --> 0:09:44,456
couldn't make new ones, so it's

354
00:09:44,456 --> 0:09:45,336
going to be kind of a weird Mac

355
00:09:45,336 --> 0:09:45,476
app.

356
00:09:45,526 --> 0:09:46,116
But now you can.

357
00:09:46,566 --> 0:09:46,976
So do that.

358
00:09:50,186 --> 0:09:52,286
Alright. So that's everything

359
00:09:52,286 --> 0:09:54,036
about what are these windows at

360
00:09:54,036 --> 0:09:54,326
all.

361
00:09:54,726 --> 0:09:56,376
But now, still from a design

362
00:09:56,376 --> 0:09:58,236
perspective, what interactions

363
00:09:58,236 --> 0:10:00,026
do you want to enable in your

364
00:09:58,236 --> 0:10:00,026
do you want to enable in your

365
00:10:00,026 --> 0:10:01,546
app so that the user can create

366
00:10:01,546 --> 0:10:02,176
new windows?

367
00:10:04,176 --> 0:10:05,656
We're going to explore that by

368
00:10:05,656 --> 0:10:07,156
first showing what the system

369
00:10:07,156 --> 0:10:08,686
can do for you for free, and

370
00:10:08,686 --> 0:10:10,786
then extrapolating to what users

371
00:10:10,786 --> 0:10:12,256
would expect to be able to do

372
00:10:12,256 --> 0:10:13,556
based on what is already there.

373
00:10:14,346 --> 0:10:16,386
So for starters, Craig showed

374
00:10:16,386 --> 0:10:17,446
App Expose already.

375
00:10:17,446 --> 0:10:19,746
And in App Expose, there's

376
00:10:19,906 --> 0:10:21,976
always this little button in the

377
00:10:21,976 --> 0:10:23,816
top right, and that that little

378
00:10:23,816 --> 0:10:24,876
button is make new window.

379
00:10:25,546 --> 0:10:26,336
So that's something that's

380
00:10:26,336 --> 0:10:27,236
completely for free.

381
00:10:27,636 --> 0:10:28,256
If your app supports

382
00:10:28,256 --> 0:10:30,216
multi-window, that will make new

383
00:10:30,216 --> 0:10:30,636
windows.

384
00:10:31,096 --> 0:10:33,766
There's only one other thing

385
00:10:33,766 --> 0:10:35,966
that we can really do for all

386
00:10:35,966 --> 0:10:37,666
applications, but this is the

387
00:10:37,666 --> 0:10:38,836
one that kind of becomes the

388
00:10:38,836 --> 0:10:39,816
foundation for everything.

389
00:10:40,646 --> 0:10:41,766
If you're already looking at

390
00:10:41,766 --> 0:10:43,756
your application and you grab

391
00:10:43,756 --> 0:10:45,476
the application icon and drag it

392
00:10:45,476 --> 0:10:48,226
over to the edge, that seems

393
00:10:48,226 --> 0:10:49,466
like it's really explicitly

394
00:10:49,466 --> 0:10:50,886
saying, I want to make another

395
00:10:50,886 --> 0:10:51,816
window right here.

396
00:10:52,336 --> 0:10:53,576
Just what else could that mean?

397
00:10:54,516 --> 0:10:56,146
And we have all the contexts

398
00:10:56,146 --> 0:10:57,096
that we need to make that work,

399
00:10:57,096 --> 0:10:58,426
so it does.

400
00:10:58,966 --> 0:11:02,106
But given that, now if the user

401
00:10:58,966 --> 0:11:02,106
But given that, now if the user

402
00:11:02,106 --> 0:11:03,726
picks up something else, say a

403
00:11:03,726 --> 0:11:06,376
tab in Safari and they do that

404
00:11:06,376 --> 0:11:07,926
drag, they're also going to

405
00:11:07,926 --> 0:11:10,186
expect that to work, and that

406
00:11:10,186 --> 0:11:11,826
the system can't just do it for

407
00:11:11,826 --> 0:11:11,996
you.

408
00:11:12,546 --> 0:11:15,506
It's not a lot of work to adopt

409
00:11:15,506 --> 0:11:16,646
the API to do that, but you do

410
00:11:16,646 --> 0:11:18,046
have to actually adopt something

411
00:11:18,046 --> 0:11:18,726
to make that work.

412
00:11:19,216 --> 0:11:20,316
And that really extrapolate --

413
00:11:20,316 --> 0:11:22,126
that extends to all drag and

414
00:11:22,126 --> 0:11:22,376
drop.

415
00:11:22,866 --> 0:11:24,526
Pretty much if the user can pick

416
00:11:24,526 --> 0:11:26,446
something up and it makes any

417
00:11:26,446 --> 0:11:28,546
kind of sense for that to result

418
00:11:28,546 --> 0:11:30,736
in a new window, they're going

419
00:11:30,736 --> 0:11:31,736
to expect that it can.

420
00:11:31,956 --> 0:11:33,386
And you should enable that.

421
00:11:34,016 --> 0:11:35,936
A really common case for that is

422
00:11:35,936 --> 0:11:37,676
any kind of master detail view.

423
00:11:38,346 --> 0:11:40,256
So here in message -- in Mail,

424
00:11:40,806 --> 0:11:43,006
you know, there's this left-hand

425
00:11:43,006 --> 0:11:44,976
table view that represents --

426
00:11:44,976 --> 0:11:46,456
each cell represents a message.

427
00:11:46,546 --> 0:11:47,766
And if you tap on the cell, then

428
00:11:47,766 --> 0:11:48,826
you see the whole thing, right?

429
00:11:49,366 --> 0:11:50,476
So the user is going to expect

430
00:11:50,476 --> 0:11:51,476
that if you drag out of the

431
00:11:51,476 --> 0:11:53,566
table view that that's going to

432
00:11:53,566 --> 0:11:55,376
pull out a window for a message.

433
00:11:57,696 --> 0:12:01,416
OK. So mostly drag and drop.

434
00:11:57,696 --> 0:12:01,416
OK. So mostly drag and drop.

435
00:12:01,536 --> 0:12:02,996
You can also create windows

436
00:12:02,996 --> 0:12:04,106
through explicit action.

437
00:12:04,806 --> 0:12:07,026
So in an application like Safari

438
00:12:07,026 --> 0:12:08,016
or really anything that has

439
00:12:08,016 --> 0:12:09,766
links at all, you might want to

440
00:12:09,766 --> 0:12:11,256
support that if you press and

441
00:12:11,256 --> 0:12:13,416
hold on a link that that might

442
00:12:13,416 --> 0:12:14,976
pull up a popover and the

443
00:12:14,976 --> 0:12:16,956
popover might have a button that

444
00:12:16,956 --> 0:12:18,086
says Open in New Window.

445
00:12:18,766 --> 0:12:20,016
And that is the case in Safari.

446
00:12:20,106 --> 0:12:20,616
You can do that.

447
00:12:20,946 --> 0:12:22,316
And that's how it reads, it says

448
00:12:22,316 --> 0:12:23,096
Open in New Window.

449
00:12:24,196 --> 0:12:26,116
So that pretty much implies that

450
00:12:26,116 --> 0:12:27,536
there must be -- we are, there

451
00:12:27,536 --> 0:12:29,576
is an API in UIKit that just

452
00:12:29,576 --> 0:12:30,886
whenever you call it, it will

453
00:12:30,886 --> 0:12:31,556
open a new window.

454
00:12:32,786 --> 0:12:34,346
So, you could do a lot with

455
00:12:34,346 --> 0:12:34,736
that, you know.

456
00:12:34,736 --> 0:12:36,196
You could set up like a voice

457
00:12:36,196 --> 0:12:37,546
recognition thing so that like

458
00:12:37,546 --> 0:12:40,026
whenever I sneeze, it like

459
00:12:40,026 --> 0:12:42,096
creates like a new sneeze window

460
00:12:42,516 --> 0:12:43,936
like for analyzing my sneeze

461
00:12:43,936 --> 0:12:46,346
like kind of like Shazam or

462
00:12:47,046 --> 0:12:47,656
something like that.

463
00:12:47,656 --> 0:12:49,006
But -- you could do that, but it

464
00:12:49,006 --> 0:12:49,626
would be weird.

465
00:12:50,206 --> 0:12:52,196
So you shouldn't.

466
00:12:52,196 --> 0:12:54,386
The -- though it actually sounds

467
00:12:54,386 --> 0:12:56,456
kind of fun, but you know.

468
00:12:56,876 --> 0:12:58,466
As we were saying before, the

469
00:12:58,466 --> 0:13:01,696
user should not be forced into

470
00:12:58,466 --> 0:13:01,696
user should not be forced into

471
00:13:01,966 --> 0:13:02,916
using multiple windows.

472
00:13:02,916 --> 0:13:04,026
That should always be an action

473
00:13:04,026 --> 0:13:05,096
they take for themselves.

474
00:13:05,486 --> 0:13:06,366
So it always needs to be

475
00:13:06,366 --> 0:13:08,096
something that they recognize as

476
00:13:08,096 --> 0:13:09,456
very explicitly creating a new

477
00:13:09,456 --> 0:13:11,316
window like this Open in New

478
00:13:11,316 --> 0:13:11,696
Window.

479
00:13:12,186 --> 0:13:13,916
So -- but that's just -- that's

480
00:13:13,916 --> 0:13:14,616
design level.

481
00:13:14,616 --> 0:13:15,746
So that's something you have to

482
00:13:15,746 --> 0:13:16,836
do for yourselves in your own

483
00:13:16,836 --> 0:13:17,476
applications.

484
00:13:18,556 --> 0:13:21,246
Anyway, that is everything we

485
00:13:21,246 --> 0:13:22,606
have to say about design and the

486
00:13:22,606 --> 0:13:23,466
what.

487
00:13:23,466 --> 0:13:25,906
So to talk about how you can go

488
00:13:25,906 --> 0:13:28,036
adopting this, I'm going to turn

489
00:13:28,036 --> 0:13:29,356
it over to Steve Holt.

490
00:13:30,516 --> 0:13:34,736
[ Applause ]

491
00:13:35,236 --> 0:13:38,396
&gt;&gt; Thank you.

492
00:13:38,576 --> 0:13:39,236
Thank you, Ken.

493
00:13:39,496 --> 0:13:41,296
My name is Steve Holt and I'm an

494
00:13:41,296 --> 0:13:42,826
engineer in the UIKit Team.

495
00:13:43,216 --> 0:13:44,986
And hopefully, you've seen some

496
00:13:44,986 --> 0:13:47,216
great examples of how to adopt

497
00:13:47,216 --> 0:13:48,086
this new feature in your

498
00:13:48,086 --> 0:13:48,886
applications.

499
00:13:49,456 --> 0:13:50,696
And you're probably wondering,

500
00:13:51,356 --> 0:13:52,996
how do you actually adopt it in

501
00:13:52,996 --> 0:13:53,796
your applications?

502
00:13:54,686 --> 0:13:56,146
That's great because we're going

503
00:13:56,146 --> 0:13:57,116
to talk about that right now.

504
00:13:57,756 --> 0:13:59,976
So there are two classes you

505
00:13:59,976 --> 0:14:01,636
need to know about in general to

506
00:13:59,976 --> 0:14:01,636
need to know about in general to

507
00:14:01,636 --> 0:14:03,226
work with this new feature on

508
00:14:03,226 --> 0:14:05,756
iOS and iPadOS, which is

509
00:14:05,756 --> 0:14:08,006
UIWindowScene and SceneSession.

510
00:14:08,656 --> 0:14:11,886
You might be familiar with how

511
00:14:11,886 --> 0:14:13,616
UIs in UIKit are structured

512
00:14:13,666 --> 0:14:14,026
today.

513
00:14:14,026 --> 0:14:15,926
You have a screen, you have all

514
00:14:15,926 --> 0:14:17,216
window or maybe multiple windows

515
00:14:17,216 --> 0:14:18,246
depending on your application.

516
00:14:18,246 --> 0:14:19,946
And then you have your views

517
00:14:19,946 --> 0:14:21,256
contained inside that window

518
00:14:21,256 --> 0:14:22,626
alongside your view controllers.

519
00:14:23,746 --> 0:14:25,306
UIWindowScene inserts itself

520
00:14:25,526 --> 0:14:27,696
right in between the screen and

521
00:14:27,696 --> 0:14:28,376
your windows.

522
00:14:29,496 --> 0:14:30,666
This lets you contain your

523
00:14:30,666 --> 0:14:32,246
windows to a single instance of

524
00:14:32,246 --> 0:14:34,986
user interface without forcing

525
00:14:34,986 --> 0:14:36,216
you to change your application

526
00:14:36,216 --> 0:14:37,496
or user interface structure too

527
00:14:37,496 --> 0:14:38,756
much from what you already

528
00:14:38,756 --> 0:14:43,246
should have today.

529
00:14:43,346 --> 0:14:45,776
So basically, a scene, it

530
00:14:45,776 --> 0:14:47,296
contains your user interface,

531
00:14:47,896 --> 0:14:49,596
and the system will create an on

532
00:14:49,596 --> 0:14:50,556
demand for you.

533
00:14:51,276 --> 0:14:53,256
Whenever the user performs a

534
00:14:53,256 --> 0:14:54,726
drag and drop interaction,

535
00:14:55,126 --> 0:14:56,956
requests a new window opened up

536
00:14:57,026 --> 0:14:58,676
through your own interfaces or

537
00:14:58,886 --> 0:15:00,846
however that's achieved, the

538
00:14:58,886 --> 0:15:00,846
however that's achieved, the

539
00:15:00,846 --> 0:15:03,546
system will ask you to put UI

540
00:15:03,546 --> 0:15:04,236
onto the screen.

541
00:15:05,466 --> 0:15:07,806
And then, if that scene should

542
00:15:07,806 --> 0:15:10,206
go background and it's not being

543
00:15:10,206 --> 0:15:12,786
interacted with anymore, the

544
00:15:12,786 --> 0:15:15,976
system can decide that it's just

545
00:15:16,256 --> 0:15:17,306
kind of hanging out there, we

546
00:15:17,306 --> 0:15:18,766
don't need it anymore, and we

547
00:15:18,766 --> 0:15:19,906
may destroy that scene.

548
00:15:21,026 --> 0:15:23,896
So, if we're going to take that

549
00:15:23,896 --> 0:15:28,036
scene away, but clearly the user

550
00:15:28,036 --> 0:15:29,246
thinks something is there.

551
00:15:29,246 --> 0:15:30,466
I mean your application is still

552
00:15:30,466 --> 0:15:31,416
in the switcher right where it

553
00:15:31,416 --> 0:15:32,096
was before.

554
00:15:33,686 --> 0:15:36,586
You need a way to understand

555
00:15:36,586 --> 0:15:38,086
what is actually in the switcher

556
00:15:39,116 --> 0:15:42,056
without having to rely on the

557
00:15:42,056 --> 0:15:44,066
actual concrete interfaces being

558
00:15:44,066 --> 0:15:44,976
suspended out of your

559
00:15:44,976 --> 0:15:45,586
application.

560
00:15:46,096 --> 0:15:48,066
And that's where SceneSession

561
00:15:48,066 --> 0:15:49,726
comes in.

562
00:15:50,486 --> 0:15:52,096
The SceneSession represents the

563
00:15:52,096 --> 0:15:53,856
persisted interface state that

564
00:15:53,856 --> 0:15:56,006
the user of your applications

565
00:15:56,416 --> 0:15:58,836
were doing last.

566
00:15:59,166 --> 0:16:00,316
Now, they have a defined system

567
00:15:59,166 --> 0:16:00,316
Now, they have a defined system

568
00:16:00,316 --> 0:16:00,566
role.

569
00:16:00,866 --> 0:16:02,416
This could be a standard

570
00:16:02,416 --> 0:16:04,056
application interface that you

571
00:16:04,056 --> 0:16:06,216
interact with on the display of

572
00:16:06,216 --> 0:16:08,236
the actual device, or could be

573
00:16:08,236 --> 0:16:09,246
for an external display.

574
00:16:09,246 --> 0:16:14,676
And every time a new window gets

575
00:16:14,676 --> 0:16:16,216
created on the system, your

576
00:16:16,216 --> 0:16:17,536
application is informed through

577
00:16:17,536 --> 0:16:19,436
the application delegate that a

578
00:16:19,436 --> 0:16:20,896
new session has been made.

579
00:16:21,766 --> 0:16:23,406
And every time one has been

580
00:16:23,406 --> 0:16:25,006
destroyed by the user, either

581
00:16:25,006 --> 0:16:26,546
through interactions with our

582
00:16:26,716 --> 0:16:29,786
APIs, or because they swiped up

583
00:16:29,786 --> 0:16:30,896
in the switcher and destroyed

584
00:16:30,896 --> 0:16:32,636
that space, you get informed

585
00:16:32,636 --> 0:16:34,546
that that session has been

586
00:16:34,546 --> 0:16:35,516
destroyed.

587
00:16:36,276 --> 0:16:37,826
And your UI scenes from the

588
00:16:37,826 --> 0:16:40,736
previous slide connect and

589
00:16:40,736 --> 0:16:42,706
disconnect from these sessions

590
00:16:42,906 --> 0:16:43,916
over the lifetime of your

591
00:16:43,916 --> 0:16:44,506
application.

592
00:16:45,306 --> 0:16:47,396
Now, this has some interesting

593
00:16:47,396 --> 0:16:48,506
effects with your application

594
00:16:48,506 --> 0:16:50,146
lifecycle as you might expect.

595
00:16:51,136 --> 0:16:54,526
To represent that, there is a

596
00:16:54,526 --> 0:16:57,156
handy chart we made up.

597
00:16:57,786 --> 0:16:58,766
We have three sessions in our

598
00:16:58,766 --> 0:17:00,566
application, which represents

599
00:16:58,766 --> 0:17:00,566
application, which represents

600
00:17:00,786 --> 0:17:02,036
three different spaces in the

601
00:17:02,036 --> 0:17:03,946
system that my application is

602
00:17:03,946 --> 0:17:04,945
showing its interface.

603
00:17:05,986 --> 0:17:07,556
And right now, they're

604
00:17:07,556 --> 0:17:08,266
disconnected.

605
00:17:08,266 --> 0:17:09,396
They're below that background

606
00:17:09,396 --> 0:17:09,606
line.

607
00:17:10,156 --> 0:17:12,536
So, my application just reports

608
00:17:12,536 --> 0:17:13,756
that its application state is

609
00:17:14,175 --> 0:17:15,195
background.

610
00:17:15,746 --> 0:17:17,536
Now, if I should activate one of

611
00:17:17,536 --> 0:17:19,116
the spaces that my session is

612
00:17:19,116 --> 0:17:23,826
on, the application state will

613
00:17:23,826 --> 0:17:25,836
go up and go all the way up to

614
00:17:25,836 --> 0:17:27,326
foreground active along with

615
00:17:27,326 --> 0:17:28,226
that connected scene.

616
00:17:29,596 --> 0:17:30,776
When I send that scene back to

617
00:17:30,776 --> 0:17:33,386
the background, the application

618
00:17:33,386 --> 0:17:35,466
state descends down with that

619
00:17:35,466 --> 0:17:35,706
scene.

620
00:17:37,006 --> 0:17:38,966
If I were to switch to any of

621
00:17:38,966 --> 0:17:40,916
the other two sessions, then my

622
00:17:40,916 --> 0:17:42,586
application state would remain

623
00:17:43,016 --> 0:17:44,666
at the foreground active state

624
00:17:44,896 --> 0:17:45,966
to represent the fact that the

625
00:17:45,966 --> 0:17:47,506
overall state of the application

626
00:17:47,506 --> 0:17:47,946
hasn't changed.

627
00:17:52,416 --> 0:17:53,546
When it comes to your

628
00:17:53,546 --> 0:17:54,896
application class and your

629
00:17:54,896 --> 0:17:56,936
application delegate class, we

630
00:17:57,306 --> 0:17:59,626
used to put the combination of

631
00:17:59,716 --> 0:18:00,976
the interface with the rest of

632
00:17:59,716 --> 0:18:00,976
the interface with the rest of

633
00:18:00,976 --> 0:18:03,646
the system, and the lifecycle in

634
00:18:03,646 --> 0:18:04,906
that ApplicationDelegate and

635
00:18:04,906 --> 0:18:05,906
Application object.

636
00:18:06,426 --> 0:18:07,506
This doesn't really work too

637
00:18:07,506 --> 0:18:08,176
well anymore.

638
00:18:09,336 --> 0:18:10,916
So, we split it up.

639
00:18:10,916 --> 0:18:13,736
We have your application which

640
00:18:13,736 --> 0:18:15,256
still represents the state of

641
00:18:15,316 --> 0:18:17,646
the system as a system process,

642
00:18:17,646 --> 0:18:19,756
and the ApplicationDelegate

643
00:18:19,756 --> 0:18:21,896
which gets events and delegate

644
00:18:21,896 --> 0:18:24,016
notifications about processes,

645
00:18:24,356 --> 0:18:27,196
things, and launching and

646
00:18:27,196 --> 0:18:28,896
terminating the app as a

647
00:18:29,406 --> 0:18:29,946
process.

648
00:18:30,476 --> 0:18:32,126
But now your scene actually

649
00:18:32,126 --> 0:18:33,486
encapsulates the UI state and

650
00:18:33,486 --> 0:18:34,096
full.

651
00:18:34,576 --> 0:18:35,766
Any questions you have about the

652
00:18:35,766 --> 0:18:37,816
status bar, you ask those to the

653
00:18:37,816 --> 0:18:38,326
scene now.

654
00:18:39,446 --> 0:18:41,616
And your SceneDelegate gets

655
00:18:41,616 --> 0:18:44,416
informed about opening up URLs

656
00:18:44,416 --> 0:18:46,706
in a particular context,

657
00:18:47,616 --> 0:18:49,236
returning from the background,

658
00:18:49,366 --> 0:18:50,716
going to foreground, et cetera.

659
00:18:50,796 --> 0:18:51,996
And of course, you have

660
00:18:51,996 --> 0:18:53,256
SceneSession which represents

661
00:18:53,256 --> 0:18:54,546
that persisted UI state.

662
00:18:55,926 --> 0:18:57,846
Now, you might think that this

663
00:18:57,846 --> 0:18:59,436
is a lot of complicated API.

664
00:19:00,816 --> 0:19:02,816
So, if you have code like this

665
00:19:02,816 --> 0:19:04,126
in your application right now,

666
00:19:04,706 --> 0:19:05,416
you're going have to make a

667
00:19:05,416 --> 0:19:07,446
really big change and move your

668
00:19:07,446 --> 0:19:08,866
implementation of these methods

669
00:19:10,026 --> 0:19:10,986
into these methods.

670
00:19:12,386 --> 0:19:15,336
For the most part, we've kept it

671
00:19:15,336 --> 0:19:16,486
as similar as we could.

672
00:19:16,806 --> 0:19:18,716
Application didn't finish

673
00:19:18,716 --> 0:19:21,236
launching, becomes willConnectTo

674
00:19:21,236 --> 0:19:21,616
session.

675
00:19:22,926 --> 0:19:24,816
EnterForeground is enter

676
00:19:24,816 --> 0:19:25,286
foreground.

677
00:19:25,286 --> 0:19:26,646
It's just on the scene now

678
00:19:26,646 --> 0:19:28,846
instead of the application, and

679
00:19:28,846 --> 0:19:30,206
so on.

680
00:19:31,826 --> 0:19:34,736
Now, there is a hitch here with

681
00:19:34,736 --> 0:19:35,446
state restoration.

682
00:19:35,856 --> 0:19:36,836
It's going to be really

683
00:19:36,836 --> 0:19:37,296
important.

684
00:19:37,916 --> 0:19:41,066
So, your users can look at the

685
00:19:41,066 --> 0:19:42,826
state of the switcher, go to a

686
00:19:42,826 --> 0:19:45,636
particular space, and then have

687
00:19:45,636 --> 0:19:46,876
their information come back

688
00:19:47,006 --> 0:19:48,306
exactly as they left it.

689
00:19:49,726 --> 0:19:52,096
So to help you with that, we've

690
00:19:52,096 --> 0:19:54,856
borrowed a little bit of API

691
00:19:55,116 --> 0:19:56,076
from the Handoff.

692
00:19:57,096 --> 0:19:58,636
And we represent

693
00:19:58,636 --> 0:19:59,856
stateRestoration as an

694
00:19:59,856 --> 0:20:00,876
NSUserActivity now.

695
00:19:59,856 --> 0:20:00,876
NSUserActivity now.

696
00:20:01,866 --> 0:20:02,996
You can put whatever information

697
00:20:02,996 --> 0:20:03,436
you wanted.

698
00:20:04,546 --> 0:20:06,376
And at various points in the

699
00:20:06,376 --> 0:20:08,356
lifecycle, you like, it will

700
00:20:08,356 --> 0:20:11,316
request that user activity from

701
00:20:11,316 --> 0:20:12,386
the SceneDelegate.

702
00:20:12,616 --> 0:20:15,186
And then, when you're seeing

703
00:20:15,186 --> 0:20:16,796
restores, will pass it right

704
00:20:16,796 --> 0:20:19,236
back in as the connection

705
00:20:19,936 --> 0:20:22,246
delegate callback.

706
00:20:22,246 --> 0:20:24,596
And should no scene actually

707
00:20:24,596 --> 0:20:26,626
exist for that particular

708
00:20:26,626 --> 0:20:28,616
session, you can access the

709
00:20:28,616 --> 0:20:29,806
stateRestorationActivity

710
00:20:29,806 --> 0:20:32,586
directly on the session so that

711
00:20:32,586 --> 0:20:33,876
should you do a background fetch

712
00:20:33,876 --> 0:20:35,456
and need to update a particular

713
00:20:35,456 --> 0:20:37,366
one, you can go and find which

714
00:20:37,366 --> 0:20:38,596
one you'd change data for.

715
00:20:38,836 --> 0:20:43,076
So, I'm going to give you a

716
00:20:43,076 --> 0:20:46,126
quick demo to show you what it's

717
00:20:46,126 --> 0:20:47,836
like to adopt this new API in

718
00:20:48,396 --> 0:20:49,296
your application.

719
00:20:56,326 --> 0:21:00,356
So, I have an application here

720
00:20:56,326 --> 0:21:00,356
So, I have an application here

721
00:21:00,356 --> 0:21:02,486
and it was authored by a good

722
00:21:02,486 --> 0:21:03,526
friend of mine and colleague on

723
00:21:03,526 --> 0:21:05,386
my team, John Ham.

724
00:21:05,386 --> 0:21:09,186
And he wrote what is, to me, one

725
00:21:09,186 --> 0:21:10,566
of my favorite apps ever.

726
00:21:11,236 --> 0:21:12,326
You'll see it in just a second

727
00:21:12,326 --> 0:21:13,706
when the simulator comes up, but

728
00:21:14,066 --> 0:21:16,916
it's fantastic.

729
00:21:16,916 --> 0:21:19,586
What you'll see when this boots

730
00:21:19,626 --> 0:21:22,816
is a fantastic gallery app that

731
00:21:22,816 --> 0:21:25,506
exercises all of collection view

732
00:21:25,506 --> 0:21:26,036
flow layout.

733
00:21:27,866 --> 0:21:29,596
But it's going to show a really

734
00:21:29,596 --> 0:21:30,286
important point.

735
00:21:30,286 --> 0:21:32,386
It's a nice charming

736
00:21:32,386 --> 0:21:33,036
application.

737
00:21:33,646 --> 0:21:36,346
And we're going to go from

738
00:21:36,346 --> 0:21:39,586
having just a single instance of

739
00:21:39,586 --> 0:21:42,056
it and bring multiple windows.

740
00:21:43,976 --> 0:21:45,716
Because when I use this

741
00:21:45,716 --> 0:21:49,266
application, I really want to be

742
00:21:49,266 --> 0:21:51,256
able to see more than one photo

743
00:21:51,256 --> 0:21:51,706
at a time.

744
00:21:51,826 --> 0:21:55,146
So we're just going to wait a

745
00:21:55,146 --> 0:21:55,836
little bit more for the

746
00:21:55,836 --> 0:21:56,766
simulator to boot up here.

747
00:21:56,766 --> 0:21:58,286
And here we go.

748
00:21:58,976 --> 0:22:03,936
[Applause] We can launch apps.

749
00:21:58,976 --> 0:22:03,936
[Applause] We can launch apps.

750
00:22:05,096 --> 0:22:06,486
As you can see, it is a

751
00:22:06,486 --> 0:22:07,816
marvelous application.

752
00:22:08,316 --> 0:22:10,476
And I can step in and view any

753
00:22:10,476 --> 0:22:13,836
of these photos and pop back

754
00:22:13,836 --> 0:22:13,916
out.

755
00:22:14,326 --> 0:22:17,296
Now, I can bring it up, and if I

756
00:22:17,296 --> 0:22:18,536
try to go into App Expose, I

757
00:22:18,536 --> 0:22:19,346
can't right here.

758
00:22:19,796 --> 0:22:20,696
And that's because this

759
00:22:20,696 --> 0:22:21,556
application doesn't have

760
00:22:21,556 --> 0:22:22,256
multi-window.

761
00:22:23,776 --> 0:22:25,736
So, the first step to

762
00:22:25,736 --> 0:22:29,876
implementing this is to go into

763
00:22:29,876 --> 0:22:30,356
Xcode.

764
00:22:30,786 --> 0:22:33,686
Right here in the General tab,

765
00:22:33,686 --> 0:22:36,546
we have this nice new checkbox

766
00:22:36,546 --> 0:22:37,496
labeled Supports multiple

767
00:22:37,496 --> 0:22:38,036
windows.

768
00:22:38,036 --> 0:22:40,176
You can take a guess what

769
00:22:40,176 --> 0:22:41,286
happens when I check this.

770
00:22:42,126 --> 0:22:45,216
We make a little edit in our

771
00:22:45,216 --> 0:22:48,036
info.plist, and if we jump to

772
00:22:48,036 --> 0:22:50,976
it, we can see that we have this

773
00:22:50,976 --> 0:22:52,696
new entry here called the

774
00:22:52,696 --> 0:22:55,066
Application Scene Manifest.

775
00:22:55,066 --> 0:22:57,506
This tells the system that the

776
00:22:57,506 --> 0:23:00,256
application supports the new

777
00:22:57,506 --> 0:23:00,256
application supports the new

778
00:23:00,256 --> 0:23:03,296
lifecycle interfaces, and we can

779
00:23:03,296 --> 0:23:06,596
declare statically what

780
00:23:06,596 --> 0:23:07,886
interfaces for which type of

781
00:23:07,886 --> 0:23:09,326
roles we want to use.

782
00:23:10,096 --> 0:23:12,906
Now in this case, I've prebaked

783
00:23:12,906 --> 0:23:14,986
a info.plist entry for you.

784
00:23:15,046 --> 0:23:15,846
So we're going to get rid of

785
00:23:15,846 --> 0:23:17,006
that.

786
00:23:17,376 --> 0:23:23,986
And now we have this right here.

787
00:23:24,316 --> 0:23:26,716
So, we've made this and this has

788
00:23:26,716 --> 0:23:28,136
already moved over our existing

789
00:23:28,136 --> 0:23:28,766
storyboard.

790
00:23:29,196 --> 0:23:32,496
And we've had a very, very basic

791
00:23:32,496 --> 0:23:34,456
SceneDelegate class that we have

792
00:23:34,456 --> 0:23:34,946
right here.

793
00:23:34,946 --> 0:23:36,866
And all this does is declare

794
00:23:36,956 --> 0:23:38,856
just a window, a really, really

795
00:23:38,856 --> 0:23:40,846
basic template class.

796
00:23:41,456 --> 0:23:42,496
We build and run.

797
00:23:49,036 --> 0:23:50,456
And we're right back where we

798
00:23:50,456 --> 0:23:52,786
started, which is good.

799
00:23:52,786 --> 0:23:55,506
But now --

800
00:24:02,616 --> 0:24:04,226
So if I could access the icon in

801
00:24:04,226 --> 0:24:05,316
the dock, I will be able to drag

802
00:24:05,316 --> 0:24:06,846
it up and move it over to the

803
00:24:06,846 --> 0:24:08,886
side of the iPad interface and

804
00:24:08,886 --> 0:24:10,436
create a new window, which is

805
00:24:10,436 --> 0:24:11,676
what that info.plist allows us

806
00:24:11,816 --> 0:24:12,286
to do.

807
00:24:13,216 --> 0:24:16,256
But unfortunately, if I were to

808
00:24:16,256 --> 0:24:18,366
go back to the home screen, let

809
00:24:19,436 --> 0:24:21,966
the application terminate, and

810
00:24:21,966 --> 0:24:26,866
then launch it again, we don't

811
00:24:26,866 --> 0:24:28,316
quite get the same level of

812
00:24:28,316 --> 0:24:29,736
state restoration we did do

813
00:24:29,736 --> 0:24:31,406
before as you can see right

814
00:24:31,436 --> 0:24:31,976
here.

815
00:24:37,236 --> 0:24:40,556
So to get that back, we need to

816
00:24:40,556 --> 0:24:42,826
implement a few things, which is

817
00:24:42,826 --> 0:24:42,996
OK.

818
00:24:42,996 --> 0:24:46,146
Now, like I said, to implement

819
00:24:46,146 --> 0:24:48,776
stateRestoration here, we need

820
00:24:48,856 --> 0:24:50,566
to take our existing

821
00:24:51,076 --> 0:24:52,996
stateRestorationActivity that we

822
00:24:52,996 --> 0:24:53,426
have.

823
00:24:53,616 --> 0:24:56,336
Windows return it from the new

824
00:24:56,526 --> 0:24:58,746
stateRestorationActivity for

825
00:24:58,746 --> 0:25:00,576
scene, delegate call.

826
00:24:58,746 --> 0:25:00,576
scene, delegate call.

827
00:25:00,746 --> 0:25:03,936
And way deep in the

828
00:25:03,936 --> 0:25:06,306
implementation here, we've been

829
00:25:06,306 --> 0:25:07,546
setting it on the application

830
00:25:07,546 --> 0:25:09,336
instance, which is not really

831
00:25:09,336 --> 0:25:10,186
what we want anymore.

832
00:25:13,996 --> 0:25:16,866
We want to set it on to local

833
00:25:17,106 --> 0:25:19,206
windows scene like so.

834
00:25:19,206 --> 0:25:24,086
And then clear it out where we

835
00:25:24,086 --> 0:25:25,256
cleared it out before.

836
00:25:26,516 --> 0:25:29,306
So now, we're returning our user

837
00:25:29,306 --> 0:25:30,206
activity so we can do

838
00:25:30,206 --> 0:25:30,926
stateRestoration.

839
00:25:32,136 --> 0:25:33,686
Let's try it.

840
00:25:36,256 --> 0:25:38,146
So what you'll notice here is

841
00:25:38,146 --> 0:25:39,596
that we're not quite done

842
00:25:39,646 --> 0:25:40,586
implementing the

843
00:25:40,586 --> 0:25:42,346
stateRestoration just yet.

844
00:25:42,536 --> 0:25:44,426
We need to do one more thing

845
00:25:44,426 --> 0:25:45,366
when our scene connects.

846
00:25:51,196 --> 0:25:52,526
When the scene connects to the

847
00:25:52,526 --> 0:25:54,946
SceneSession, we get options and

848
00:25:54,946 --> 0:25:56,076
we get the session reference.

849
00:25:56,546 --> 0:25:58,106
Now, in this template that I

850
00:25:58,106 --> 0:25:59,526
pulled out, we're already

851
00:25:59,526 --> 0:26:01,596
looking for any user activities

852
00:25:59,526 --> 0:26:01,596
looking for any user activities

853
00:26:01,596 --> 0:26:03,246
that we have gotten through

854
00:26:03,246 --> 0:26:04,696
Handoff or any other system

855
00:26:04,696 --> 0:26:05,946
facilities that vend us user

856
00:26:05,946 --> 0:26:06,446
activities.

857
00:26:06,806 --> 0:26:10,056
We want to prefer those user

858
00:26:10,056 --> 0:26:11,536
activities because that's what

859
00:26:11,536 --> 0:26:13,096
the user actually did.

860
00:26:13,966 --> 0:26:21,166
But the stateRestorationActivity

861
00:26:21,476 --> 0:26:22,496
is special and it's on the

862
00:26:22,496 --> 0:26:22,896
session.

863
00:26:23,296 --> 0:26:24,246
So if you don't have one of

864
00:26:24,246 --> 0:26:26,036
those activities, we want to use

865
00:26:26,036 --> 0:26:27,206
our stateRestorationActivity.

866
00:26:28,146 --> 0:26:31,196
So now, when we build and run,

867
00:26:32,436 --> 0:26:34,096
we restore back when the

868
00:26:34,096 --> 0:26:35,446
application is relaunched.

869
00:26:37,906 --> 0:26:40,626
So that's how you adopt multiple

870
00:26:40,626 --> 0:26:42,476
windows in your application.

871
00:26:42,756 --> 0:26:43,796
It's pretty straightforward.

872
00:26:43,796 --> 0:26:44,836
You can use most of your

873
00:26:44,836 --> 0:26:46,156
existing application delegate

874
00:26:46,156 --> 0:26:47,596
logic and just move it to the

875
00:26:47,596 --> 0:26:50,706
scene, and it will run there.

876
00:26:51,446 --> 0:26:54,406
Now, as Ken mentioned, the

877
00:26:54,736 --> 0:26:57,106
preferred way of interfacing

878
00:26:57,106 --> 0:26:58,586
with these drag and drop items

879
00:26:59,266 --> 0:27:02,046
is with drag and drop.

880
00:26:59,266 --> 0:27:02,046
is with drag and drop.

881
00:27:02,226 --> 0:27:05,036
And there are a couple of ways

882
00:27:05,036 --> 0:27:06,886
we can achieve this if you use

883
00:27:06,886 --> 0:27:09,896
existing universal links or

884
00:27:09,896 --> 0:27:12,046
references to file URLs that

885
00:27:12,046 --> 0:27:13,236
your application declares its

886
00:27:13,236 --> 0:27:15,126
own in info.plist, those will

887
00:27:15,126 --> 0:27:15,536
just work.

888
00:27:15,536 --> 0:27:17,436
But if you want to do something

889
00:27:17,436 --> 0:27:20,476
more custom, once again, you can

890
00:27:20,476 --> 0:27:21,726
use NSUserActivity.

891
00:27:22,396 --> 0:27:23,756
You can include that in your

892
00:27:23,756 --> 0:27:25,026
existing DragItem's

893
00:27:25,026 --> 0:27:26,986
NSItemProvider as a different

894
00:27:26,986 --> 0:27:28,066
object representation.

895
00:27:29,176 --> 0:27:30,456
When you drag it off to the rest

896
00:27:30,456 --> 0:27:32,306
of the system, you'll get hit

897
00:27:32,306 --> 0:27:34,256
targets and drop points at

898
00:27:34,406 --> 0:27:36,006
system defined locations just

899
00:27:36,006 --> 0:27:38,276
like any other app icon drag.

900
00:27:39,856 --> 0:27:42,506
And now to talk about the next

901
00:27:42,506 --> 0:27:44,046
steps is my colleague James.

902
00:27:45,976 --> 0:27:46,596
Thank you.

903
00:27:47,516 --> 0:27:51,996
[ Applause ]

904
00:27:52,496 --> 0:27:52,936
&gt;&gt; Thanks, Steve.

905
00:27:53,396 --> 0:27:57,516
So to wrap up this talk, I have

906
00:27:57,516 --> 0:27:58,996
just three more things to talk

907
00:27:58,996 --> 0:27:59,336
about.

908
00:27:59,966 --> 0:28:01,366
The first is going to be a

909
00:27:59,966 --> 0:28:01,366
The first is going to be a

910
00:28:01,366 --> 0:28:02,166
deeper look at the

911
00:28:02,166 --> 0:28:03,846
UISceneSession API.

912
00:28:04,946 --> 0:28:06,306
Next, we're going to cover some

913
00:28:06,306 --> 0:28:08,356
case studies about common issues

914
00:28:08,356 --> 0:28:09,836
that we think you might see when

915
00:28:09,836 --> 0:28:11,016
you start duplicating your

916
00:28:11,016 --> 0:28:12,266
application's interface.

917
00:28:13,096 --> 0:28:14,726
And lastly, I just want to talk

918
00:28:14,726 --> 0:28:15,776
briefly about some of the

919
00:28:15,776 --> 0:28:17,526
deprecations that we've added to

920
00:28:17,526 --> 0:28:19,416
UI application to support this

921
00:28:19,416 --> 0:28:20,226
new lifecycle.

922
00:28:20,896 --> 0:28:22,846
So let's get started by going

923
00:28:22,846 --> 0:28:24,426
over what a scene session is.

924
00:28:26,286 --> 0:28:27,706
Going back to this diagram from

925
00:28:27,706 --> 0:28:29,686
earlier, you can see in the App

926
00:28:29,686 --> 0:28:31,806
Switcher, we have four windows

927
00:28:31,996 --> 0:28:32,856
of our application.

928
00:28:33,096 --> 0:28:34,226
And that is how the user will

929
00:28:34,226 --> 0:28:35,396
think about this, as four

930
00:28:35,396 --> 0:28:35,886
windows.

931
00:28:36,146 --> 0:28:37,806
But I want to encourage you as

932
00:28:37,806 --> 0:28:39,486
developers to think about these

933
00:28:39,586 --> 0:28:41,456
as scenes and scene sessions.

934
00:28:41,846 --> 0:28:43,426
And that distinction is

935
00:28:43,426 --> 0:28:45,506
important because while the

936
00:28:45,506 --> 0:28:47,016
windows that the user sees in

937
00:28:47,016 --> 0:28:48,826
the App Switchers will always be

938
00:28:48,826 --> 0:28:50,736
there as snapshots, the scenes

939
00:28:50,736 --> 0:28:52,716
themselves may not be loaded in

940
00:28:52,716 --> 0:28:53,556
your application.

941
00:28:54,536 --> 0:28:58,166
They can come and go as needed,

942
00:28:58,656 --> 0:29:00,036
but the sessions will always be

943
00:28:58,656 --> 0:29:00,036
but the sessions will always be

944
00:29:00,036 --> 0:29:00,796
available to you.

945
00:29:01,156 --> 0:29:02,946
And because of this, we use the

946
00:29:02,946 --> 0:29:05,116
session for programmatic control

947
00:29:05,116 --> 0:29:06,196
over the windows.

948
00:29:06,576 --> 0:29:09,156
So I think these are some of the

949
00:29:09,156 --> 0:29:10,516
most exciting API that we're

950
00:29:10,516 --> 0:29:11,996
adding to multitasking this year

951
00:29:12,376 --> 0:29:14,136
because they allow you to create

952
00:29:14,136 --> 0:29:15,536
new windows programmatically,

953
00:29:16,126 --> 0:29:18,136
update the snapshots in the App

954
00:29:18,136 --> 0:29:20,356
Switcher, and close them on

955
00:29:20,356 --> 0:29:21,616
response to things like a user

956
00:29:21,616 --> 0:29:23,436
gesture, or if the document that

957
00:29:23,436 --> 0:29:24,616
they represent has expired in

958
00:29:24,616 --> 0:29:25,056
some way.

959
00:29:25,556 --> 0:29:27,676
So to go over when and how you

960
00:29:27,676 --> 0:29:29,336
would use these, let's look at

961
00:29:29,336 --> 0:29:30,016
some sample code.

962
00:29:30,016 --> 0:29:32,486
The first of these is the

963
00:29:32,546 --> 0:29:34,616
requestSceneSessionActivation

964
00:29:34,616 --> 0:29:34,926
API.

965
00:29:35,756 --> 0:29:37,296
And what this lets you do is

966
00:29:37,396 --> 0:29:39,416
bring forward either an existing

967
00:29:39,416 --> 0:29:40,306
or a new scene of your

968
00:29:40,306 --> 0:29:40,936
application.

969
00:29:41,836 --> 0:29:43,116
In this example, I'm trying to

970
00:29:43,116 --> 0:29:43,946
open a document.

971
00:29:44,416 --> 0:29:45,536
And I first check if the

972
00:29:45,536 --> 0:29:47,436
document has an existing scene

973
00:29:47,576 --> 0:29:48,716
somewhere in my application.

974
00:29:48,866 --> 0:29:50,616
And if it does, I pass it to

975
00:29:50,616 --> 0:29:52,116
this API and it will be brought

976
00:29:52,116 --> 0:29:52,586
forward.

977
00:29:52,826 --> 0:29:54,556
But if this document isn't open

978
00:29:54,556 --> 0:29:56,216
yet, I can create an

979
00:29:56,216 --> 0:29:58,116
NSUserActivity that references

980
00:29:58,116 --> 0:29:59,646
the context I need to open it

981
00:29:59,646 --> 0:30:01,726
later and pass nil to create a

982
00:29:59,646 --> 0:30:01,726
later and pass nil to create a

983
00:30:01,726 --> 0:30:01,976
new scene.

984
00:30:06,196 --> 0:30:06,766
Next is the

985
00:30:06,766 --> 0:30:08,716
requestSceneSessionRefresh API.

986
00:30:08,716 --> 0:30:10,706
You'd want to use this in the

987
00:30:10,706 --> 0:30:12,486
context where you may be

988
00:30:12,486 --> 0:30:14,006
received a push notification

989
00:30:14,006 --> 0:30:16,616
about a new message or in an app

990
00:30:16,616 --> 0:30:18,326
like Calendar when an event has

991
00:30:18,326 --> 0:30:18,836
changed.

992
00:30:19,476 --> 0:30:21,226
When you call this method, UIKit

993
00:30:21,226 --> 0:30:22,796
will schedule an update at some

994
00:30:22,796 --> 0:30:24,216
point in the future where it

995
00:30:24,216 --> 0:30:25,436
will connect your scene in the

996
00:30:25,436 --> 0:30:26,086
background.

997
00:30:26,556 --> 0:30:27,546
You'll have a chance to update

998
00:30:27,546 --> 0:30:29,366
the UI, a new snapshot will be

999
00:30:29,366 --> 0:30:31,416
taken, and then that will be

1000
00:30:31,416 --> 0:30:32,996
saved into the App Switcher for

1001
00:30:32,996 --> 0:30:33,326
later.

1002
00:30:33,966 --> 0:30:35,256
You can also use this to update

1003
00:30:35,256 --> 0:30:36,436
the stateRestoration user

1004
00:30:36,436 --> 0:30:38,346
activity that Steve talked

1005
00:30:40,036 --> 0:30:40,366
about.

1006
00:30:40,576 --> 0:30:41,586
Lastly, is the

1007
00:30:41,586 --> 0:30:43,226
requestSceneSessionDestruction

1008
00:30:43,226 --> 0:30:45,276
API, which you can use to close

1009
00:30:45,276 --> 0:30:45,686
a scene.

1010
00:30:46,606 --> 0:30:47,786
What's really cool about this is

1011
00:30:47,786 --> 0:30:48,846
that it also comes with the

1012
00:30:48,846 --> 0:30:50,656
scene -- this options object

1013
00:30:50,876 --> 0:30:52,336
that lets you pick a semantic

1014
00:30:52,336 --> 0:30:54,286
animation for how the scene

1015
00:30:54,286 --> 0:30:55,076
should be closed.

1016
00:30:55,966 --> 0:30:57,026
You can see this in Mail with

1017
00:30:57,026 --> 0:30:57,976
the Compose window.

1018
00:30:58,396 --> 0:30:59,796
When the user sends a message,

1019
00:31:00,096 --> 0:31:01,426
the sheet animates up off

1020
00:31:01,426 --> 0:31:01,856
screen.

1021
00:31:02,156 --> 0:31:03,366
And if the user saves it as a

1022
00:31:03,366 --> 0:31:05,256
draft, it'll slide down to

1023
00:31:05,256 --> 0:31:06,336
remind them that it's been saved

1024
00:31:06,336 --> 0:31:06,796
for later.

1025
00:31:07,916 --> 0:31:08,746
You can use these same

1026
00:31:08,746 --> 0:31:10,056
animations with your scenes and

1027
00:31:10,056 --> 0:31:12,416
your apps.

1028
00:31:12,776 --> 0:31:14,896
Now, window management isn't all

1029
00:31:14,896 --> 0:31:16,116
that the session can do.

1030
00:31:16,716 --> 0:31:17,736
We've also added state

1031
00:31:17,736 --> 0:31:19,516
restoration to it, as shown with

1032
00:31:19,516 --> 0:31:20,626
the NSUserActivity for

1033
00:31:20,626 --> 0:31:21,496
stateRestoration.

1034
00:31:22,266 --> 0:31:23,636
We think for lots of apps, this

1035
00:31:23,636 --> 0:31:24,936
is going to be a really simple

1036
00:31:24,936 --> 0:31:26,406
and easy way to start saving

1037
00:31:26,406 --> 0:31:27,906
your state, especially if you've

1038
00:31:27,906 --> 0:31:29,636
already invested in technologies

1039
00:31:29,716 --> 0:31:30,466
like Handoff.

1040
00:31:31,486 --> 0:31:33,306
But we also realize that many of

1041
00:31:33,306 --> 0:31:34,566
you have apps with existing

1042
00:31:34,566 --> 0:31:35,946
state restoration logic and

1043
00:31:35,946 --> 0:31:37,476
maybe you don't want to work to

1044
00:31:37,476 --> 0:31:38,096
integrate it with

1045
00:31:38,126 --> 0:31:39,026
NSUserActivity.

1046
00:31:39,246 --> 0:31:40,776
And for that, we have a

1047
00:31:40,776 --> 0:31:42,446
persistentIdentifier property.

1048
00:31:42,896 --> 0:31:45,416
Now, all this is is a string

1049
00:31:45,416 --> 0:31:46,756
that is generated by the system.

1050
00:31:47,406 --> 0:31:48,416
You can feel free to write it

1051
00:31:48,416 --> 0:31:50,706
down into any databases or any

1052
00:31:50,706 --> 0:31:52,096
files in your apps container

1053
00:31:52,096 --> 0:31:53,306
that you use for state

1054
00:31:53,306 --> 0:31:53,916
restoration.

1055
00:31:54,536 --> 0:31:55,726
And it will be the same

1056
00:31:55,726 --> 0:31:57,546
identifier for the same scene

1057
00:31:57,846 --> 0:31:59,236
every time your app is launched,

1058
00:31:59,376 --> 0:32:01,046
even across backups and restores

1059
00:31:59,376 --> 0:32:01,046
even across backups and restores

1060
00:32:01,046 --> 0:32:01,776
of devices.

1061
00:32:04,026 --> 0:32:05,736
Lastly, there's a userInfo

1062
00:32:05,736 --> 0:32:07,136
dictionary, which is great for

1063
00:32:07,136 --> 0:32:08,646
storing small amounts of data,

1064
00:32:08,916 --> 0:32:10,536
such as per scene

1065
00:32:10,596 --> 0:32:11,526
customizations.

1066
00:32:12,156 --> 0:32:13,356
You might use this for something

1067
00:32:13,356 --> 0:32:14,786
like whether a sidebar is being

1068
00:32:14,786 --> 0:32:17,046
shown, or the last used color at

1069
00:32:17,046 --> 0:32:17,696
an ink picker.

1070
00:32:18,366 --> 0:32:19,496
Really a great way to find

1071
00:32:19,496 --> 0:32:20,666
things to put in this might be

1072
00:32:20,666 --> 0:32:21,926
to go over data that you're

1073
00:32:21,956 --> 0:32:23,436
already storing in your user

1074
00:32:23,436 --> 0:32:25,146
defaults, because some of those

1075
00:32:25,146 --> 0:32:26,446
things you might not actually

1076
00:32:26,446 --> 0:32:27,536
want to be global to your whole

1077
00:32:27,536 --> 0:32:27,746
app.

1078
00:32:30,226 --> 0:32:32,256
So, that's the new API for

1079
00:32:32,456 --> 0:32:33,446
UISceneSession.

1080
00:32:34,026 --> 0:32:35,186
But next I want to talk about

1081
00:32:35,186 --> 0:32:36,426
what your next step should be

1082
00:32:36,426 --> 0:32:37,986
after you built and ran your app

1083
00:32:38,206 --> 0:32:39,746
with Xcode supporting multiple

1084
00:32:39,746 --> 0:32:40,196
scenes.

1085
00:32:40,606 --> 0:32:41,676
And that's of course debugging

1086
00:32:41,886 --> 0:32:41,976
it.

1087
00:32:43,806 --> 0:32:46,146
Now, there's lots of code in

1088
00:32:46,146 --> 0:32:47,936
your app that is very custom,

1089
00:32:47,936 --> 0:32:49,776
and we've done our best to make

1090
00:32:49,776 --> 0:32:50,866
the framework help you along the

1091
00:32:50,866 --> 0:32:51,136
way.

1092
00:32:51,836 --> 0:32:53,676
But we can't really predict if

1093
00:32:53,676 --> 0:32:54,636
there's any changes you'll need

1094
00:32:54,636 --> 0:32:55,926
to make or what they might be.

1095
00:32:57,156 --> 0:32:58,846
But we think that there probably

1096
00:32:58,846 --> 0:32:59,176
are.

1097
00:32:59,176 --> 0:33:00,096
And we do want you to think

1098
00:32:59,176 --> 0:33:00,096
And we do want you to think

1099
00:33:00,096 --> 0:33:00,896
about the code that you've

1100
00:33:00,896 --> 0:33:02,786
written in the past.

1101
00:33:02,786 --> 0:33:04,716
Adopting this new lifecycle and

1102
00:33:04,716 --> 0:33:06,166
especially adopting multiple

1103
00:33:06,166 --> 0:33:07,766
scenes might have changed

1104
00:33:07,766 --> 0:33:09,166
assumptions that you made about

1105
00:33:09,166 --> 0:33:10,706
how your application functioned.

1106
00:33:11,886 --> 0:33:13,146
There's no longer just one

1107
00:33:13,146 --> 0:33:14,516
interface, and there might no

1108
00:33:14,516 --> 0:33:16,136
longer be just one instance of a

1109
00:33:16,136 --> 0:33:16,836
view controller.

1110
00:33:17,416 --> 0:33:20,886
Of course, if you have automated

1111
00:33:20,886 --> 0:33:22,036
test, that's great.

1112
00:33:22,756 --> 0:33:23,956
Those tests might continue to

1113
00:33:23,956 --> 0:33:25,326
pass though, even when your

1114
00:33:25,326 --> 0:33:26,886
users might see real bugs.

1115
00:33:27,386 --> 0:33:28,496
And that's again because of

1116
00:33:28,496 --> 0:33:29,956
these changes to the assumptions

1117
00:33:29,956 --> 0:33:30,796
that you might have made.

1118
00:33:31,266 --> 0:33:32,336
So the best way that you can

1119
00:33:32,336 --> 0:33:33,856
find these problems before your

1120
00:33:33,856 --> 0:33:35,426
customers do is just to play

1121
00:33:35,426 --> 0:33:36,886
with your app, play with it,

1122
00:33:36,986 --> 0:33:38,546
you're having two copies of it

1123
00:33:38,546 --> 0:33:39,226
out at once.

1124
00:33:39,586 --> 0:33:40,786
And it's a really great way to

1125
00:33:40,916 --> 0:33:42,216
very quickly see when something

1126
00:33:42,216 --> 0:33:43,406
doesn't quite line up like you

1127
00:33:43,406 --> 0:33:45,126
meant it to.

1128
00:33:45,856 --> 0:33:47,146
Now, I've prepared a couple of

1129
00:33:47,146 --> 0:33:48,476
case studies to highlight

1130
00:33:49,126 --> 0:33:50,606
prototypical bugs that you might

1131
00:33:50,686 --> 0:33:50,966
see.

1132
00:33:51,756 --> 0:33:52,996
But there's this common theme to

1133
00:33:52,996 --> 0:33:55,056
both of them, and the theme is

1134
00:33:55,056 --> 0:33:57,066
state, specifically, shared

1135
00:33:57,066 --> 0:33:57,346
state.

1136
00:33:58,616 --> 0:33:59,736
Now, I'm willing to bet that

1137
00:33:59,736 --> 0:34:01,156
almost all of you have used one

1138
00:33:59,736 --> 0:34:01,156
almost all of you have used one

1139
00:34:01,156 --> 0:34:02,036
of these classes in an

1140
00:34:02,036 --> 0:34:03,436
application before because

1141
00:34:03,796 --> 0:34:05,036
they're really common and really

1142
00:34:05,036 --> 0:34:06,336
useful Cocoa classes.

1143
00:34:06,586 --> 0:34:08,126
And they're also really

1144
00:34:08,126 --> 0:34:09,266
convenient because of that

1145
00:34:09,266 --> 0:34:10,166
singleton property.

1146
00:34:10,815 --> 0:34:13,196
You can go be in a model object

1147
00:34:13,196 --> 0:34:14,686
deep in your app and reach up to

1148
00:34:14,686 --> 0:34:16,666
the UI device singleton and read

1149
00:34:16,666 --> 0:34:17,946
off some configuration about

1150
00:34:17,946 --> 0:34:18,835
what kind of device you're

1151
00:34:18,835 --> 0:34:19,826
running on, and that's really

1152
00:34:19,826 --> 0:34:20,376
powerful.

1153
00:34:21,216 --> 0:34:22,936
But this pattern also can have

1154
00:34:22,936 --> 0:34:23,505
problems.

1155
00:34:23,896 --> 0:34:25,326
Because of that loose coupling

1156
00:34:25,326 --> 0:34:27,315
between layers and data, you can

1157
00:34:27,315 --> 0:34:28,866
kind of lose track of where data

1158
00:34:28,866 --> 0:34:30,446
is flowing in your application,

1159
00:34:30,636 --> 0:34:32,005
who is reading it and how.

1160
00:34:32,606 --> 0:34:34,476
But like I said, these are very,

1161
00:34:34,476 --> 0:34:35,755
very powerful patterns because

1162
00:34:35,755 --> 0:34:36,626
they're so convenient.

1163
00:34:36,976 --> 0:34:38,536
And in fact, I expect most of

1164
00:34:38,536 --> 0:34:39,536
you have written your own

1165
00:34:39,536 --> 0:34:40,706
singletons at some point.

1166
00:34:41,606 --> 0:34:43,076
You might be using something

1167
00:34:43,076 --> 0:34:44,576
that isn't quite a singleton

1168
00:34:44,576 --> 0:34:47,235
like a global variable, or maybe

1169
00:34:47,235 --> 0:34:48,306
you're piggybacking on an

1170
00:34:48,306 --> 0:34:50,096
existing singleton in the kit.

1171
00:34:51,005 --> 0:34:52,966
Or maybe you're using the file

1172
00:34:52,966 --> 0:34:54,525
system, which is itself just one

1173
00:34:54,525 --> 0:34:56,416
big vault of data that's shared

1174
00:34:56,525 --> 0:34:58,116
by your app.

1175
00:34:58,116 --> 0:34:59,156
Now, I'm not here to tell you

1176
00:34:59,156 --> 0:35:00,226
that you need to get rid of all

1177
00:34:59,156 --> 0:35:00,226
that you need to get rid of all

1178
00:35:00,226 --> 0:35:01,466
your singletons or that shared

1179
00:35:01,466 --> 0:35:03,366
state is bad, but I do want to

1180
00:35:03,366 --> 0:35:05,006
encourage you to think about how

1181
00:35:05,006 --> 0:35:06,346
you're sharing it, and whether

1182
00:35:06,346 --> 0:35:07,436
you should be sharing that.

1183
00:35:08,106 --> 0:35:09,366
There's lots of other advantages

1184
00:35:09,366 --> 0:35:11,036
to factoring your data out, such

1185
00:35:11,036 --> 0:35:12,496
as an easier time with unit

1186
00:35:12,496 --> 0:35:12,856
tests.

1187
00:35:13,886 --> 0:35:16,136
So let's get into those case

1188
00:35:16,136 --> 0:35:16,456
studies.

1189
00:35:16,886 --> 0:35:18,696
The first one rolls around a

1190
00:35:18,786 --> 0:35:19,556
state restoration.

1191
00:35:20,726 --> 0:35:23,246
And to work on it, I came up

1192
00:35:23,246 --> 0:35:24,326
with this sample app before the

1193
00:35:24,326 --> 0:35:24,736
talk.

1194
00:35:25,416 --> 0:35:26,596
Now, it's just a nice little

1195
00:35:26,596 --> 0:35:27,656
sketch pad editor.

1196
00:35:27,656 --> 0:35:29,056
You can type some texts into it,

1197
00:35:29,296 --> 0:35:30,286
you quit and relaunch it, and

1198
00:35:30,286 --> 0:35:30,956
you see it again.

1199
00:35:31,376 --> 0:35:32,936
And I follow the steps from the

1200
00:35:32,936 --> 0:35:35,046
demo and I enabled support from

1201
00:35:35,046 --> 0:35:36,176
multiple screens, and it's

1202
00:35:36,176 --> 0:35:36,906
looking pretty good.

1203
00:35:37,716 --> 0:35:39,396
But when I quit and relaunch the

1204
00:35:39,396 --> 0:35:40,956
app, this happens.

1205
00:35:41,526 --> 0:35:43,026
I now I have the same content in

1206
00:35:43,026 --> 0:35:44,626
both sides of my application and

1207
00:35:44,626 --> 0:35:46,026
that's not really what I wanted.

1208
00:35:46,376 --> 0:35:48,616
So I took a look at my database

1209
00:35:49,086 --> 0:35:50,326
and the problem was pretty

1210
00:35:50,326 --> 0:35:51,096
straightforward really.

1211
00:35:51,646 --> 0:35:53,496
I was saving out this text file

1212
00:35:53,566 --> 0:35:55,586
as a file in my apps container,

1213
00:35:55,886 --> 0:35:57,406
but I was only saving it to one

1214
00:35:57,406 --> 0:35:57,966
location.

1215
00:35:58,406 --> 0:36:00,006
So every time either side of my

1216
00:35:58,406 --> 0:36:00,006
So every time either side of my

1217
00:36:00,006 --> 0:36:01,846
application saved data, it

1218
00:36:01,846 --> 0:36:03,036
overwrite whatever the other one

1219
00:36:03,036 --> 0:36:03,546
had saved.

1220
00:36:04,586 --> 0:36:05,826
Now, there's nothing that you

1221
00:36:05,826 --> 0:36:07,076
UIKit can really do for free

1222
00:36:07,076 --> 0:36:08,376
here because this is code in my

1223
00:36:08,376 --> 0:36:08,666
app.

1224
00:36:09,226 --> 0:36:10,876
So I had to go and do two

1225
00:36:10,876 --> 0:36:11,346
things.

1226
00:36:11,776 --> 0:36:12,936
I had to correlate that

1227
00:36:13,056 --> 0:36:14,496
persistent identifier for the

1228
00:36:14,496 --> 0:36:16,086
scene session with the note for

1229
00:36:16,086 --> 0:36:16,766
the right scene.

1230
00:36:16,986 --> 0:36:18,546
And then I had to update my

1231
00:36:18,546 --> 0:36:19,646
logic so that I could save

1232
00:36:19,646 --> 0:36:21,186
multiple files instead of just

1233
00:36:21,186 --> 0:36:21,536
one.

1234
00:36:22,326 --> 0:36:24,196
Now if you're going this route

1235
00:36:24,456 --> 0:36:25,636
and doing manual state

1236
00:36:25,636 --> 0:36:27,006
restoration, there's just one

1237
00:36:27,006 --> 0:36:28,056
more thing I want you to think

1238
00:36:28,056 --> 0:36:29,806
about and that's cleaning up the

1239
00:36:29,806 --> 0:36:30,136
data.

1240
00:36:31,496 --> 0:36:33,036
When UIKit manages that

1241
00:36:33,036 --> 0:36:35,086
NSUserActivity for you, it will

1242
00:36:35,086 --> 0:36:36,476
take care of where to write it

1243
00:36:37,016 --> 0:36:38,366
in once you remove it for you.

1244
00:36:38,866 --> 0:36:40,286
But if you're receiving other

1245
00:36:40,286 --> 0:36:42,676
large files tied to the lifetime

1246
00:36:42,676 --> 0:36:44,156
of a scene in your app, then

1247
00:36:44,156 --> 0:36:45,226
you'll want to clean them up

1248
00:36:45,226 --> 0:36:46,946
using the new UI application

1249
00:36:47,006 --> 0:36:48,506
diDiscardSceneSessions API.

1250
00:36:49,296 --> 0:36:51,386
This gets called with a set of

1251
00:36:51,436 --> 0:36:52,166
sceneSessions.

1252
00:36:52,916 --> 0:36:55,116
And it's a great time to remove

1253
00:36:55,116 --> 0:36:56,786
any data that really doesn't

1254
00:36:56,786 --> 0:36:57,786
need to exist anymore.

1255
00:36:58,636 --> 0:37:00,216
And a document-based app like

1256
00:36:58,636 --> 0:37:00,216
And a document-based app like

1257
00:37:00,216 --> 0:37:01,276
pages, you wouldn't want to

1258
00:37:01,276 --> 0:37:02,126
delete the document.

1259
00:37:02,176 --> 0:37:03,946
That stays in the file system.

1260
00:37:04,536 --> 0:37:06,806
But configuration or preferences

1261
00:37:07,416 --> 0:37:08,346
aren't needed anymore.

1262
00:37:09,326 --> 0:37:10,396
This method will be called

1263
00:37:10,396 --> 0:37:11,796
immediately when the user swipes

1264
00:37:11,796 --> 0:37:13,976
up on -- in scene of your app in

1265
00:37:14,046 --> 0:37:15,146
the App Switcher if your

1266
00:37:15,146 --> 0:37:16,206
application is running.

1267
00:37:16,556 --> 0:37:18,176
Otherwise, you might receive a

1268
00:37:18,246 --> 0:37:19,846
set of multiple sessions

1269
00:37:20,116 --> 0:37:21,616
sometime after your next launch.

1270
00:37:24,606 --> 0:37:26,086
For our next case study, I want

1271
00:37:26,086 --> 0:37:27,826
to look at UserDefaults, which

1272
00:37:27,826 --> 0:37:29,086
is another really common and

1273
00:37:29,086 --> 0:37:30,316
super useful class for

1274
00:37:30,316 --> 0:37:31,056
applications.

1275
00:37:32,276 --> 0:37:33,156
UserDefaults are great for

1276
00:37:33,156 --> 0:37:33,846
storing settings.

1277
00:37:34,116 --> 0:37:35,206
And that's exactly what I'm

1278
00:37:35,206 --> 0:37:36,116
using them for here.

1279
00:37:36,876 --> 0:37:38,676
I have this toggle for a word

1280
00:37:38,676 --> 0:37:40,186
count bar in my app.

1281
00:37:40,256 --> 0:37:41,926
And when I switch it on, a word

1282
00:37:41,926 --> 0:37:43,116
count bar appears at the bottom

1283
00:37:43,116 --> 0:37:43,676
of the screen.

1284
00:37:43,986 --> 0:37:46,126
But unfortunately, it only

1285
00:37:46,126 --> 0:37:47,746
appeared on the screen where I

1286
00:37:47,746 --> 0:37:48,996
had the settings view controller

1287
00:37:48,996 --> 0:37:49,446
is showing.

1288
00:37:49,526 --> 0:37:51,986
It didn't appear in both windows

1289
00:37:51,986 --> 0:37:52,856
and that's not what I wanted.

1290
00:37:52,856 --> 0:37:54,276
I want this to be an application

1291
00:37:54,276 --> 0:37:55,196
global preference.

1292
00:37:55,796 --> 0:37:57,746
And when I looked at why this

1293
00:37:57,746 --> 0:37:58,786
was happening, it was again

1294
00:37:58,786 --> 0:37:59,706
pretty straightforward.

1295
00:37:59,706 --> 0:38:01,316
I had a settings view controller

1296
00:37:59,706 --> 0:38:01,316
I had a settings view controller

1297
00:38:01,316 --> 0:38:02,586
and a settings view controller

1298
00:38:02,586 --> 0:38:03,076
delegate.

1299
00:38:04,466 --> 0:38:05,886
Whenever the setting changed, I

1300
00:38:05,886 --> 0:38:07,726
told the delegate, which was the

1301
00:38:07,726 --> 0:38:08,796
text editor view controller

1302
00:38:08,796 --> 0:38:10,396
behind, which then updated its

1303
00:38:10,396 --> 0:38:10,546
UI.

1304
00:38:11,116 --> 0:38:12,906
That's a very self-contained

1305
00:38:12,906 --> 0:38:13,516
process.

1306
00:38:13,516 --> 0:38:15,456
And at no point is the second

1307
00:38:15,536 --> 0:38:16,916
scene in my application ever

1308
00:38:16,916 --> 0:38:17,906
informed that anything is

1309
00:38:17,906 --> 0:38:18,376
updated.

1310
00:38:19,406 --> 0:38:20,766
There's a couple of ways that we

1311
00:38:20,766 --> 0:38:21,936
can solve this, but a really

1312
00:38:21,936 --> 0:38:23,796
elegant way is using key value

1313
00:38:23,796 --> 0:38:24,346
observing.

1314
00:38:25,596 --> 0:38:27,226
And I can do this in two steps.

1315
00:38:27,886 --> 0:38:30,056
The first is to define a

1316
00:38:30,056 --> 0:38:31,956
property on UserDefaults via an

1317
00:38:31,956 --> 0:38:32,496
extension.

1318
00:38:32,936 --> 0:38:34,246
This will give me a key path

1319
00:38:34,316 --> 0:38:35,556
that I can use for key value

1320
00:38:35,556 --> 0:38:36,106
observing.

1321
00:38:36,716 --> 0:38:38,426
Here, I have my isInfoButton --

1322
00:38:38,756 --> 0:38:40,346
or, sorry, isInforBarHidden

1323
00:38:40,346 --> 0:38:41,556
Boolean property, and I

1324
00:38:41,556 --> 0:38:43,136
implement it in terms of the

1325
00:38:43,136 --> 0:38:44,466
existing get and set methods on

1326
00:38:44,466 --> 0:38:45,186
UserDefaults.

1327
00:38:46,086 --> 0:38:48,136
Next, I go over to my view

1328
00:38:48,136 --> 0:38:49,626
controller where I register an

1329
00:38:49,626 --> 0:38:51,076
observation on the standard

1330
00:38:51,076 --> 0:38:51,786
UserDefaults.

1331
00:38:52,306 --> 0:38:53,616
It takes that key path that I

1332
00:38:53,696 --> 0:38:55,316
just defined in my extension and

1333
00:38:55,316 --> 0:38:56,726
the change handler which

1334
00:38:56,726 --> 0:38:58,046
encapsulates for the work that I

1335
00:38:58,046 --> 0:38:59,666
want done anytime that value

1336
00:38:59,666 --> 0:39:00,216
changes.

1337
00:38:59,666 --> 0:39:00,216
changes.

1338
00:39:01,946 --> 0:39:03,596
Importantly, I've also passed

1339
00:39:03,596 --> 0:39:05,996
the option initial to this

1340
00:39:05,996 --> 0:39:06,956
registration.

1341
00:39:07,476 --> 0:39:08,706
What this does is really cool.

1342
00:39:08,836 --> 0:39:10,486
It calls my change handler once

1343
00:39:10,536 --> 0:39:12,406
for free when I set it up, which

1344
00:39:12,406 --> 0:39:13,396
means that I don't have to have

1345
00:39:13,396 --> 0:39:14,946
this code duplicated anywhere

1346
00:39:14,946 --> 0:39:15,356
else.

1347
00:39:15,696 --> 0:39:17,126
I don't have to remember to call

1348
00:39:17,126 --> 0:39:18,276
one method when my view is

1349
00:39:18,276 --> 0:39:19,876
loaded and another when I

1350
00:39:19,876 --> 0:39:20,856
receive this update.

1351
00:39:21,146 --> 0:39:22,456
There's just one source of truth

1352
00:39:22,456 --> 0:39:23,536
for whether or not that's being

1353
00:39:23,536 --> 0:39:24,166
shown right now.

1354
00:39:24,836 --> 0:39:26,036
It's a really great way to make

1355
00:39:26,036 --> 0:39:27,256
sure that your app's interface

1356
00:39:27,256 --> 0:39:27,926
is consistent.

1357
00:39:30,286 --> 0:39:31,636
Now, everything looks great.

1358
00:39:32,376 --> 0:39:36,136
So we hope that those give you

1359
00:39:36,136 --> 0:39:37,536
some ideas about things to look

1360
00:39:37,536 --> 0:39:38,606
for in your applications.

1361
00:39:39,906 --> 0:39:41,546
If your application is already

1362
00:39:41,546 --> 0:39:43,466
using best practices, you might

1363
00:39:43,466 --> 0:39:44,626
already be doing some of these

1364
00:39:44,626 --> 0:39:45,906
and have nothing to change.

1365
00:39:47,246 --> 0:39:48,686
But speaking of best practices,

1366
00:39:48,886 --> 0:39:50,316
I want to talk about these new

1367
00:39:50,316 --> 0:39:52,046
deprecations on UIApplication.

1368
00:39:52,736 --> 0:39:55,236
As Steve mentioned, we've split

1369
00:39:55,236 --> 0:39:56,556
out the responsibilities for

1370
00:39:56,556 --> 0:39:58,746
user interface state and process

1371
00:39:58,746 --> 0:39:59,606
lifecycle from the

1372
00:39:59,606 --> 0:40:00,866
UIApplicationDelegate.

1373
00:39:59,606 --> 0:40:00,866
UIApplicationDelegate.

1374
00:40:01,496 --> 0:40:02,876
And to go along with that we've

1375
00:40:02,876 --> 0:40:04,426
also split them out of

1376
00:40:04,426 --> 0:40:05,276
UIApplication.

1377
00:40:05,926 --> 0:40:07,916
Now that you can have multiple

1378
00:40:07,916 --> 0:40:09,236
scenes of your application

1379
00:40:09,236 --> 0:40:10,886
visible at the same time, you

1380
00:40:10,886 --> 0:40:11,996
could have a one with a light

1381
00:40:11,996 --> 0:40:13,906
status bar content and one with

1382
00:40:13,906 --> 0:40:15,096
a dark status bar content.

1383
00:40:15,456 --> 0:40:16,856
And it doesn't make sense for us

1384
00:40:16,856 --> 0:40:18,116
to be able to return just one

1385
00:40:18,116 --> 0:40:19,906
value to you for this.

1386
00:40:20,146 --> 0:40:21,476
So because of that, we are

1387
00:40:21,476 --> 0:40:22,746
deprecating these properties on

1388
00:40:22,746 --> 0:40:24,256
UIApplication and giving you new

1389
00:40:24,256 --> 0:40:25,636
ones on the window scene.

1390
00:40:27,056 --> 0:40:28,376
We encourage you to adopt these

1391
00:40:28,416 --> 0:40:29,916
new properties even if you're

1392
00:40:29,916 --> 0:40:31,356
not planning to adopt support

1393
00:40:31,356 --> 0:40:32,536
for multiple windows this year

1394
00:40:32,536 --> 0:40:33,556
because it will put you in a

1395
00:40:33,556 --> 0:40:34,576
great place if you consider

1396
00:40:34,576 --> 0:40:34,976
doing it later.

1397
00:40:38,426 --> 0:40:39,336
We've covered a lot today.

1398
00:40:39,546 --> 0:40:40,606
So I just want to go over a

1399
00:40:40,606 --> 0:40:41,186
brief summary.

1400
00:40:42,086 --> 0:40:44,076
Earlier, Ken helped you envision

1401
00:40:44,076 --> 0:40:46,026
your applications using many of

1402
00:40:46,026 --> 0:40:47,176
the new powerful features that

1403
00:40:47,176 --> 0:40:48,556
we've added to multitasking this

1404
00:40:48,556 --> 0:40:48,766
year.

1405
00:40:49,556 --> 0:40:51,226
We think that users are really

1406
00:40:51,226 --> 0:40:52,456
going to come to expect these

1407
00:40:52,456 --> 0:40:53,556
out of apps because they're so

1408
00:40:53,556 --> 0:40:54,566
useful and convenient.

1409
00:40:54,896 --> 0:40:56,426
So we really want to encourage

1410
00:40:56,426 --> 0:40:58,426
you to adopt them.

1411
00:40:59,106 --> 0:41:00,706
We've made this API easy to

1412
00:40:59,106 --> 0:41:00,706
We've made this API easy to

1413
00:41:00,706 --> 0:41:02,526
adapt for existing applications.

1414
00:41:02,746 --> 0:41:04,346
And we're also pushing it as the

1415
00:41:04,346 --> 0:41:05,776
best practice for new

1416
00:41:05,776 --> 0:41:06,476
applications.

1417
00:41:06,646 --> 0:41:07,796
In fact, this is going to be the

1418
00:41:07,796 --> 0:41:09,326
default template for new Xcode

1419
00:41:09,326 --> 0:41:10,766
projects using this UI scene

1420
00:41:10,766 --> 0:41:11,266
lifecycle.

1421
00:41:11,766 --> 0:41:14,956
I also want to encourage you,

1422
00:41:15,136 --> 0:41:16,836
because while there might be

1423
00:41:16,836 --> 0:41:18,506
some issues when you adopt these

1424
00:41:18,506 --> 0:41:19,826
new lifecycle changes, they

1425
00:41:19,826 --> 0:41:21,056
usually have fairly simple

1426
00:41:21,056 --> 0:41:22,826
solutions, including just the

1427
00:41:22,826 --> 0:41:24,096
best practices that we've talked

1428
00:41:24,096 --> 0:41:28,076
about in previous WWDCs.

1429
00:41:28,076 --> 0:41:29,646
And lastly, I want to encourage

1430
00:41:29,646 --> 0:41:30,886
you to move off of the

1431
00:41:30,886 --> 0:41:32,216
deprecated UIApplication

1432
00:41:32,216 --> 0:41:33,176
properties and onto

1433
00:41:33,176 --> 0:41:34,046
UIWindowScene.

1434
00:41:34,496 --> 0:41:35,656
These are available to you

1435
00:41:35,656 --> 0:41:37,556
anytime you're running on iOS 13

1436
00:41:37,556 --> 0:41:40,136
or iPadOS, and you don't need to

1437
00:41:40,136 --> 0:41:41,266
adopt multiple windows to take

1438
00:41:41,266 --> 0:41:41,926
advantage of them.

1439
00:41:42,616 --> 0:41:44,746
We have a couple more talks

1440
00:41:44,846 --> 0:41:46,326
later in the week about advanced

1441
00:41:46,326 --> 0:41:49,256
topics in multitasking, and also

1442
00:41:49,256 --> 0:41:51,466
some labs this week, including

1443
00:41:51,466 --> 0:41:52,686
ones focused specifically on

1444
00:41:52,686 --> 0:41:53,906
multitasking on Thursday.

1445
00:41:54,286 --> 0:41:56,816
I want to thank everyone for

1446
00:41:56,816 --> 0:41:57,946
coming out today and hope you

1447
00:41:57,946 --> 0:41:58,576
have a great week.

1448
00:41:59,508 --> 0:42:01,508
[ Applause ]
