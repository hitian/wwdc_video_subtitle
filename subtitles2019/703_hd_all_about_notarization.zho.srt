1
00:00:01,516 --> 0:00:08,516
[音乐]

2
00:00:09,516 --> 0:00:12,546
[掌声]

3
00:00:13,046 --> 0:00:13,886
&gt;&gt; 大家下午好

4
00:00:14,056 --> 0:00:15,106
感谢今天来到这里

5
00:00:16,065 --> 0:00:17,416
我是 Garrett

6
00:00:17,416 --> 0:00:18,656
我是 Apple 的信任与执行团队的一员

7
00:00:18,656 --> 0:00:20,236
今天我们在这里要

8
00:00:20,236 --> 0:00:21,756
一同探讨关于公证的问题

9
00:00:22,276 --> 0:00:25,346
以下是本次演讲的一个快速议程

10
00:00:25,346 --> 0:00:26,516
我们将会首先

11
00:00:26,516 --> 0:00:27,656
简单概述一下

12
00:00:27,656 --> 0:00:29,046
公证到底是什么 以及一些

13
00:00:29,046 --> 0:00:30,006
它能够提供的好处

14
00:00:30,986 --> 0:00:31,776
然后我们将会讨论

15
00:00:31,776 --> 0:00:33,076
为使你的软件公证

16
00:00:33,076 --> 0:00:34,466
所需的 App 要求

17
00:00:35,336 --> 0:00:36,256
最后我们会过一遍

18
00:00:36,256 --> 0:00:38,156
公证你的软件

19
00:00:38,226 --> 0:00:40,086
你所需要的

20
00:00:40,086 --> 0:00:40,656
工作流程和工具

21
00:00:43,616 --> 0:00:44,666
让我们开始吧

22
00:00:45,196 --> 0:00:46,746
到底什么是公证

23
00:00:47,666 --> 0:00:50,136
嗯 这是我们在

24
00:00:50,136 --> 0:00:52,356
去年的 WWDC 上提出一个流程

25
00:00:52,746 --> 0:00:54,106
来用于在分发之前

26
00:00:54,366 --> 0:00:56,666
识别和阻断恶意软件

27
00:00:57,326 --> 0:00:59,346
现在它已经是

28
00:00:59,346 --> 0:01:00,906
Developer ID 程序的一个扩展

29
00:00:59,346 --> 0:01:00,906
Developer ID 程序的一个扩展

30
00:01:00,906 --> 0:01:02,936
意味着你不需要注册或是

31
00:01:03,586 --> 0:01:04,796
使用任何不同的证书

32
00:01:05,786 --> 0:01:07,236
也就是说你可以

33
00:01:07,236 --> 0:01:08,986
控制你的软件的

34
00:01:08,986 --> 0:01:10,366
签名和分发

35
00:01:10,696 --> 0:01:12,886
正如在引入公证之前一样

36
00:01:15,606 --> 0:01:19,826
其关键是公证服务它对

37
00:01:19,826 --> 0:01:22,136
Developer ID 签名的内容

38
00:01:22,136 --> 0:01:22,966
执行自动安全检查

39
00:01:23,546 --> 0:01:26,926
那么让我们了解一下

40
00:01:26,926 --> 0:01:30,306
当你需要开始第一次公证你的软件时的工作流程

41
00:01:32,216 --> 0:01:35,696
下面的这个图标解释了开发流程

42
00:01:35,696 --> 0:01:37,636
并且本地开发

43
00:01:37,856 --> 0:01:39,266
完全保持不变

44
00:01:39,966 --> 0:01:41,366
你在你的桌面上

45
00:01:41,576 --> 0:01:42,656
使用你的 Apple 开发人员证书

46
00:01:42,656 --> 0:01:45,236
构建并签名 直到你有一个候选版本

47
00:01:45,776 --> 0:01:48,816
此时你只需要

48
00:01:48,816 --> 0:01:50,196
使用你的 Developer ID

49
00:01:50,196 --> 0:01:52,166
证书进行签名 然后你可以将其

50
00:01:52,166 --> 0:01:53,486
副本发送至 Apple 公证服务

51
00:01:53,486 --> 0:01:55,536
来进行公证

52
00:01:56,726 --> 0:01:58,376
当公证完成并

53
00:01:58,506 --> 0:02:00,346
成功后公证服务

54
00:01:58,506 --> 0:02:00,346
成功后公证服务

55
00:02:00,346 --> 0:02:02,076
会发送回一个通行证

56
00:02:02,846 --> 0:02:03,726
你可以将此通行证

57
00:02:03,726 --> 0:02:05,696
在分发前加在你的软件上

58
00:02:06,266 --> 0:02:09,045
它一旦被加上

59
00:02:09,045 --> 0:02:11,746
软件就可以被分发 和之前一样

60
00:02:14,066 --> 0:02:15,746
值得一提的是

61
00:02:16,046 --> 0:02:17,256
这一工作流程

62
00:02:17,256 --> 0:02:19,296
自去年起就没有变化 因此这只算是一个复习

63
00:02:19,946 --> 0:02:24,446
我们去年没有谈到的是

64
00:02:24,446 --> 0:02:25,776
当有人首次下载和使用你的软件时

65
00:02:25,776 --> 0:02:26,996
会发生什么

66
00:02:28,426 --> 0:02:29,406
当一个用户下载你的

67
00:02:29,406 --> 0:02:30,426
加了通行证的软件并且

68
00:02:31,006 --> 0:02:32,096
双击它来启动时

69
00:02:32,556 --> 0:02:34,716
管理员会执行一次校验

70
00:02:35,966 --> 0:02:37,616
它将会检查本地通行证

71
00:02:37,616 --> 0:02:41,066
而且它也会通过 CloudKit 与公证服务联系

72
00:02:41,066 --> 0:02:42,006
来检查通行证

73
00:02:42,906 --> 0:02:44,246
只要通行证通过了检验

74
00:02:44,246 --> 0:02:45,456
而且通行证与

75
00:02:45,456 --> 0:02:47,586
你的 App 的内容相符

76
00:02:47,586 --> 0:02:48,696
管理者会允许这个 App 运行

77
00:02:49,096 --> 0:02:50,076
用户会看到正常的

78
00:02:50,076 --> 0:02:50,876
首次启动提示

79
00:02:52,096 --> 0:02:53,746
现在我想要提醒大家的是

80
00:02:54,296 --> 0:02:56,746
公证并不是一个 App 审查

81
00:02:57,706 --> 0:02:59,186
公证服务执行

82
00:02:59,186 --> 0:03:01,366
一系列自动化的安全检查

83
00:02:59,186 --> 0:03:01,366
一系列自动化的安全检查

84
00:03:03,016 --> 0:03:05,866
去年我们设定了一个目标

85
00:03:05,866 --> 0:03:07,276
即在一小时内大部分提交从

86
00:03:07,276 --> 0:03:08,586
公证服务都能获得回应

87
00:03:10,026 --> 0:03:11,026
而事实证明

88
00:03:11,026 --> 0:03:13,616
在去年 99% 的

89
00:03:13,616 --> 0:03:15,306
提交都能在

90
00:03:15,306 --> 0:03:17,376
15 分钟内获得回应

91
00:03:18,636 --> 0:03:20,486
而且公证

92
00:03:20,486 --> 0:03:22,046
服务的状态现在位于

93
00:03:22,046 --> 0:03:22,816
Apple 公共状态页上

94
00:03:23,326 --> 0:03:24,626
因此你可以很轻松地查看

95
00:03:24,626 --> 0:03:27,686
是否有可能造成问题的服务问题

96
00:03:28,246 --> 0:03:32,066
那么公证能带来什么好处

97
00:03:32,866 --> 0:03:34,566
嗯 好处有很多

98
00:03:34,666 --> 0:03:35,786
因此我今天只强调

99
00:03:35,786 --> 0:03:37,476
其中的几点

100
00:03:37,586 --> 0:03:40,646
首先公证服务可以帮你防止

101
00:03:40,646 --> 0:03:42,566
无意中发送恶意依赖项

102
00:03:44,476 --> 0:03:47,366
其次 有强行运行的 App

103
00:03:47,496 --> 0:03:49,476
在默认情况下

104
00:03:49,476 --> 0:03:50,986
更安全 我们稍后会

105
00:03:50,986 --> 0:03:51,726
详细讨论这一点

106
00:03:52,256 --> 0:03:53,636
这可以防止你的 App

107
00:03:53,636 --> 0:03:55,166
被攻击者滥用

108
00:03:59,106 --> 0:04:00,906
第三 用户更有可能

109
00:03:59,106 --> 0:04:00,906
第三 用户更有可能

110
00:04:00,906 --> 0:04:02,456
下载和尝试新的软件 

111
00:04:02,786 --> 0:04:04,066
当他们知道 Apple 已经

112
00:04:04,066 --> 0:04:05,526
针对可知的安全问题进行了扫描后

113
00:04:08,576 --> 0:04:10,666
最后 公证还可以

114
00:04:10,666 --> 0:04:11,806
为由你的 Developer ID 账户

115
00:04:11,806 --> 0:04:13,096
公证过的软件提供

116
00:04:13,096 --> 0:04:14,706
审计跟踪

117
00:04:14,706 --> 0:04:15,896
你可以使用它来检查

118
00:04:15,896 --> 0:04:17,245
提交历史记录 确保

119
00:04:17,245 --> 0:04:20,886
你不想要从你的账户发布的软件没有被发布

120
00:04:21,625 --> 0:04:23,386
这就是关于

121
00:04:23,386 --> 0:04:24,556
公证的一点概述

122
00:04:24,926 --> 0:04:26,096
现在让我们请出 Robert

123
00:04:26,096 --> 0:04:27,116
来谈谈关于

124
00:04:27,116 --> 0:04:28,936
公证你的软件所需的 App 要求

125
00:04:29,806 --> 0:04:37,826
Robert [掌声]

126
00:04:38,326 --> 0:04:40,016
&gt;&gt; 首先我想说的是

127
00:04:40,016 --> 0:04:41,846
对于任何

128
00:04:41,846 --> 0:04:43,536
你们之前发布的软件

129
00:04:43,666 --> 0:04:45,246
它们都不需要满足任何新要求

130
00:04:45,246 --> 0:04:47,876
你可以将现有的

131
00:04:47,926 --> 0:04:48,896
已经分发的软件

132
00:04:48,896 --> 0:04:50,766
按照原样提交公证

133
00:04:50,766 --> 0:04:53,256
但是对于新的软件

134
00:04:53,256 --> 0:04:54,646
你需要确保它能够

135
00:04:54,646 --> 0:04:56,186
满足几个安全要求

136
00:04:56,246 --> 0:04:57,736
特别是 它必须

137
00:04:57,736 --> 0:04:59,286
被完全地和正确地签名

138
00:04:59,696 --> 0:05:02,486
并且它需要采用强化运行

139
00:04:59,696 --> 0:05:02,486
并且它需要采用强化运行

140
00:05:02,486 --> 0:05:03,686
所谓新软件 我指的是

141
00:05:03,686 --> 0:05:05,816
代码签名时间在

142
00:05:05,876 --> 0:05:07,696
2019 年 6 月 1 日之后的软件

143
00:05:08,806 --> 0:05:10,436
下面我们将会详细地介绍

144
00:05:10,436 --> 0:05:11,916
这两者的含义

145
00:05:11,916 --> 0:05:13,336
即正确的签名和

146
00:05:13,336 --> 0:05:15,276
强化运行

147
00:05:15,606 --> 0:05:19,716
因此首先 当你要完全签名时 

148
00:05:19,716 --> 0:05:21,236
你真的需要那么做

149
00:05:21,236 --> 0:05:22,556
这包括捆绑包 Macho-O

150
00:05:22,586 --> 0:05:24,496
程序安装包 无论它们在哪里 

151
00:05:24,496 --> 0:05:26,546
以及无论你的

152
00:05:26,546 --> 0:05:28,086
程序安装包中是否有 Mach-O

153
00:05:28,086 --> 0:05:29,576
是否在你的捆绑包中有安装包

154
00:05:30,036 --> 0:05:31,456
无论它们

155
00:05:31,456 --> 0:05:33,306
出现在你的产品中的任何地方

156
00:05:33,306 --> 0:05:34,876
它们都需要被签名

157
00:05:34,906 --> 0:05:36,856
它们都需要被正确地签名

158
00:05:38,166 --> 0:05:39,936
所以 要正确签名意味着

159
00:05:40,026 --> 0:05:42,756
你需要签署捆绑包

160
00:05:42,756 --> 0:05:45,346
Macho-O 和代码 我等一下会

161
00:05:45,346 --> 0:05:46,546
详细介绍代码

162
00:05:46,866 --> 0:05:50,226
和你的 Developer ID App 证书 

163
00:05:50,226 --> 0:05:51,556
并确保

164
00:05:51,556 --> 0:05:52,876
包含一个安全的时间戳

165
00:05:54,176 --> 0:05:56,056
对于可执行文件 它们需要

166
00:05:56,056 --> 0:05:57,526
打开强化运行

167
00:05:57,526 --> 0:05:58,836
你不需要为

168
00:05:58,836 --> 0:06:00,196
框架或动态库文件

169
00:05:58,836 --> 0:06:00,196
框架或动态库文件

170
00:06:00,196 --> 0:06:01,556
或捆绑包打开强化运行

171
00:06:01,556 --> 0:06:02,196
只是对可执行文件而言的

172
00:06:03,546 --> 0:06:05,386
对于安装包你需要

173
00:06:05,386 --> 0:06:07,516
使用你的

174
00:06:07,516 --> 0:06:09,316
Developer ID 安装证书来签名

175
00:06:09,316 --> 0:06:11,856
这与你的 Developer ID App

176
00:06:11,856 --> 0:06:12,906
证书是不同的 所以要注意

177
00:06:14,236 --> 0:06:16,036
另外 如果你选择

178
00:06:16,036 --> 0:06:17,926
签名磁盘映像来避免网守

179
00:06:17,926 --> 0:06:20,306
路径随机化 则必须

180
00:06:20,306 --> 0:06:21,686
使用你的 Developer ID

181
00:06:21,686 --> 0:06:23,086
App 证书来签名 而且

182
00:06:23,086 --> 0:06:24,346
包含一个安全的时间戳

183
00:06:24,886 --> 0:06:27,926
如果你使用 Xcode

184
00:06:27,926 --> 0:06:29,266
来构建你的软件包

185
00:06:29,266 --> 0:06:29,986
你的软件 这很容易

186
00:06:29,986 --> 0:06:32,186
如果你打开自动

187
00:06:32,286 --> 0:06:34,056
代码签名 Xcode 能够

188
00:06:34,056 --> 0:06:37,016
为你完成所有这些 但你必须要注意

189
00:06:37,016 --> 0:06:39,586
如果你使用的是脚本构建阶段

190
00:06:39,586 --> 0:06:41,666
或拷贝构建阶段

191
00:06:41,776 --> 0:06:43,486
它们可能会在你的软件中

192
00:06:43,486 --> 0:06:46,656
引入新的代码 而 Xcode

193
00:06:46,656 --> 0:06:48,026
并不知道这些代码 那么你就

194
00:06:48,026 --> 0:06:50,596
需要确保它们得到正确的签名

195
00:06:51,206 --> 0:06:55,176
我提到了代码文件

196
00:06:55,576 --> 0:06:58,996
当我们在几年前提出了代码签名后

197
00:06:58,996 --> 0:07:02,456
我们在技术说明中记录了这些

198
00:06:58,996 --> 0:07:02,456
我们在技术说明中记录了这些

199
00:07:02,456 --> 0:07:03,396
叫做代码位置的内容

200
00:07:03,706 --> 0:07:05,336
因此任何在

201
00:07:05,336 --> 0:07:06,706
其捆绑包中出现的任何文件

202
00:07:06,706 --> 0:07:07,906
都会被代码签名的

203
00:07:07,906 --> 0:07:09,376
基础结构认为是代码

204
00:07:09,376 --> 0:07:11,726
也就是说它们需要有一个附加签名

205
00:07:12,246 --> 0:07:15,726
Mach-Os 在这方面是最好的

206
00:07:15,726 --> 0:07:16,966
你可以将签名

207
00:07:16,966 --> 0:07:18,726
嵌入到任何你放在

208
00:07:18,726 --> 0:07:19,906
这些位置的 Mach-O 和

209
00:07:19,906 --> 0:07:21,536
捆绑包中 但是如果你

210
00:07:21,536 --> 0:07:23,416
放置了其他种类的文件 比如

211
00:07:23,666 --> 0:07:27,536
JPEG 文件或者原始的二进制文件

212
00:07:27,536 --> 0:07:30,116
这些文件需要被签名 但是

213
00:07:30,116 --> 0:07:31,486
它们不会获取附加

214
00:07:31,486 --> 0:07:32,826
签名 反之附加签名会

215
00:07:32,826 --> 0:07:35,386
最终成为一种扩展属性

216
00:07:35,826 --> 0:07:37,886
而这意味着当你在打包你的代码时

217
00:07:37,886 --> 0:07:41,326
你必须确保扩展属性保持在那些位置中

218
00:07:41,786 --> 0:07:43,316
为了避免需要过度小心

219
00:07:43,316 --> 0:07:44,686
我们建议你

220
00:07:44,686 --> 0:07:46,236
将一切不是

221
00:07:46,236 --> 0:07:47,786
Macho-O 或是包含

222
00:07:47,786 --> 0:07:49,406
Macho-O 的捆绑包的任何东西放置于

223
00:07:49,406 --> 0:07:50,986
这些位置之外的地方

224
00:07:50,986 --> 0:07:51,946
当构建你的 App 时

225
00:07:52,646 --> 0:07:56,976
因此 当你在

226
00:07:56,976 --> 0:07:58,976
Xcode 之外签名时 我们推荐使用

227
00:07:58,976 --> 0:08:00,206
彻底性代码签名

228
00:07:58,976 --> 0:08:00,206
彻底性代码签名

229
00:08:00,486 --> 0:08:02,016
这意味着你首先

230
00:08:02,016 --> 0:08:05,096
在你的 App 中的

231
00:08:05,096 --> 0:08:07,826
最深层嵌套的包或代码段签名

232
00:08:08,366 --> 0:08:10,216
这种情况下 应该是

233
00:08:10,216 --> 0:08:11,876
Updater.app

234
00:08:11,876 --> 0:08:13,596
在 Sparkle 框架内

235
00:08:13,596 --> 0:08:17,116
在 WatchingGrassGrow.app 之下

236
00:08:17,116 --> 0:08:18,656
然后你向上移动一级

237
00:08:18,656 --> 0:08:20,686
然后分别对每一项进行签名

238
00:08:20,926 --> 0:08:21,966
请注意 当你签署

239
00:08:21,966 --> 0:08:24,046
Sparkle 框架 或者

240
00:08:24,046 --> 0:08:25,456
抓取 Sparkle 主要执行文件的

241
00:08:25,456 --> 0:08:27,356
Sparkle 框架 以及

242
00:08:27,356 --> 0:08:29,086
同时签署 updater.app 时

243
00:08:29,086 --> 0:08:32,966
你需要分别去 WatchingGrassGrow.saver

244
00:08:32,966 --> 0:08:35,846
growGrass.dylib 以及

245
00:08:35,846 --> 0:08:36,976
WatchingGrassGrowHelper

246
00:08:38,015 --> 0:08:39,515
最终当你完成签名

247
00:08:39,515 --> 0:08:40,756
所有这些后 你需要

248
00:08:40,756 --> 0:08:42,446
在最顶层的捆绑包签署所有内容

249
00:08:42,446 --> 0:08:44,285
这会签署最主要的

250
00:08:44,285 --> 0:08:45,846
可执行文件

251
00:08:45,846 --> 0:08:47,786
如你的 info. plist 所示

252
00:08:48,996 --> 0:08:50,616
你们中有些人在

253
00:08:50,716 --> 0:08:52,106
自定义工作流程中使用 -- Deep 标志

254
00:08:52,106 --> 0:08:54,406
但那样需要额外注意

255
00:08:54,586 --> 0:08:56,146
-- Deep 标志仅仅

256
00:08:56,146 --> 0:08:57,906
在代码位置中寻找代码

257
00:08:58,176 --> 0:09:01,346
而在这个案例中 growGrass.dylib

258
00:08:58,176 --> 0:09:01,346
而在这个案例中 growGrass.dylib

259
00:09:01,346 --> 0:09:03,046
WatchingGrassGrow.saver

260
00:09:03,046 --> 0:09:05,066
以及 Updater.app

261
00:09:05,526 --> 0:09:07,326
不会被当做是代码

262
00:09:07,326 --> 0:09:08,176
它们会被当做是

263
00:09:08,176 --> 0:09:09,876
资源来签名 而非

264
00:09:09,876 --> 0:09:12,566
作为代码被签名 因此他们会被

265
00:09:12,566 --> 0:09:13,846
拒绝公证 除非你愿意

266
00:09:13,846 --> 0:09:15,576
多费劲做彻底性签名

267
00:09:16,756 --> 0:09:19,856
可以在会后查看 Technote 2206

268
00:09:19,856 --> 0:09:20,976
获取更多关于

269
00:09:20,976 --> 0:09:24,686
彻底性签名和代码位置的信息

270
00:09:26,226 --> 0:09:29,296
当你完全正确地签名了你的

271
00:09:29,296 --> 0:09:30,996
软件 你需要确保

272
00:09:30,996 --> 0:09:32,676
你的签名不会失效顾客

273
00:09:32,886 --> 0:09:33,786
也就是说 你永远不应该

274
00:09:33,786 --> 0:09:35,396
更改你的数据包中的文件

275
00:09:35,396 --> 0:09:36,856
除非是安装或

276
00:09:36,856 --> 0:09:38,856
更新期间 而且当你更新软件时

277
00:09:38,856 --> 0:09:40,586
确保更新的结果

278
00:09:40,586 --> 0:09:42,526
是在顾客系统中

279
00:09:42,606 --> 0:09:44,916
正确的签名和公证过的

280
00:09:44,916 --> 0:09:48,356
那么接下来我们会深入地

281
00:09:48,356 --> 0:09:49,306
介绍强化运行

282
00:09:49,306 --> 0:09:50,476
我们去年在 WWDC

283
00:09:50,476 --> 0:09:53,696
已经介绍了强化运行

284
00:09:53,696 --> 0:09:55,166
现在我们将会

285
00:09:55,166 --> 0:09:57,076
提供更多细节 讨论它的

286
00:09:57,126 --> 0:09:59,316
优势和配置问题

287
00:09:59,776 --> 0:10:03,346
强化运行将

288
00:09:59,776 --> 0:10:03,346
强化运行将

289
00:10:03,346 --> 0:10:04,676
很多我们在

290
00:10:04,676 --> 0:10:06,526
macOS 上所拥有的系统完整性保护

291
00:10:06,526 --> 0:10:08,286
扩展到了你的 App 中

292
00:10:08,696 --> 0:10:10,376
包括 运行代码签名执行

293
00:10:10,376 --> 0:10:12,296
库验证

294
00:10:12,646 --> 0:10:13,906
DYLD 环境变量保护

295
00:10:13,906 --> 0:10:15,716
和调试保护

296
00:10:16,146 --> 0:10:17,126
请注意 全部这些

297
00:10:17,206 --> 0:10:19,056
保护是默认配置的

298
00:10:19,056 --> 0:10:21,266
在 iOS 不能配置

299
00:10:21,266 --> 0:10:22,896
但是在 macOS 是可以

300
00:10:22,896 --> 0:10:24,216
通过任何开发人员都可以设置的

301
00:10:24,216 --> 0:10:25,656
权限进行配置的

302
00:10:26,106 --> 0:10:29,306
因此如果你在使用 Xcode

303
00:10:29,306 --> 0:10:31,276
配置强化运行很简单 

304
00:10:31,466 --> 0:10:34,096
只需要进入签名与功能选项卡 确保

305
00:10:34,096 --> 0:10:35,706
强化运行功能

306
00:10:35,706 --> 0:10:38,026
可用于你的目标即可

307
00:10:40,226 --> 0:10:41,886
然后你可以选择

308
00:10:41,886 --> 0:10:42,866
你所需要的权限

309
00:10:42,866 --> 0:10:44,566
来为你的项目

310
00:10:44,566 --> 0:10:47,146
配置强化运行 通过勾选以下复选框

311
00:10:47,856 --> 0:10:51,166
如果你正在使用

312
00:10:51,166 --> 0:10:52,836
Xcode 之外的自定义工作流程 你可以

313
00:10:52,836 --> 0:10:54,126
使用代码签名指令来

314
00:10:54,126 --> 0:10:55,576
配置强化运行

315
00:10:55,576 --> 0:10:57,426
为此你可以使用

316
00:10:57,426 --> 0:11:00,416
代码签名的 options runtime 指令

317
00:10:57,426 --> 0:11:00,416
代码签名的 options runtime 指令

318
00:11:00,416 --> 0:11:02,176
确保你同时使用了 timestamp 选项

319
00:11:02,176 --> 0:11:06,126
来确保在你的 App 上有一个

320
00:11:06,126 --> 0:11:06,876
安全的时间戳

321
00:11:07,466 --> 0:11:11,076
为了确认你已经

322
00:11:11,076 --> 0:11:12,316
正确地配置了强化运行

323
00:11:12,616 --> 0:11:14,136
使用代码签名下的 display 选项

324
00:11:14,136 --> 0:11:15,526
设定 verbose

325
00:11:15,526 --> 0:11:17,636
数值为 2 然后

326
00:11:17,636 --> 0:11:19,836
在标志部分寻找 runtime 一词

327
00:11:20,466 --> 0:11:21,566
另外需要注意的是

328
00:11:21,596 --> 0:11:22,346
强化运行是版本化的

329
00:11:22,796 --> 0:11:24,076
当你使用强化运行来

330
00:11:24,076 --> 0:11:26,046
签名时 我们会记录下来

331
00:11:26,136 --> 0:11:27,706
你所签名使用的版本

332
00:11:27,706 --> 0:11:29,496
因此 如果我们想要

333
00:11:29,496 --> 0:11:30,476
在未来为强化运行

334
00:11:30,476 --> 0:11:31,656
添加更多保护

335
00:11:31,866 --> 0:11:33,366
我们会确保

336
00:11:33,366 --> 0:11:34,456
目前你的 App 已经测试过的那些

337
00:11:34,456 --> 0:11:36,356
才会在未来的系统中应用

338
00:11:39,386 --> 0:11:41,556
那么什么是运行代码签名执行呢

339
00:11:42,186 --> 0:11:44,906
它防止在没有一个相关的

340
00:11:44,906 --> 0:11:47,056
代码签名时 在你的进程中

341
00:11:47,056 --> 0:11:51,016
创建一个可执行内存

342
00:11:51,016 --> 0:11:52,556
通过首先确保

343
00:11:52,556 --> 0:11:54,196
映射到你的进程中的所有字节

344
00:11:54,196 --> 0:11:55,666
与其相关联的代码签名匹配

345
00:11:55,666 --> 0:11:57,146
当它们被从磁盘中读取时来实现此目的

346
00:11:57,146 --> 0:11:59,256
这不仅仅包括你的

347
00:11:59,256 --> 0:12:00,976
Mach-O 中的可执行区域 也包括

348
00:11:59,256 --> 0:12:00,976
Mach-O 中的可执行区域 也包括

349
00:12:00,976 --> 0:12:02,436
非可执行映射

350
00:12:02,436 --> 0:12:03,476
比如只读部分

351
00:12:05,476 --> 0:12:07,316
并且防止执行

352
00:12:07,316 --> 0:12:08,866
与其签名不相符的

353
00:12:08,866 --> 0:12:09,786
已修改内存

354
00:12:10,456 --> 0:12:12,886
因此 通过确认

355
00:12:12,976 --> 0:12:14,496
我们正在从

356
00:12:14,496 --> 0:12:15,866
磁盘中读取的内存如

357
00:12:15,866 --> 0:12:17,176
它最初时一样 并且

358
00:12:17,176 --> 0:12:18,186
不能被更改

359
00:12:18,186 --> 0:12:19,436
我们能够确保你的

360
00:12:19,436 --> 0:12:20,386
进程在运行中的一致性

361
00:12:22,546 --> 0:12:24,116
那么其中一个

362
00:12:24,116 --> 0:12:25,336
可能在使用

363
00:12:25,336 --> 0:12:26,546
运行代码签名执行

364
00:12:26,546 --> 0:12:28,446
出现的问题是 如果你的代码使用

365
00:12:28,446 --> 0:12:31,066
JIT 来在你的 App 中

366
00:12:31,066 --> 0:12:31,896
快速运行非本机代码

367
00:12:32,526 --> 0:12:33,986
为此我们建议你

368
00:12:33,986 --> 0:12:35,486
使用允许 JIT 授权

369
00:12:35,886 --> 0:12:37,936
然后使用 MAP-JIT 标志

370
00:12:37,936 --> 0:12:39,306
当你分配你的

371
00:12:39,306 --> 0:12:40,926
你所编译代码的

372
00:12:40,926 --> 0:12:42,976
读/写/执行内存时

373
00:12:43,276 --> 0:12:45,096
这允许我们

374
00:12:45,096 --> 0:12:46,266
对系统中的其他内存

375
00:12:46,266 --> 0:12:47,586
保有其他的保护

376
00:12:47,586 --> 0:12:49,556
同时给你提供

377
00:12:49,556 --> 0:12:51,506
临时空间内存来

378
00:12:51,506 --> 0:12:52,996
让你完成需要使用 JIT 的操作

379
00:12:54,026 --> 0:12:57,586
如果你无法使用 MAP-JIT

380
00:12:57,586 --> 0:12:58,686
标志 是因为你没有

381
00:12:58,776 --> 0:13:01,506
你的 JIT 引擎的源代码访问权限

382
00:12:58,776 --> 0:13:01,506
你的 JIT 引擎的源代码访问权限

383
00:13:01,756 --> 0:13:02,946
你可以使用允许未签名

384
00:13:02,946 --> 0:13:04,466
可执行内存权限

385
00:13:04,936 --> 0:13:06,906
这一操作将会降低

386
00:13:06,906 --> 0:13:09,126
运行代码签名执行所提供的

387
00:13:09,126 --> 0:13:11,796
安全性预测

388
00:13:11,796 --> 0:13:13,396
仅确认对于每一个

389
00:13:13,396 --> 0:13:14,556
具有代码签名的内存

390
00:13:14,556 --> 0:13:16,686
所有你从磁盘读取的

391
00:13:16,686 --> 0:13:17,976
字节都能够

392
00:13:18,216 --> 0:13:20,586
实际上匹配 但是它会

393
00:13:20,586 --> 0:13:23,366
允许修改任何

394
00:13:23,366 --> 0:13:25,256
你的进程内的内存

395
00:13:25,426 --> 0:13:27,976
并且允许创建

396
00:13:28,476 --> 0:13:29,886
未签名的可执行区域

397
00:13:32,606 --> 0:13:33,446
另一个我们看到的

398
00:13:33,446 --> 0:13:34,636
一些开发人员遇到的挑战是

399
00:13:34,636 --> 0:13:39,086
他们试图去修补一些

400
00:13:39,086 --> 0:13:40,066
已经加载的系统框架

401
00:13:40,066 --> 0:13:43,106
在已经使用了强化运行之后

402
00:13:43,866 --> 0:13:45,656
我们不建议你这么做

403
00:13:45,656 --> 0:13:46,776
你应该查看

404
00:13:46,776 --> 0:13:47,666
是否有任何强化运行

405
00:13:47,736 --> 0:13:49,396
功能实际上

406
00:13:49,686 --> 0:13:51,846
解决了你这样做的原因

407
00:13:51,966 --> 0:13:53,746
不过 如果你需要

408
00:13:53,746 --> 0:13:54,916
允许未签名可执行内存权限

409
00:13:54,916 --> 0:13:56,676
会执行你所

410
00:13:56,676 --> 0:13:58,166
需要的操作 允许你修改

411
00:13:58,166 --> 0:14:00,636
已映射的那些内存页

412
00:13:58,166 --> 0:14:00,636
已映射的那些内存页

413
00:14:01,606 --> 0:14:04,046
另外一个我们观察到的

414
00:14:04,046 --> 0:14:05,616
有关于允许代码签名执行

415
00:14:05,616 --> 0:14:07,986
的问题是

416
00:14:07,986 --> 0:14:09,796
有些人在更新

417
00:14:09,796 --> 0:14:11,486
App 时发生崩溃

418
00:14:11,916 --> 0:14:13,806
这是因为代码签名

419
00:14:13,806 --> 0:14:16,066
在内核中首次使用时

420
00:14:16,066 --> 0:14:17,966
被锁存在文件中

421
00:14:17,966 --> 0:14:20,206
这意味着如果你修改已经

422
00:14:20,206 --> 0:14:23,006
运行和被签名的文件

423
00:14:23,006 --> 0:14:23,986
它会不再匹配

424
00:14:23,986 --> 0:14:25,076
内核中已有的签名

425
00:14:25,076 --> 0:14:26,296
你就会看到

426
00:14:26,296 --> 0:14:27,816
代码签名错误

427
00:14:28,626 --> 0:14:30,216
我们的建议是

428
00:14:30,216 --> 0:14:31,916
不要直接修改

429
00:14:31,916 --> 0:14:33,146
磁盘中的已有文件

430
00:14:33,146 --> 0:14:35,626
而是始终创建一个

431
00:14:35,656 --> 0:14:37,306
具有更新内容的新文件

432
00:14:37,306 --> 0:14:38,376
并移除旧文件

433
00:14:38,696 --> 0:14:42,056
这会确保首次使用的新文件获取

434
00:14:42,056 --> 0:14:44,366
其代码签名而不会

435
00:14:44,366 --> 0:14:45,986
出现你所看到的代码签名错误

436
00:14:48,746 --> 0:14:50,226
那么下面我们来讨论一下库验证

437
00:14:52,746 --> 0:14:54,156
库验证可以保护

438
00:14:54,156 --> 0:14:55,586
你的 App 免受代码注入和

439
00:14:55,586 --> 0:14:56,586
动态库劫持

440
00:14:57,056 --> 0:14:58,736
通过确保你的 App

441
00:14:58,736 --> 0:15:00,406
仅加载由你的

442
00:14:58,736 --> 0:15:00,406
仅加载由你的

443
00:15:00,406 --> 0:15:01,806
团队或是 Apple 签名的代码

444
00:15:01,806 --> 0:15:03,626
有的人或许会问

445
00:15:03,626 --> 0:15:05,436
为什么需要加载由

446
00:15:05,436 --> 0:15:05,896
Apple 签名的代码

447
00:15:06,036 --> 0:15:07,326
好吧 请记住

448
00:15:07,326 --> 0:15:08,906
所有的你从操作系统中

449
00:15:08,906 --> 0:15:09,676
加载的框架和库

450
00:15:09,676 --> 0:15:11,156
都是经过 Apple 签名的

451
00:15:11,156 --> 0:15:15,076
因此你需要能够调用

452
00:15:12,486 --> 0:15:14,616
它们并且将它们加载到你的进程中

453
00:15:16,156 --> 0:15:17,956
请注意 库验证

454
00:15:18,056 --> 0:15:19,746
可防止加载未签名的

455
00:15:19,746 --> 0:15:21,106
和临时签名的代码

456
00:15:21,706 --> 0:15:23,946
因此在开发过程中要保持小心

457
00:15:23,946 --> 0:15:25,396
确保你在使用 Apple 开发证书 

458
00:15:25,396 --> 0:15:28,416
而并非关闭代码签名或

459
00:15:28,646 --> 0:15:30,416
只是使用临时签名

460
00:15:33,946 --> 0:15:35,926
因此 库验证可能会

461
00:15:35,926 --> 0:15:38,806
对某些使用进程内插件

462
00:15:39,066 --> 0:15:40,856
或生态系统的 App 带来挑战

463
00:15:41,536 --> 0:15:42,606
我们建议你考虑

464
00:15:42,606 --> 0:15:44,546
迁移到一个进程外

465
00:15:44,546 --> 0:15:46,056
插件模型 因此你就不需要

466
00:15:46,306 --> 0:15:48,036
将未知的第三方代码

467
00:15:48,036 --> 0:15:50,746
加载到你的 App 中 但是假设你

468
00:15:50,746 --> 0:15:52,606
做不到 你可以使用禁用

469
00:15:52,606 --> 0:15:54,016
库验证权限

470
00:15:54,096 --> 0:15:55,816
这一操作会允许加载

471
00:15:55,816 --> 0:15:57,756
未签名和临时签名的插件

472
00:15:58,136 --> 0:15:59,336
请注意 你可以自行

473
00:15:59,336 --> 0:16:01,756
执行这个操作 不需要

474
00:15:59,336 --> 0:16:01,756
执行这个操作 不需要

475
00:16:01,996 --> 0:16:02,986
执行任何运行代码或

476
00:16:02,986 --> 0:16:04,796
选择执行相关权限

477
00:16:05,036 --> 0:16:06,226
只需把禁用

478
00:16:06,226 --> 0:16:07,896
库验证打开 当系统

479
00:16:07,896 --> 0:16:09,636
发现你正在加载一个

480
00:16:09,636 --> 0:16:11,486
临时签名或未签名的

481
00:16:11,486 --> 0:16:12,546
插件时 它会降低

482
00:16:12,546 --> 0:16:14,726
你进程的安全性

483
00:16:14,726 --> 0:16:15,966
来允许此发生 因为你已经

484
00:16:15,966 --> 0:16:18,666
告知系统想要加载未签名的插件

485
00:16:20,096 --> 0:16:22,536
下一个是 DYLD 环境

486
00:16:22,536 --> 0:16:23,306
变量保护

487
00:16:23,816 --> 0:16:26,256
DYLD 环境变量

488
00:16:26,256 --> 0:16:27,826
在你的开发过程中

489
00:16:27,826 --> 0:16:29,976
对于加载

490
00:16:29,976 --> 0:16:31,716
调试库到你的 App 中十分有用

491
00:16:31,806 --> 0:16:35,746
当你在测试或使用一些库

492
00:16:35,816 --> 0:16:36,856
或者一些正在构建

493
00:16:36,856 --> 0:16:38,176
和正在开发的的框架

494
00:16:38,176 --> 0:16:39,386
但还未准备好将它们

495
00:16:39,386 --> 0:16:40,536
置入你的 App 中 仅是测试时

496
00:16:40,956 --> 0:16:42,626
但是它们可能是危险的

497
00:16:42,676 --> 0:16:43,766
因为在你的构建和

498
00:16:43,766 --> 0:16:44,626
测试过程中可以做的

499
00:16:44,626 --> 0:16:46,316
任何操作 攻击者都可以

500
00:16:46,316 --> 0:16:48,996
在一个顾客系统中操作来

501
00:16:48,996 --> 0:16:51,176
利用你的 App 可用的

502
00:16:51,176 --> 0:16:52,256
权限或数据

503
00:16:53,466 --> 0:16:54,656
因为这个原因

504
00:16:54,656 --> 0:16:56,276
当你使用它时 强化运行会

505
00:16:56,276 --> 0:16:57,826
默认阻止这些变量

506
00:16:58,656 --> 0:17:01,916
如果你在调试过程中

507
00:16:58,656 --> 0:17:01,916
如果你在调试过程中

508
00:17:01,916 --> 0:17:03,806
需要使用 DYLD 环境变量

509
00:17:03,806 --> 0:17:04,776
你可以在调试版本中

510
00:17:04,776 --> 0:17:06,256
使用获取任务允许权限

511
00:17:06,586 --> 0:17:07,866
请注意 Xcode

512
00:17:07,866 --> 0:17:09,236
会在你创建调试时

513
00:17:09,236 --> 0:17:10,906
自动为你启用

514
00:17:10,906 --> 0:17:11,796
而当你创建发布版本时

515
00:17:11,796 --> 0:17:14,656
自动为你关闭

516
00:17:15,296 --> 0:17:16,945
但是请注意 如果你在

517
00:17:16,945 --> 0:17:18,906
使用一个自定义工作流程

518
00:17:18,945 --> 0:17:20,336
大多数情况下公证服务

519
00:17:20,425 --> 0:17:21,786
无法接受具有

520
00:17:21,786 --> 0:17:22,776
获取任务允许权限的二进制文件

521
00:17:22,776 --> 0:17:25,806
因此在你向公证服务发送你的

522
00:17:25,965 --> 0:17:27,976
发布版本之前 请确保已经关闭此权限

523
00:17:30,246 --> 0:17:33,626
因此在少数情况下 我们看到

524
00:17:33,626 --> 0:17:37,066
开发人员需要使用

525
00:17:37,066 --> 0:17:39,326
DYLD 环境变量

526
00:17:39,326 --> 0:17:40,696
当他们向用户发布他们的 App 时

527
00:17:41,406 --> 0:17:42,886
同样 我们并不建议

528
00:17:42,886 --> 0:17:43,376
你这么做

529
00:17:43,376 --> 0:17:45,936
这可能非常危险

530
00:17:45,936 --> 0:17:47,136
容易在顾客系统上

531
00:17:47,136 --> 0:17:48,716
利用你的 App 但是如果你

532
00:17:48,716 --> 0:17:50,256
需要的话 有一个权限可以

533
00:17:50,306 --> 0:17:52,496
允许 DYLD 环境变量

534
00:17:52,496 --> 0:17:53,836
这会允许

535
00:17:53,886 --> 0:17:55,196
使用这些变量 并且被

536
00:17:55,196 --> 0:17:55,926
公证服务所接受

537
00:17:56,386 --> 0:17:59,506
下一个是调试保护

538
00:18:00,036 --> 0:18:03,916
我们都知道调试器

539
00:18:03,916 --> 0:18:05,956
允许开发人员来检视

540
00:18:05,956 --> 0:18:07,596
寄存器和内存状态

541
00:18:07,916 --> 0:18:09,466
修改进程内存

542
00:18:09,906 --> 0:18:11,606
这意味着它们允许黑客

543
00:18:12,476 --> 0:18:14,266
窃取敏感的用户数据

544
00:18:14,266 --> 0:18:15,306
和注入恶意代码

545
00:18:16,006 --> 0:18:17,146
因此在默认设置下

546
00:18:17,196 --> 0:18:19,096
强化运行不允许

547
00:18:19,096 --> 0:18:21,746
调试强化过程

548
00:18:21,746 --> 0:18:24,186
但是如果你需要

549
00:18:24,186 --> 0:18:25,666
在开发流中使用调试器

550
00:18:25,666 --> 0:18:26,986
同样 获取允许任务权限

551
00:18:26,986 --> 0:18:28,646
是你所需要的

552
00:18:28,646 --> 0:18:30,216
与 DYLD 环境变量一起

553
00:18:30,216 --> 0:18:31,376
获取任务允许权限

554
00:18:31,376 --> 0:18:34,036
会允许你的 App 被调试

555
00:18:35,226 --> 0:18:37,456
但是如果你使用

556
00:18:37,456 --> 0:18:39,426
附带的调试器进行所有测试 需要小心 

557
00:18:39,426 --> 0:18:40,996
这会掩盖一些

558
00:18:41,086 --> 0:18:42,536
其他你可能遇到的

559
00:18:42,536 --> 0:18:43,556
强化运行相关的问题

560
00:18:43,556 --> 0:18:45,866
尤其是有关运行代码签名执行的

561
00:18:46,066 --> 0:18:47,426
基本上 一旦调试器

562
00:18:47,426 --> 0:18:49,376
被附加 我们就不再能强制

563
00:18:49,696 --> 0:18:51,036
执行代码签名了

564
00:18:51,656 --> 0:18:53,266
因为调试器 例如设定一个断点

565
00:18:53,266 --> 0:18:57,086
会自动更改你的进程中的数据

566
00:18:57,086 --> 0:18:58,256
如果我们继续

567
00:18:58,256 --> 0:18:59,616
强制执行它们

568
00:18:59,616 --> 0:19:00,146
它们会立即崩溃

569
00:18:59,616 --> 0:19:00,146
它们会立即崩溃

570
00:19:00,606 --> 0:19:01,956
因此请确保测试

571
00:19:01,956 --> 0:19:03,376
发布版本来查看

572
00:19:03,666 --> 0:19:04,626
运行代码签名执行

573
00:19:04,626 --> 0:19:07,216
可能具有的其他影响

574
00:19:07,216 --> 0:19:08,806
然后如果你需要

575
00:19:08,806 --> 0:19:10,676
构建一个调试版本

576
00:19:10,676 --> 0:19:12,176
而不通过 Xcode 的获取任务允许

577
00:19:12,176 --> 0:19:13,716
你可以将代码签名注入基础权限

578
00:19:13,716 --> 0:19:17,096
等于你的 Xcode 项目中的无选项

579
00:19:17,096 --> 0:19:18,456
来获取所有的调试设置 除了

580
00:19:18,456 --> 0:19:18,856
获取任务允许之外

581
00:19:21,216 --> 0:19:23,526
同样这在插件生态系统中

582
00:19:23,526 --> 0:19:26,006
也可能成为一个挑战

583
00:19:26,456 --> 0:19:27,926
因为插件开发人员需要在

584
00:19:27,926 --> 0:19:29,696
他们想要加载的 App 中

585
00:19:29,806 --> 0:19:30,716
调试他们的插件

586
00:19:31,436 --> 0:19:32,426
因此 我们同样建议你

587
00:19:32,586 --> 0:19:34,046
考虑进程外

588
00:19:34,046 --> 0:19:36,576
插件模型 或考虑

589
00:19:36,576 --> 0:19:38,666
将一个你的

590
00:19:39,186 --> 0:19:40,486
App 的调试版本发送给

591
00:19:40,486 --> 0:19:41,886
注册插件开发人员

592
00:19:42,096 --> 0:19:44,126
以便他们有能力进行

593
00:19:44,126 --> 0:19:45,416
测试 但你不需要将其发送给

594
00:19:45,416 --> 0:19:48,166
所有的顾客 但是如果

595
00:19:48,166 --> 0:19:50,776
绝对必要 公证服务

596
00:19:50,776 --> 0:19:51,826
将会接受

597
00:19:51,826 --> 0:19:53,446
获取任务允许权限

598
00:19:53,446 --> 0:19:55,066
和禁用

599
00:19:55,066 --> 0:19:56,506
库验证权的组合

600
00:19:56,506 --> 0:19:57,616
来允许此工作流程

601
00:20:00,816 --> 0:20:02,396
那么接下来我们简单谈谈

602
00:20:02,396 --> 0:20:03,706
受保护资源访问

603
00:20:05,036 --> 0:20:07,286
我们都知道

604
00:20:07,286 --> 0:20:08,406
你的顾客使用他们的 Mac 来

605
00:20:08,406 --> 0:20:10,946
存储大量的关于

606
00:20:10,946 --> 0:20:13,526
他们的生活的信息 而 Mac 则

607
00:20:13,526 --> 0:20:16,846
可以访问对安全性敏感传感器

608
00:20:17,746 --> 0:20:19,136
为了 或者 一旦你采用了

609
00:20:19,166 --> 0:20:20,376
强化运行

610
00:20:20,696 --> 0:20:21,936
你的 App 需要声明

611
00:20:21,936 --> 0:20:23,626
其需要访问其中任何

612
00:20:23,626 --> 0:20:24,626
受保护资源的意图

613
00:20:25,696 --> 0:20:27,696
我们提到了去年的

614
00:20:27,696 --> 0:20:30,516
内容 但是如果你需要访问

615
00:20:30,516 --> 0:20:32,616
这些资源中的任意一个 你需要

616
00:20:32,616 --> 0:20:34,416
在你的主捆绑包上

617
00:20:34,416 --> 0:20:37,716
获得授权 然后声明一个

618
00:20:37,716 --> 0:20:39,786
与授权有关的 usage 字符串

619
00:20:39,786 --> 0:20:41,016
以便当你的

620
00:20:41,016 --> 0:20:43,016
App 试图访问

621
00:20:43,016 --> 0:20:44,786
这些资源的其中一个时

622
00:20:44,786 --> 0:20:46,086
系统可以提供一个对话

623
00:20:46,086 --> 0:20:49,396
说明需要访问这一资源的原因

624
00:20:49,396 --> 0:20:50,586
以便你可以获取

625
00:20:50,586 --> 0:20:51,396
用户的同意

626
00:20:52,656 --> 0:20:54,826
下面是一些本部分的

627
00:20:54,826 --> 0:20:55,836
总结建议

628
00:20:55,956 --> 0:20:57,856
只使用你所需要的授权

629
00:20:57,986 --> 0:20:59,786
这一授权关闭了

630
00:20:59,786 --> 0:21:00,996
强化运行所提供的

631
00:20:59,786 --> 0:21:00,996
强化运行所提供的

632
00:21:00,996 --> 0:21:02,566
安全性 而且它们可以被

633
00:21:02,566 --> 0:21:04,176
任何查看你的

634
00:21:04,176 --> 0:21:05,936
App 并试图发现

635
00:21:06,256 --> 0:21:07,476
可以做点什么事情的人检视

636
00:21:07,476 --> 0:21:09,526
一旦它被发送给顾客

637
00:21:09,746 --> 0:21:11,106
因此要谨慎 只使用

638
00:21:11,106 --> 0:21:12,596
你所需要的授权 并把它们

639
00:21:12,596 --> 0:21:14,416
放在需要它们的进程中

640
00:21:14,416 --> 0:21:17,066
如果你在你的 App 中有多个进程

641
00:21:17,066 --> 0:21:18,526
多个可执行文件

642
00:21:18,526 --> 0:21:20,276
它们不太可能都需要

643
00:21:20,276 --> 0:21:21,536
同样的保护

644
00:21:21,536 --> 0:21:22,656
你可能不需要在每一个进程中

645
00:21:22,656 --> 0:21:23,446
都执行 JIT

646
00:21:23,446 --> 0:21:24,276
你可能不需要将

647
00:21:24,276 --> 0:21:25,536
插件加载到每一个进程中

648
00:21:25,806 --> 0:21:27,306
因此只使用你所需要的授权

649
00:21:27,306 --> 0:21:28,806
用于需要它们的进程

650
00:21:29,726 --> 0:21:31,306
而且当你声明

651
00:21:31,306 --> 0:21:32,866
资源访问时 确保

652
00:21:32,866 --> 0:21:34,266
那些授权仅用于

653
00:21:34,266 --> 0:21:35,696
你的 App 的主捆绑包

654
00:21:36,046 --> 0:21:38,686
那些为你的捆绑包中

655
00:21:38,686 --> 0:21:41,206
其他可执行文件所继承的包

656
00:21:41,206 --> 0:21:43,346
它们不需要出现

657
00:21:43,416 --> 0:21:44,276
只需要在主捆绑包上

658
00:21:44,716 --> 0:21:46,496
现在我要把话筒交还给

659
00:21:46,496 --> 0:21:48,686
Garrett 由他来介绍

660
00:21:48,686 --> 0:21:50,976
实际提交公证需要怎么做

661
00:21:51,516 --> 0:21:57,206
[掌声]

662
00:21:57,706 --> 0:21:58,196
&gt;&gt; 谢谢 Robert

663
00:21:59,036 --> 0:22:00,066
现在你们已经了解了

664
00:21:59,036 --> 0:22:00,066
现在你们已经了解了

665
00:22:00,066 --> 0:22:00,886
在构建和设计

666
00:22:00,886 --> 0:22:02,046
App 时所要考虑的一切

667
00:22:02,046 --> 0:22:03,486
以便它为

668
00:22:03,486 --> 0:22:05,516
公证做好准备 那么你如何

669
00:22:05,516 --> 0:22:07,376
实际将它提交给公证服务呢

670
00:22:08,356 --> 0:22:11,276
我们先简单了解下

671
00:22:11,276 --> 0:22:12,846
公证的工作流程

672
00:22:12,846 --> 0:22:13,926
不管你使用的是

673
00:22:13,926 --> 0:22:15,166
Xcode 还是有一个

674
00:22:15,166 --> 0:22:17,276
自定义工作流程

675
00:22:17,406 --> 0:22:18,786
大概的工作流程是基本相同的

676
00:22:19,866 --> 0:22:20,776
你提交 App

677
00:22:20,776 --> 0:22:22,886
进行公证 检查

678
00:22:23,116 --> 0:22:25,036
公证服务的状态

679
00:22:25,336 --> 0:22:26,836
一旦公证完成

680
00:22:27,256 --> 0:22:28,936
你会获得一个标签

681
00:22:28,936 --> 0:22:31,276
你最终需要确认该标签

682
00:22:31,276 --> 0:22:32,606
和公证是否成功

683
00:22:32,606 --> 0:22:35,516
在我们进一步解释

684
00:22:35,516 --> 0:22:36,946
这个问题之前 我们应该先讨论一下

685
00:22:37,176 --> 0:22:39,636
何时应该提交什么

686
00:22:39,636 --> 0:22:40,926
你至少需要提交

687
00:22:40,926 --> 0:22:41,776
你所发行的全部软件

688
00:22:41,776 --> 0:22:45,286
但你其实也可以更频繁地

689
00:22:45,286 --> 0:22:46,616
上传提交

690
00:22:46,616 --> 0:22:47,806
让开发人员机器之外

691
00:22:47,806 --> 0:22:49,586
运行的一切

692
00:22:49,586 --> 0:22:50,676
都可以作为公证服务上传提交

693
00:22:51,076 --> 0:22:52,056
不过你也不需要

694
00:22:52,056 --> 0:22:54,126
上传所有 CI build

695
00:22:56,456 --> 0:22:58,266
团队中的任何人都可提交

696
00:22:58,266 --> 0:23:00,386
软件以供公证

697
00:22:58,266 --> 0:23:00,386
软件以供公证

698
00:23:00,926 --> 0:23:02,546
这和去年不同

699
00:23:02,876 --> 0:23:04,706
当时只有特定的成员才能这样做

700
00:23:07,076 --> 0:23:08,606
现在你已经做好准备

701
00:23:08,606 --> 0:23:09,366
提交给公证服务了

702
00:23:09,646 --> 0:23:11,596
如果你使用的是 Xcode

703
00:23:11,596 --> 0:23:12,896
那就非常容易 它已被集成到了

704
00:23:12,896 --> 0:23:14,356
档案与发行工作流程里

705
00:23:14,946 --> 0:23:16,136
所以一旦你构建了一份档案

706
00:23:16,176 --> 0:23:17,306
就可以打开 Xcode 管理器

707
00:23:17,306 --> 0:23:18,486
正如你所见的这样

708
00:23:19,306 --> 0:23:20,506
然后选择发行 App

709
00:23:20,566 --> 0:23:22,236
就像你之前使用 Developer ID 所做的那样

710
00:23:23,566 --> 0:23:27,246
选择 Developer ID 然后使用

711
00:23:27,246 --> 0:23:28,536
上传选项 把一份拷贝

712
00:23:28,536 --> 0:23:29,836
提交给公证服务

713
00:23:30,346 --> 0:23:33,306
你会在上传过程中

714
00:23:33,306 --> 0:23:35,626
看到进度条

715
00:23:35,626 --> 0:23:37,126
上传结束后

716
00:23:37,126 --> 0:23:38,586
你会回到管理器

717
00:23:38,586 --> 0:23:39,956
你会注意到

718
00:23:40,086 --> 0:23:41,566
状态已改为正在处理

719
00:23:45,086 --> 0:23:46,216
公证服务结束后

720
00:23:46,216 --> 0:23:48,386
你将把通知

721
00:23:48,386 --> 0:23:51,056
推送到 Xcode

722
00:23:51,056 --> 0:23:52,306
回到管理器后

723
00:23:52,656 --> 0:23:53,706
你会注意到状态

724
00:23:53,706 --> 0:23:55,856
已经变成了准备发行

725
00:23:55,856 --> 0:23:57,446
在屏幕的右下角

726
00:23:57,446 --> 0:23:59,826
导出已公证 App 的选项已经可用了

727
00:24:01,276 --> 0:24:02,586
点按导出已公证 App

728
00:24:02,586 --> 0:24:04,216
Xcode 将为你

729
00:24:04,216 --> 0:24:06,496
在 App 上附加通行证

730
00:24:06,496 --> 0:24:08,496
这样它就完全准备好可以发行了

731
00:24:09,926 --> 0:24:10,766
我们等一下会进一步说明

732
00:24:10,766 --> 0:24:12,026
你将如何自我核实

733
00:24:12,026 --> 0:24:15,086
因为那是自定义工作流程

734
00:24:15,086 --> 0:24:16,476
与 Xcode 之间的共享工作流程

735
00:24:17,766 --> 0:24:20,636
如果你不用 Xcode

736
00:24:21,266 --> 0:24:23,496
那么用自定义工作流程进行提交

737
00:24:23,556 --> 0:24:24,316
也一样的简单

738
00:24:24,956 --> 0:24:25,586
首先你需要考虑

739
00:24:25,586 --> 0:24:28,296
自己准备向公证服务提交什么

740
00:24:29,266 --> 0:24:31,146
公证服务接受三种

741
00:24:31,146 --> 0:24:33,466
主流格式 磁盘映像

742
00:24:33,726 --> 0:24:36,266
安装包和 zip 档案

743
00:24:36,946 --> 0:24:38,466
如果你的输出形式

744
00:24:38,466 --> 0:24:39,996
是这三种之外的格式

745
00:24:40,526 --> 0:24:41,706
那你就得先把它转换成

746
00:24:41,706 --> 0:24:42,956
这三种格式之一

747
00:24:42,956 --> 0:24:44,136
然后再发送到公证服务

748
00:24:44,666 --> 0:24:47,676
别忘了 在你创建

749
00:24:47,676 --> 0:24:49,196
zip 档案的时候

750
00:24:49,196 --> 0:24:51,026
一定要包含 macOS

751
00:24:51,026 --> 0:24:53,536
特定元数据 如扩展属性

752
00:24:54,126 --> 0:24:55,136
如果你不知道该用哪种工具

753
00:24:55,136 --> 0:24:56,456
可以在操作系统

754
00:24:56,456 --> 0:24:57,976
内置的 ditto 和 Archive Utility 中获取支持

755
00:25:01,776 --> 0:25:03,726
另外需要考虑的一个问题

756
00:25:03,726 --> 0:25:05,496
就是如果你使用

757
00:25:05,496 --> 0:25:07,266
自定义安装工具

758
00:25:07,266 --> 0:25:08,356
如果你的自定义安装工具

759
00:25:08,356 --> 0:25:10,116
要从网络上拉取内容

760
00:25:10,116 --> 0:25:11,386
作为安装的一部分

761
00:25:11,386 --> 0:25:13,556
或者如果你使用

762
00:25:13,556 --> 0:25:15,436
自定义打包格式 就会稍微麻烦一点

763
00:25:16,426 --> 0:25:17,816
如果你的自定义安装工具

764
00:25:17,816 --> 0:25:19,346
有上面的需要

765
00:25:19,736 --> 0:25:21,296
那么你也许要采取

766
00:25:21,296 --> 0:25:23,846
两步公证程序

767
00:25:23,846 --> 0:25:25,046
也就是把所有将要

768
00:25:25,046 --> 0:25:27,146
放进磁盘里的内容

769
00:25:27,146 --> 0:25:28,546
使用上面提到的三种支持格式之一

770
00:25:28,546 --> 0:25:29,856
提交公证

771
00:25:30,426 --> 0:25:32,296
对其附加通行证

772
00:25:32,296 --> 0:25:33,736
然后再单独提交你的安装 App

773
00:25:34,346 --> 0:25:37,206
现在你已经知道

774
00:25:37,206 --> 0:25:38,066
应该把哪些内容提交公证服务了

775
00:25:38,066 --> 0:25:40,453
那么具体该怎么操作呢

776
00:25:40,516 --> 0:25:42,606
Xcode 10 及更新版本

777
00:25:43,106 --> 0:25:44,336
包括一个命令行工具

778
00:25:44,336 --> 0:25:45,646
它叫做 altool

779
00:25:45,646 --> 0:25:47,336
它的作用就是和公证服务进行交互

780
00:25:47,906 --> 0:25:49,066
如果你在用多个版本的

781
00:25:49,066 --> 0:25:50,026
Xcode 那就要用

782
00:25:50,026 --> 0:25:51,186
Xcode select 以确保

783
00:25:51,186 --> 0:25:52,506
你选择了 Xcode 10 

784
00:25:52,506 --> 0:25:54,546
或更新版本 然后你就能用

785
00:25:54,726 --> 0:25:57,506
带公证 App 指令的 altool 工具了

786
00:25:58,496 --> 0:25:59,806
你需要用它提交

787
00:25:59,806 --> 0:26:02,146
主捆绑包 ID

788
00:25:59,806 --> 0:26:02,146
主捆绑包 ID

789
00:26:02,496 --> 0:26:03,656
以及你想上传的文件

790
00:26:04,726 --> 0:26:05,916
你需要验证

791
00:26:05,916 --> 0:26:08,056
你的 Apple ID 如果你

792
00:26:08,056 --> 0:26:09,096
看一看主页面 你会看到

793
00:26:09,096 --> 0:26:10,046
使用钥匙串或者

794
00:26:10,046 --> 0:26:11,256
环境变量的选项

795
00:26:11,256 --> 0:26:12,476
这样一来你就不必

796
00:26:12,476 --> 0:26:13,446
每次都输入密码了

797
00:26:14,006 --> 0:26:16,736
公证上传完成后

798
00:26:16,736 --> 0:26:19,186
你将收到一个 UID 请求

799
00:26:20,066 --> 0:26:21,906
这个 UID 代表了

800
00:26:22,096 --> 0:26:24,206
你提交的内容

801
00:26:24,206 --> 0:26:26,526
你可以使用它和

802
00:26:26,526 --> 0:26:28,636
公证信息指令

803
00:26:28,636 --> 0:26:30,576
作为 altool 的一部分来

804
00:26:30,576 --> 0:26:32,886
查看处理状态

805
00:26:32,886 --> 0:26:34,006
你可以用这种方法来查看

806
00:26:34,286 --> 0:26:35,686
公证何时结束

807
00:26:35,686 --> 0:26:38,646
以及状态如何

808
00:26:39,766 --> 0:26:43,566
这里是一个公证成功的例子

809
00:26:43,566 --> 0:26:44,916
这里重要的是

810
00:26:44,916 --> 0:26:46,026
日志文件 URL

811
00:26:46,676 --> 0:26:47,446
无论公证是成功

812
00:26:47,446 --> 0:26:49,166
还是出了问题

813
00:26:49,166 --> 0:26:51,116
你都可以查看

814
00:26:51,116 --> 0:26:52,556
日志文件 URL

815
00:26:52,556 --> 0:26:53,416
了解更多信息

816
00:26:53,416 --> 0:26:56,676
日志文件 URL 不会

817
00:26:56,676 --> 0:26:57,376
长期存在

818
00:26:58,286 --> 0:26:59,656
它们大约只会存在一天

819
00:27:00,266 --> 0:27:01,446
所以你真的应该

820
00:27:01,446 --> 0:27:02,636
获取一个新的 UID

821
00:27:03,076 --> 0:27:04,456
这样当你需要公证信息时

822
00:27:04,456 --> 0:27:05,983
就能获取新的日志文件 URL 了

823
00:27:09,786 --> 0:27:11,646
这里的例子是一次

824
00:27:11,646 --> 0:27:12,806
成功处理的 Json 日志

825
00:27:13,726 --> 0:27:15,896
注意状态是已接受

826
00:27:16,906 --> 0:27:18,906
如果它失败了

827
00:27:18,906 --> 0:27:23,026
你就应该查看问题数组

828
00:27:23,026 --> 0:27:24,256
在成功的公证里

829
00:27:24,256 --> 0:27:25,286
这里应该是空白的

830
00:27:26,186 --> 0:27:27,906
但如果出现了失败

831
00:27:27,906 --> 0:27:29,566
这里就会出现对象

832
00:27:29,566 --> 0:27:31,116
每一个对象代表

833
00:27:31,316 --> 0:27:32,166
公证过程中的一个问题

834
00:27:32,166 --> 0:27:35,236
它会显示哪个二进制文件

835
00:27:35,236 --> 0:27:37,586
没有采用强化运行

836
00:27:37,886 --> 0:27:39,396
或者是否有什么没有被正确签署

837
00:27:40,356 --> 0:27:42,576
如果公证遭到拒绝 这里就是关键

838
00:27:43,086 --> 0:27:45,866
如果成功了

839
00:27:45,866 --> 0:27:47,166
你就应该查看

840
00:27:47,166 --> 0:27:49,176
通行证内容 特别是如果你想

841
00:27:49,176 --> 0:27:50,166
使用有趣的

842
00:27:50,166 --> 0:27:51,806
打包软件方式的话

843
00:27:52,656 --> 0:27:54,136
通行证内容应该列出

844
00:27:54,136 --> 0:27:55,936
公证服务所发现的

845
00:27:55,936 --> 0:27:57,816
每一个二进制文件

846
00:27:57,816 --> 0:27:59,116
因此每个二进制文件的信息

847
00:27:59,116 --> 0:28:00,816
都会被包含在通行证里

848
00:27:59,116 --> 0:28:00,816
都会被包含在通行证里

849
00:28:00,816 --> 0:28:01,826
以供附加

850
00:28:02,826 --> 0:28:03,906
如果你发现了

851
00:28:03,906 --> 0:28:04,836
通行证内容里缺了什么

852
00:28:04,836 --> 0:28:07,386
你就要尝试

853
00:28:07,576 --> 0:28:08,896
发现问题所在

854
00:28:08,896 --> 0:28:09,436
并再次尝试

855
00:28:10,476 --> 0:28:12,896
无论你使用的是

856
00:28:12,896 --> 0:28:14,966
Xcode 还是 altool

857
00:28:14,966 --> 0:28:16,006
处理的提交

858
00:28:16,006 --> 0:28:18,716
当公证服务完成后 你都会收到邮件

859
00:28:19,526 --> 0:28:20,746
这里的例子是

860
00:28:20,746 --> 0:28:22,646
一封代表公证成功的邮件

861
00:28:22,646 --> 0:28:24,286
说明软件已经可以附加通行证了

862
00:28:24,876 --> 0:28:28,466
然后就到了下一步

863
00:28:30,006 --> 0:28:32,106
使用 Xcode 10 及以上版本内置的

864
00:28:32,106 --> 0:28:34,606
一个叫 Stapler 的工具附加通行证

865
00:28:35,416 --> 0:28:36,656
在这里你看到的例子

866
00:28:36,656 --> 0:28:38,856
就是 Stapler 的附加指令

867
00:28:39,906 --> 0:28:40,946
你可以用它直接向

868
00:28:40,946 --> 0:28:43,726
安装包或磁盘映像附加通行证

869
00:28:44,206 --> 0:28:46,496
现在要注意的是

870
00:28:46,496 --> 0:28:48,156
你不能直接向 zip 文件附加通行证

871
00:28:48,156 --> 0:28:49,636
你需要解压 zip 文件

872
00:28:50,026 --> 0:28:51,376
向其内容附加通行证

873
00:28:51,376 --> 0:28:54,156
然后再将其打包压缩准备发行

874
00:28:57,486 --> 0:28:59,226
要注意的是

875
00:28:59,356 --> 0:29:01,856
向命令行工具和库附加通行证的功能

876
00:28:59,356 --> 0:29:01,856
向命令行工具和库附加通行证的功能

877
00:29:01,916 --> 0:29:03,966
目前还没有实现 虽然它们

878
00:29:03,966 --> 0:29:06,336
也都可以而且应该被公证

879
00:29:10,336 --> 0:29:12,326
附加通行证之后

880
00:29:12,326 --> 0:29:13,326
下一步就是验证

881
00:29:13,326 --> 0:29:14,226
一切都公证成功

882
00:29:14,226 --> 0:29:16,586
取决于你想验证的东西

883
00:29:16,586 --> 0:29:17,756
这一步会有小小的不同

884
00:29:17,756 --> 0:29:20,086
但首先要做的事很简单

885
00:29:20,086 --> 0:29:21,226
如果你只是想验证

886
00:29:21,226 --> 0:29:22,506
某些东西附加了通行证

887
00:29:23,136 --> 0:29:24,496
那你只需再次使用 Stapler 工具

888
00:29:25,106 --> 0:29:26,706
在这里你可以看到

889
00:29:26,706 --> 0:29:28,546
向 Stapler 工具输入了验证指令

890
00:29:29,046 --> 0:29:30,096
让它去验证一个项目

891
00:29:30,286 --> 0:29:33,566
正确地附加了通行证

892
00:29:33,566 --> 0:29:34,326
而如果你想验证

893
00:29:34,326 --> 0:29:36,146
某些未附加通行证

894
00:29:36,596 --> 0:29:38,636
或者不是由你亲自附加通行证的项目

895
00:29:38,816 --> 0:29:40,146
是否得到成功公证 该怎么做呢

896
00:29:40,706 --> 0:29:41,376
在这种情况下

897
00:29:41,376 --> 0:29:43,586
你就要用到 SPCTL 指令

898
00:29:44,026 --> 0:29:45,716
它是 macOS 中内置的

899
00:29:46,616 --> 0:29:48,396
运行把关评估的工具

900
00:29:48,936 --> 0:29:51,696
取决于你想验证的内容

901
00:29:51,696 --> 0:29:53,246
这一步也会有轻微的不同

902
00:29:53,246 --> 0:29:55,006
但如果你想验证

903
00:29:55,006 --> 0:29:56,416
一个 App 捆绑包

904
00:29:56,416 --> 0:29:58,856
你可以使用 SPCTL 指令的

905
00:29:58,856 --> 0:30:01,466
评估选项中的

906
00:29:58,856 --> 0:30:01,466
评估选项中的

907
00:30:02,316 --> 0:30:04,666
详细输出了解

908
00:30:04,826 --> 0:30:06,026
到 App 的路径

909
00:30:07,296 --> 0:30:08,786
source 会告诉你

910
00:30:08,786 --> 0:30:09,756
它是否得到了公证

911
00:30:10,656 --> 0:30:11,956
经公证的 Developer ID 意味着

912
00:30:11,956 --> 0:30:12,786
它成功地得到了公证

913
00:30:12,786 --> 0:30:13,986
而如果它显示出

914
00:30:13,986 --> 0:30:15,706
其它内容 那就说明

915
00:30:15,706 --> 0:30:16,566
它没有得到公证

916
00:30:17,036 --> 0:30:20,086
而如果你想验证

917
00:30:20,086 --> 0:30:21,046
安装包是否得到了公证

918
00:30:21,046 --> 0:30:24,616
你也可以像刚才那样

919
00:30:24,616 --> 0:30:26,446
使用 SPCTL 指令

920
00:30:26,446 --> 0:30:27,806
只不过再加上一个

921
00:30:27,866 --> 0:30:30,176
类型选项把路径改成安装包

922
00:30:31,446 --> 0:30:32,436
同样 这也会为你显示

923
00:30:32,436 --> 0:30:33,976
source 如果它得到了

924
00:30:33,976 --> 0:30:35,066
成功认证 你就会看到

925
00:30:35,066 --> 0:30:37,186
经公证的 Developer ID

926
00:30:39,856 --> 0:30:42,586
接下来 如果你想验证

927
00:30:42,586 --> 0:30:45,186
已签署的磁盘映像又该怎么做呢

928
00:30:46,796 --> 0:30:48,206
你也可以使用

929
00:30:48,206 --> 0:30:49,766
基本相同的指令

930
00:30:49,766 --> 0:30:52,186
只不过要换成 type open

931
00:30:52,186 --> 0:30:53,846
并输入幻灯片上

932
00:30:54,346 --> 0:30:55,596
列出的上下文

933
00:30:56,726 --> 0:30:57,866
这会显示出和刚才一样的

934
00:30:57,866 --> 0:31:00,366
输出 如果显示的是

935
00:30:57,866 --> 0:31:00,366
输出 如果显示的是

936
00:31:00,366 --> 0:31:01,586
经公证的 Developer ID

937
00:31:01,946 --> 0:31:03,966
就说明已签署磁盘映像的公证成功了

938
00:31:05,546 --> 0:31:06,246
如果你想验证

939
00:31:06,246 --> 0:31:08,006
其它任何对象的公证状态

940
00:31:08,006 --> 0:31:09,736
你就需要使用

941
00:31:09,736 --> 0:31:11,766
代码签名指令

942
00:31:13,456 --> 0:31:14,726
这里的例子就是使用

943
00:31:14,726 --> 0:31:17,126
代码签名指令的验证功能

944
00:31:17,126 --> 0:31:21,316
详细输出 以验证

945
00:31:21,316 --> 0:31:22,706
一个非常特别的请求

946
00:31:23,226 --> 0:31:25,306
notarized 然后是到

947
00:31:25,306 --> 0:31:26,376
二进制文件的路径或者

948
00:31:26,376 --> 0:31:29,086
你想验证的东西

949
00:31:29,086 --> 0:31:30,126
输出的第三行会告诉你

950
00:31:30,126 --> 0:31:31,896
explicit requirements satisfied

951
00:31:32,276 --> 0:31:33,206
这说明你输入到

952
00:31:33,206 --> 0:31:34,506
命令行的请求

953
00:31:34,506 --> 0:31:35,976
已经成功得到满足

954
00:31:35,976 --> 0:31:37,586
在这个例子里就说明

955
00:31:37,586 --> 0:31:39,406
二进制文件得到了公证

956
00:31:40,536 --> 0:31:42,366
如果它说的是

957
00:31:42,366 --> 0:31:44,126
explicit requirement failed 

958
00:31:44,126 --> 0:31:45,936
那就说明二进制文件没有得到成功公证

959
00:31:46,546 --> 0:31:50,056
关于验证公证的方法

960
00:31:50,266 --> 0:31:51,366
就讲到这里

961
00:31:51,816 --> 0:31:53,176
我想再调回去

962
00:31:53,176 --> 0:31:55,586
讲一下 altool 的另一个用途

963
00:31:55,586 --> 0:31:57,226
我在这次演讲开始时提过它

964
00:31:58,636 --> 0:32:00,386
altool 还能通过

965
00:31:58,636 --> 0:32:00,386
altool 还能通过

966
00:32:00,386 --> 0:32:02,506
公证历史指令

967
00:32:02,506 --> 0:32:04,646
为你显示你提交公证过的

968
00:32:04,646 --> 0:32:06,006
所有软件的

969
00:32:06,006 --> 0:32:08,226
公证历史

970
00:32:09,406 --> 0:32:10,446
在这里你会看到

971
00:32:10,446 --> 0:32:12,576
指令与输出的范例

972
00:32:13,156 --> 0:32:14,546
它还能接受页码标注

973
00:32:14,546 --> 0:32:17,666
你可以为所有的提交操作标注页码

974
00:32:19,906 --> 0:32:21,056
我明白要消化的信息

975
00:32:21,056 --> 0:32:26,316
对于这样一场短短的演讲来说是多了点

976
00:32:26,316 --> 0:32:27,586
但是有几件重要的事

977
00:32:27,586 --> 0:32:28,856
是我非常希望大家能够了解的

978
00:32:29,776 --> 0:32:31,916
首先 非常重要的是

979
00:32:31,916 --> 0:32:33,896
使用彻底性代码签名

980
00:32:34,286 --> 0:32:35,786
正确签署你的软件

981
00:32:36,576 --> 0:32:37,846
这很重要 不仅因为

982
00:32:37,846 --> 0:32:39,286
把关工具能够验证

983
00:32:39,286 --> 0:32:40,326
你的软件没有遭到篡改

984
00:32:40,326 --> 0:32:42,746
也是出于公证的需要

985
00:32:45,816 --> 0:32:48,036
第二 不要接受

986
00:32:48,036 --> 0:32:50,126
你不需要的强化运行授权

987
00:32:50,866 --> 0:32:52,266
想一想强化运行

988
00:32:52,266 --> 0:32:55,206
能为你的 App 和用户带来的好处

989
00:32:55,206 --> 0:32:56,546
记住你接受的每一次授权

990
00:32:56,546 --> 0:32:59,246
都会降低 App 的安全性

991
00:32:59,746 --> 0:33:01,866
所以要只接受你需要的授权

992
00:32:59,746 --> 0:33:01,866
所以要只接受你需要的授权

993
00:33:03,646 --> 0:33:05,996
最后 要公证你发行的

994
00:33:05,996 --> 0:33:07,166
所有软件 并为其附加通行证

995
00:33:07,566 --> 0:33:10,146
以便其通过 macOS Catalina 的把关工具

996
00:33:13,516 --> 0:33:15,296
感谢参加本次会议

997
00:33:15,296 --> 0:33:16,086
如果你对公证有

998
00:33:16,086 --> 0:33:17,536
进一步的兴趣

999
00:33:17,536 --> 0:33:18,796
请到公证实验室来

1000
00:33:18,796 --> 0:33:19,596
它会紧接着本次会议

1001
00:33:19,596 --> 0:33:21,096
于下午 4 点开始

1002
00:33:21,586 --> 0:33:24,666
此外 本周还有其它的几个实验室

1003
00:33:24,666 --> 0:33:25,856
会开放 我们将探讨

1004
00:33:25,856 --> 0:33:27,726
安全 公证和签名相关的话题

1005
00:33:28,516 --> 0:33:36,500
谢谢大家 [掌声]
